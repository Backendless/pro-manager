(self.webpackChunkbackendless_ui_sdk=self.webpackChunkbackendless_ui_sdk||[]).push([[327],{31449:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>zr});var r={};n.r(r),n.d(r,{FILE:()=>ce,HTML:()=>he,TEXT:()=>de,URL:()=>ue});var a=n(67294),o=n(1762),l=n(93379),s=n.n(l),c=n(7795),u=n.n(c),d=n(90569),h=n.n(d),p=n(3565),g=n.n(p),b=n(70609),m=n.n(b),v=n(44589),y=n.n(v),_=n(16856),O={};O.styleTagTransform=y(),O.setAttributes=g(),O.insert=h().bind(null,"head"),O.domAPI=u(),O.insertStyleElement=m();s()(_.Z,O);_.Z&&_.Z.locals&&_.Z.locals;n(12404);var E=n(94184),x=n.n(E),S=n(85893);function invariant(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(!e){var o;if(void 0===t)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;(o=new Error(t.replace(/%s/g,(function(){return r[l++]})))).name="Invariant Violation"}throw o.framesToPop=1,o}}var w="dnd-core/INIT_COORDS",C="dnd-core/BEGIN_DRAG",D="dnd-core/PUBLISH_DRAG_SOURCE",P="dnd-core/HOVER",T="dnd-core/DROP",k="dnd-core/END_DRAG";function setClientOffset(e,t){return{type:w,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function get(e,t,n){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n||null}),e)}function without(e,t){return e.filter((function(e){return e!==t}))}function isObject(e){return"object"===_typeof(e)}function xor(e,t){var n=new Map,r=function insertItem(e){n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);var a=[];return n.forEach((function(e,t){1===e&&a.push(t)})),a}var I={type:w,payload:{clientOffset:null,sourceClientOffset:null}};function createBeginDrag(e){return function beginDrag(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},r=n.publishSource,a=void 0===r||r,o=n.clientOffset,l=n.getSourceClientOffset,s=e.getMonitor(),c=e.getRegistry();e.dispatch(setClientOffset(o)),verifyInvariants(t,s,c);var u=getDraggableSource(t,s);if(null!==u){var d=null;if(o){if(!l)throw new Error("getSourceClientOffset must be defined");verifyGetSourceClientOffsetIsFunction(l),d=l(u)}e.dispatch(setClientOffset(o,d));var h=c.getSource(u),p=h.beginDrag(s,u);if(null!=p){verifyItemIsObject(p),c.pinSource(u);var g=c.getSourceType(u);return{type:C,payload:{itemType:g,item:p,sourceId:u,clientOffset:o||null,sourceClientOffset:d||null,isSourcePublic:!!a}}}}else e.dispatch(I)}}function verifyInvariants(e,t,n){invariant(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){invariant(n.getSource(e),"Expected sourceIds to be registered.")}))}function verifyGetSourceClientOffsetIsFunction(e){invariant("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}function verifyItemIsObject(e){invariant(isObject(e),"Item must be an object.")}function getDraggableSource(e,t){for(var n=null,r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}function createPublishDragSource(e){return function publishDragSource(){if(e.getMonitor().isDragging())return{type:D}}}function matchesType(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}function createHover(e){return function hover(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clientOffset;verifyTargetIdsIsArray(t);var a=t.slice(0),o=e.getMonitor(),l=e.getRegistry();checkInvariants(a,o,l);var s=o.getItemType();return removeNonMatchingTargetIds(a,l,s),hoverAllTargets(a,o,l),{type:P,payload:{targetIds:a,clientOffset:r||null}}}}function verifyTargetIdsIsArray(e){invariant(Array.isArray(e),"Expected targetIds to be an array.")}function checkInvariants(e,t,n){invariant(t.isDragging(),"Cannot call hover while not dragging."),invariant(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var a=e[r];invariant(e.lastIndexOf(a)===r,"Expected targetIds to be unique in the passed array."),invariant(n.getTarget(a),"Expected targetIds to be registered.")}}function removeNonMatchingTargetIds(e,t,n){for(var r=e.length-1;r>=0;r--){var a=e[r];matchesType(t.getTargetType(a),n)||e.splice(r,1)}}function hoverAllTargets(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function createDrop(e){return function drop(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getMonitor(),r=e.getRegistry();drop_verifyInvariants(n);var a=getDroppableTargets(n);a.forEach((function(a,o){var l=determineDropResult(a,o,r,n),s={type:T,payload:{dropResult:_objectSpread(_objectSpread({},t),l)}};e.dispatch(s)}))}}function drop_verifyInvariants(e){invariant(e.isDragging(),"Cannot call drop while not dragging."),invariant(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function determineDropResult(e,t,n,r){var a=n.getTarget(e),o=a?a.drop(r,e):void 0;return function verifyDropResultType(e){invariant(void 0===e||isObject(e),"Drop result must either be an object or undefined.")}(o),void 0===o&&(o=0===t?{}:r.getDropResult()),o}function getDroppableTargets(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function createEndDrag(e){return function endDrag(){var t=e.getMonitor(),n=e.getRegistry();!function verifyIsDragging(e){invariant(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();null!=r&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource());return{type:k}}}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function DragDropManagerImpl(e,t){var n=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DragDropManagerImpl),this.isSetUp=!1,this.handleRefCountChange=function(){var e=n.store.getState().refCount>0;n.backend&&(e&&!n.isSetUp?(n.backend.setup(),n.isSetUp=!0):!e&&n.isSetUp&&(n.backend.teardown(),n.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(DragDropManagerImpl,[{key:"receiveBackend",value:function receiveBackend(e){this.backend=e}},{key:"getMonitor",value:function getMonitor(){return this.monitor}},{key:"getBackend",value:function getBackend(){return this.backend}},{key:"getRegistry",value:function getRegistry(){return this.monitor.registry}},{key:"getActions",value:function getActions(){var e=this,t=this.store.dispatch;var n=function createDragDropActions(e){return{beginDrag:createBeginDrag(e),publishDragSource:createPublishDragSource(e),hover:createHover(e),drop:createDrop(e),endDrag:createEndDrag(e)}}(this);return Object.keys(n).reduce((function(r,a){var o=n[a];return r[a]=function bindActionCreator(n){return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var l=n.apply(e,a);void 0!==l&&t(l)}}(o),r}),{})}},{key:"dispatch",value:function dispatch(e){this.store.dispatch(e)}}]),DragDropManagerImpl}(),M=n(97779),z=function strictEquality(e,t){return e===t};function areCoordsEqual(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)}function areArraysEqual(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}function dragOffset_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dragOffset_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dragOffset_ownKeys(Object(n),!0).forEach((function(t){dragOffset_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dragOffset_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dragOffset_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function reduce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case w:case C:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case P:return areCoordsEqual(e.clientOffset,n.clientOffset)?e:dragOffset_objectSpread(dragOffset_objectSpread({},e),{},{clientOffset:n.clientOffset});case k:case T:return A;default:return e}}var N="dnd-core/ADD_SOURCE",L="dnd-core/ADD_TARGET",R="dnd-core/REMOVE_SOURCE",F="dnd-core/REMOVE_TARGET";function dragOperation_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dragOperation_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dragOperation_ownKeys(Object(n),!0).forEach((function(t){dragOperation_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dragOperation_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dragOperation_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function dragOperation_reduce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case C:return dragOperation_objectSpread(dragOperation_objectSpread({},e),{},{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case D:return dragOperation_objectSpread(dragOperation_objectSpread({},e),{},{isSourcePublic:!0});case P:return dragOperation_objectSpread(dragOperation_objectSpread({},e),{},{targetIds:n.targetIds});case F:return-1===e.targetIds.indexOf(n.targetId)?e:dragOperation_objectSpread(dragOperation_objectSpread({},e),{},{targetIds:without(e.targetIds,n.targetId)});case T:return dragOperation_objectSpread(dragOperation_objectSpread({},e),{},{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case k:return dragOperation_objectSpread(dragOperation_objectSpread({},e),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function refCount_reduce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:case L:return e+1;case R:case F:return e-1;default:return e}}var W=[],H=[];function areDirty(e,t){return e!==W&&(e===H||void 0===t||function intersection(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))}(t,e).length>0)}function dirtyHandlerIds_reduce(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case P:break;case N:case L:case F:case R:return W;default:return H}var t=e.payload,n=t.targetIds,r=void 0===n?[]:n,a=t.prevTargetIds,o=void 0===a?[]:a,l=xor(r,o),s=l.length>0||!areArraysEqual(r,o);if(!s)return W;var c=o[o.length-1],u=r[r.length-1];return c!==u&&(c&&l.push(c),u&&l.push(u)),l}function stateId_reduce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1}function reducers_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function reducers_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?reducers_ownKeys(Object(n),!0).forEach((function(t){reducers_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):reducers_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function reducers_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function reducers_reduce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:dirtyHandlerIds_reduce(e.dirtyHandlerIds,{type:t.type,payload:reducers_objectSpread(reducers_objectSpread({},t.payload),{},{prevTargetIds:get(e,"dragOperation.targetIds",[])})}),dragOffset:reduce(e.dragOffset,t),refCount:refCount_reduce(e.refCount,t),dragOperation:dragOperation_reduce(e.dragOperation,t),stateId:stateId_reduce(e.stateId)}}function subtract(e,t){return{x:e.x-t.x,y:e.y-t.y}}function DragDropMonitorImpl_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}W.__IS_NONE__=!0,H.__IS_ALL__=!0;var Z,V=function(){function DragDropMonitorImpl(e,t){!function DragDropMonitorImpl_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DragDropMonitorImpl),this.store=e,this.registry=t}return function DragDropMonitorImpl_createClass(e,t,n){return t&&DragDropMonitorImpl_defineProperties(e.prototype,t),n&&DragDropMonitorImpl_defineProperties(e,n),e}(DragDropMonitorImpl,[{key:"subscribeToStateChange",value:function subscribeToStateChange(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0},r=n.handlerIds;invariant("function"==typeof e,"listener must be a function."),invariant(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,o=function handleChange(){var n=t.store.getState(),o=n.stateId;try{o===a||o===a+1&&!areDirty(n.dirtyHandlerIds,r)||e()}finally{a=o}};return this.store.subscribe(o)}},{key:"subscribeToOffsetChange",value:function subscribeToOffsetChange(e){var t=this;invariant("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function handleChange(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())}))}},{key:"canDragSource",value:function canDragSource(e){if(!e)return!1;var t=this.registry.getSource(e);return invariant(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function canDropOnTarget(e){if(!e)return!1;var t=this.registry.getTarget(e);return invariant(t,"Expected to find a valid target. targetId=".concat(e)),!(!this.isDragging()||this.didDrop())&&(matchesType(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e))}},{key:"isDragging",value:function isDragging(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function isDraggingSource(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return invariant(t,"Expected to find a valid source. sourceId=".concat(e)),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))}},{key:"isOverTarget",value:function isOverTarget(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1};if(!e)return!1;var n=t.shallow;if(!this.isDragging())return!1;var r=this.registry.getTargetType(e),a=this.getItemType();if(a&&!matchesType(r,a))return!1;var o=this.getTargetIds();if(!o.length)return!1;var l=o.indexOf(e);return n?l===o.length-1:l>-1}},{key:"getItemType",value:function getItemType(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function getItem(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function getSourceId(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function getTargetIds(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function getDropResult(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function didDrop(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function getClientOffset(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function getSourceClientOffset(){return function coords_getSourceClientOffset(e){var t=e.clientOffset,n=e.initialClientOffset,r=e.initialSourceClientOffset;return t&&n&&r?subtract(function add(e,t){return{x:e.x+t.x,y:e.y+t.y}}(t,r),n):null}(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function getDifferenceFromInitialOffset(){return function coords_getDifferenceFromInitialOffset(e){var t=e.clientOffset,n=e.initialClientOffset;return t&&n?subtract(t,n):null}(this.store.getState().dragOffset)}}]),DragDropMonitorImpl}(),K=0;function contracts_typeof(e){return contracts_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},contracts_typeof(e)}function validateType(e,t){t&&Array.isArray(e)?e.forEach((function(e){return validateType(e,!1)})):invariant("string"==typeof e||"symbol"===contracts_typeof(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(Z||(Z={}));const Y="undefined"!=typeof global?global:self,G=Y.MutationObserver||Y.WebKitMutationObserver;function makeRequestCallFromTimer(e){return function requestCall(){const t=setTimeout(handleTimer,0),n=setInterval(handleTimer,50);function handleTimer(){clearTimeout(t),clearInterval(n),e()}}}const U="function"==typeof G?function makeRequestCallFromMutationObserver(e){let t=1;const n=new G(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function requestCall(){t=-t,r.data=t}}:makeRequestCallFromTimer;class RawTask{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}const X=new class AsapQueue{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=U(this.flush),this.requestErrorThrow=makeRequestCallFromTimer((()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()}))}},Q=new class TaskFactory{create(e){const t=this.freeTasks,n=t.length?t.pop():new RawTask(this.onError,(e=>t[t.length]=e));return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}(X.registerPendingError);function HandlerRegistryImpl_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function _unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function getNextHandlerId(e){var t=function getNextUniqueId(){return K++}().toString();switch(e){case Z.SOURCE:return"S".concat(t);case Z.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function parseRoleFromHandlerId(e){switch(e[0]){case"S":return Z.SOURCE;case"T":return Z.TARGET;default:invariant(!1,"Cannot parse handler ID: ".concat(e))}}function mapContainsValue(e,t){var n=e.entries(),r=!1;do{var a=n.next(),o=a.done;if(_slicedToArray(a.value,2)[1]===t)return!0;r=!!o}while(!r);return!1}var J=function(){function HandlerRegistryImpl(e){!function HandlerRegistryImpl_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HandlerRegistryImpl),this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}return function HandlerRegistryImpl_createClass(e,t,n){return t&&HandlerRegistryImpl_defineProperties(e.prototype,t),n&&HandlerRegistryImpl_defineProperties(e,n),e}(HandlerRegistryImpl,[{key:"addSource",value:function addSource(e,t){validateType(e),function validateSourceContract(e){invariant("function"==typeof e.canDrag,"Expected canDrag to be a function."),invariant("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),invariant("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(Z.SOURCE,e,t);return this.store.dispatch(function registry_addSource(e){return{type:N,payload:{sourceId:e}}}(n)),n}},{key:"addTarget",value:function addTarget(e,t){validateType(e,!0),function validateTargetContract(e){invariant("function"==typeof e.canDrop,"Expected canDrop to be a function."),invariant("function"==typeof e.hover,"Expected hover to be a function."),invariant("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(Z.TARGET,e,t);return this.store.dispatch(function registry_addTarget(e){return{type:L,payload:{targetId:e}}}(n)),n}},{key:"containsHandler",value:function containsHandler(e){return mapContainsValue(this.dragSources,e)||mapContainsValue(this.dropTargets,e)}},{key:"getSource",value:function getSource(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];invariant(this.isSourceId(e),"Expected a valid source ID.");var n=t&&e===this.pinnedSourceId,r=n?this.pinnedSource:this.dragSources.get(e);return r}},{key:"getTarget",value:function getTarget(e){return invariant(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function getSourceType(e){return invariant(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function getTargetType(e){return invariant(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function isSourceId(e){return parseRoleFromHandlerId(e)===Z.SOURCE}},{key:"isTargetId",value:function isTargetId(e){return parseRoleFromHandlerId(e)===Z.TARGET}},{key:"removeSource",value:function removeSource(e){var t=this;invariant(this.getSource(e),"Expected an existing source."),this.store.dispatch(function registry_removeSource(e){return{type:R,payload:{sourceId:e}}}(e)),function asap(e){X.enqueueTask(Q.create(e))}((function(){t.dragSources.delete(e),t.types.delete(e)}))}},{key:"removeTarget",value:function removeTarget(e){invariant(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function registry_removeTarget(e){return{type:F,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function pinSource(e){var t=this.getSource(e);invariant(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function unpinSource(){invariant(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function addHandler(e,t,n){var r=getNextHandlerId(e);return this.types.set(r,t),e===Z.SOURCE?this.dragSources.set(r,n):e===Z.TARGET&&this.dropTargets.set(r,n),r}}]),HandlerRegistryImpl}();function createDragDropManager(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=makeStoreInstance(r),o=new V(a,new J(a)),l=new j(a,o),s=e(l,t,n);return l.receiveBackend(s),l}function makeStoreInstance(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return(0,M.MT)(reducers_reduce,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var ee=(0,a.createContext)({dragDropManager:void 0});function DndProvider_slicedToArray(e,t){return function DndProvider_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function DndProvider_iterableToArrayLimit(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function DndProvider_unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return DndProvider_arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DndProvider_arrayLikeToArray(e,t)}(e,t)||function DndProvider_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DndProvider_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var te=0,ne=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),re=(0,a.memo)((function DndProvider(e){var t=e.children,n=function getDndContextValue(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function createSingletonDndContext(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:getGlobalContext(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=t;a[ne]||(a[ne]={dragDropManager:createDragDropManager(e,t,n,r)});return a[ne]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(_objectWithoutProperties(e,["children"])),r=DndProvider_slicedToArray(n,2),o=r[0],l=r[1];return(0,a.useEffect)((function(){if(l){var e=getGlobalContext();return++te,function(){0==--te&&(e[ne]=null)}}}),[]),(0,S.jsx)(ee.Provider,Object.assign({value:o},{children:t}),void 0)}));function getGlobalContext(){return void 0!==n.g?n.g:window}function memoize(e){var t=null;return function memoized(){return null==t&&(t=e()),t}}function EnterLeaveCounter_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EnterLeaveCounter_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(){function EnterLeaveCounter(e){!function EnterLeaveCounter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EnterLeaveCounter),EnterLeaveCounter_defineProperty(this,"entered",[]),EnterLeaveCounter_defineProperty(this,"isNodeInDocument",void 0),this.isNodeInDocument=e}return function EnterLeaveCounter_createClass(e,t,n){return t&&EnterLeaveCounter_defineProperties(e.prototype,t),n&&EnterLeaveCounter_defineProperties(e,n),e}(EnterLeaveCounter,[{key:"enter",value:function enter(e){var t=this,n=this.entered.length;return this.entered=function union(e,t){var n=new Set,r=function insertItem(e){return n.add(e)};e.forEach(r),t.forEach(r);var a=[];return n.forEach((function(e){return a.push(e)})),a}(this.entered.filter((function isNodeEntered(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function leave(e){var t=this.entered.length;return this.entered=function js_utils_without(e,t){return e.filter((function(e){return e!==t}))}(this.entered.filter(this.isNodeInDocument),e),t>0&&0===this.entered.length}},{key:"reset",value:function reset(){this.entered=[]}}]),EnterLeaveCounter}(),ie=memoize((function(){return/firefox/i.test(navigator.userAgent)})),oe=memoize((function(){return Boolean(window.safari)}));function MonotonicInterpolant_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MonotonicInterpolant_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=function(){function MonotonicInterpolant(e,t){!function MonotonicInterpolant_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MonotonicInterpolant),MonotonicInterpolant_defineProperty(this,"xs",void 0),MonotonicInterpolant_defineProperty(this,"ys",void 0),MonotonicInterpolant_defineProperty(this,"c1s",void 0),MonotonicInterpolant_defineProperty(this,"c2s",void 0),MonotonicInterpolant_defineProperty(this,"c3s",void 0);for(var n=e.length,r=[],a=0;a<n;a++)r.push(a);r.sort((function(t,n){return e[t]<e[n]?-1:1}));for(var o,l,s=[],c=[],u=[],d=0;d<n-1;d++)o=e[d+1]-e[d],l=t[d+1]-t[d],c.push(o),s.push(l),u.push(l/o);for(var h=[u[0]],p=0;p<c.length-1;p++){var g=u[p],b=u[p+1];if(g*b<=0)h.push(0);else{o=c[p];var m=c[p+1],v=o+m;h.push(3*v/((v+m)/g+(v+o)/b))}}h.push(u[u.length-1]);for(var y,_=[],O=[],E=0;E<h.length-1;E++){y=u[E];var x=h[E],S=1/c[E],w=x+h[E+1]-y-y;_.push((y-x-w)*S),O.push(w*S*S)}this.xs=e,this.ys=t,this.c1s=h,this.c2s=_,this.c3s=O}return function MonotonicInterpolant_createClass(e,t,n){return t&&MonotonicInterpolant_defineProperties(e.prototype,t),n&&MonotonicInterpolant_defineProperties(e,n),e}(MonotonicInterpolant,[{key:"interpolate",value:function interpolate(e){var t=this.xs,n=this.ys,r=this.c1s,a=this.c2s,o=this.c3s,l=t.length-1;if(e===t[l])return n[l];for(var s,c=0,u=o.length-1;c<=u;){var d=t[s=Math.floor(.5*(c+u))];if(d<e)c=s+1;else{if(!(d>e))return n[s];u=s-1}}var h=e-t[l=Math.max(0,u)],p=h*h;return n[l]+r[l]*h+a[l]*p+o[l]*h*p}}]),MonotonicInterpolant}();function getNodeClientOffset(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function getEventClientOffset(e){return{x:e.clientX,y:e.clientY}}function getDragPreviewOffset(e,t,n,r,a){var o=function isImageNode(e){var t;return"IMG"===e.nodeName&&(ie()||!(null!==(t=document.documentElement)&&void 0!==t&&t.contains(e)))}(t),l=getNodeClientOffset(o?e:t),s={x:n.x-l.x,y:n.y-l.y},c=e.offsetWidth,u=e.offsetHeight,d=r.anchorX,h=r.anchorY,p=function getDragPreviewSize(e,t,n,r){var a=e?t.width:n,o=e?t.height:r;return oe()&&e&&(o/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:o}}(o,t,c,u),g=p.dragPreviewWidth,b=p.dragPreviewHeight,m=a.offsetX,v=a.offsetY,y=0===v||v;return{x:0===m||m?m:function calculateXOffset(){return new le([0,.5,1],[s.x,s.x/c*g,s.x+g-c]).interpolate(d)}(),y:y?v:function calculateYOffset(){var e=new le([0,.5,1],[s.y,s.y/u*b,s.y+b-u]).interpolate(h);return oe()&&o&&(e+=(window.devicePixelRatio-1)*b),e}()}}var se,ce="__NATIVE_FILE__",ue="__NATIVE_URL__",de="__NATIVE_TEXT__",he="__NATIVE_HTML__";function getDataFromDataTransfer(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=r?r:n}function nativeTypesConfig_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=(nativeTypesConfig_defineProperty(se={},ce,{exposeProperties:{files:function files(e){return Array.prototype.slice.call(e.files)},items:function items(e){return e.items}},matchesTypes:["Files"]}),nativeTypesConfig_defineProperty(se,he,{exposeProperties:{html:function html(e,t){return getDataFromDataTransfer(e,t,"")}},matchesTypes:["Html","text/html"]}),nativeTypesConfig_defineProperty(se,ue,{exposeProperties:{urls:function urls(e,t){return getDataFromDataTransfer(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]}),nativeTypesConfig_defineProperty(se,de,{exposeProperties:{text:function text(e,t){return getDataFromDataTransfer(e,t,"")}},matchesTypes:["Text","text/plain"]}),se);function NativeDragSource_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NativeDragSource_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=function(){function NativeDragSource(e){!function NativeDragSource_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,NativeDragSource),NativeDragSource_defineProperty(this,"item",void 0),NativeDragSource_defineProperty(this,"config",void 0),this.config=e,this.item={},this.initializeExposedProperties()}return function NativeDragSource_createClass(e,t,n){return t&&NativeDragSource_defineProperties(e.prototype,t),n&&NativeDragSource_defineProperties(e,n),e}(NativeDragSource,[{key:"initializeExposedProperties",value:function initializeExposedProperties(){var e=this;Object.keys(this.config.exposeProperties).forEach((function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function get(){return console.warn("Browser doesn't allow reading \"".concat(t,'" until the drop event.')),null}})}))}},{key:"loadDataTransfer",value:function loadDataTransfer(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach((function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}})),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function canDrag(){return!0}},{key:"beginDrag",value:function beginDrag(){return this.item}},{key:"isDragging",value:function isDragging(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function endDrag(){}}]),NativeDragSource}();function matchNativeItemType(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(pe).filter((function(e){return pe[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}function OptionsReader_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OptionsReader_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=function(){function OptionsReader(e,t){!function OptionsReader_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OptionsReader),OptionsReader_defineProperty(this,"ownerDocument",null),OptionsReader_defineProperty(this,"globalContext",void 0),OptionsReader_defineProperty(this,"optionsArgs",void 0),this.globalContext=e,this.optionsArgs=t}return function OptionsReader_createClass(e,t,n){return t&&OptionsReader_defineProperties(e.prototype,t),n&&OptionsReader_defineProperties(e,n),e}(OptionsReader,[{key:"window",get:function get(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}},{key:"document",get:function get(){var e;return null!==(e=this.globalContext)&&void 0!==e&&e.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function get(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}}]),OptionsReader}();function HTML5BackendImpl_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HTML5BackendImpl_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HTML5BackendImpl_ownKeys(Object(n),!0).forEach((function(t){HTML5BackendImpl_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HTML5BackendImpl_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HTML5BackendImpl_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HTML5BackendImpl_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=function(){function HTML5BackendImpl(e,t,n){var r=this;!function HTML5BackendImpl_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HTML5BackendImpl),HTML5BackendImpl_defineProperty(this,"options",void 0),HTML5BackendImpl_defineProperty(this,"actions",void 0),HTML5BackendImpl_defineProperty(this,"monitor",void 0),HTML5BackendImpl_defineProperty(this,"registry",void 0),HTML5BackendImpl_defineProperty(this,"enterLeaveCounter",void 0),HTML5BackendImpl_defineProperty(this,"sourcePreviewNodes",new Map),HTML5BackendImpl_defineProperty(this,"sourcePreviewNodeOptions",new Map),HTML5BackendImpl_defineProperty(this,"sourceNodes",new Map),HTML5BackendImpl_defineProperty(this,"sourceNodeOptions",new Map),HTML5BackendImpl_defineProperty(this,"dragStartSourceIds",null),HTML5BackendImpl_defineProperty(this,"dropTargetIds",[]),HTML5BackendImpl_defineProperty(this,"dragEnterTargetIds",[]),HTML5BackendImpl_defineProperty(this,"currentNativeSource",null),HTML5BackendImpl_defineProperty(this,"currentNativeHandle",null),HTML5BackendImpl_defineProperty(this,"currentDragSourceNode",null),HTML5BackendImpl_defineProperty(this,"altKeyPressed",!1),HTML5BackendImpl_defineProperty(this,"mouseMoveTimeoutTimer",null),HTML5BackendImpl_defineProperty(this,"asyncEndDragFrameId",null),HTML5BackendImpl_defineProperty(this,"dragOverTargetIds",null),HTML5BackendImpl_defineProperty(this,"getSourceClientOffset",(function(e){var t=r.sourceNodes.get(e);return t&&getNodeClientOffset(t)||null})),HTML5BackendImpl_defineProperty(this,"endDragNativeItem",(function(){r.isDraggingNativeItem()&&(r.actions.endDrag(),r.currentNativeHandle&&r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)})),HTML5BackendImpl_defineProperty(this,"isNodeInDocument",(function(e){return Boolean(e&&r.document&&r.document.body&&r.document.body.contains(e))})),HTML5BackendImpl_defineProperty(this,"endDragIfSourceWasRemovedFromDOM",(function(){var e=r.currentDragSourceNode;null==e||r.isNodeInDocument(e)||r.clearCurrentDragSourceNode()&&r.monitor.isDragging()&&r.actions.endDrag()})),HTML5BackendImpl_defineProperty(this,"handleTopDragStartCapture",(function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]})),HTML5BackendImpl_defineProperty(this,"handleTopDragStart",(function(e){if(!e.defaultPrevented){var t=r.dragStartSourceIds;r.dragStartSourceIds=null;var n=getEventClientOffset(e);r.monitor.isDragging()&&r.actions.endDrag(),r.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:n});var a=e.dataTransfer,o=matchNativeItemType(a);if(r.monitor.isDragging()){if(a&&"function"==typeof a.setDragImage){var l=r.monitor.getSourceId(),s=r.sourceNodes.get(l),c=r.sourcePreviewNodes.get(l)||s;if(c){var u=r.getCurrentSourcePreviewNodeOptions(),d=getDragPreviewOffset(s,c,n,{anchorX:u.anchorX,anchorY:u.anchorY},{offsetX:u.offsetX,offsetY:u.offsetY});a.setDragImage(c,d.x,d.y)}}try{null==a||a.setData("application/json",{})}catch(e){}r.setCurrentDragSourceNode(e.target),r.getCurrentSourcePreviewNodeOptions().captureDraggingState?r.actions.publishDragSource():setTimeout((function(){return r.actions.publishDragSource()}),0)}else if(o)r.beginDragNativeItem(o);else{if(a&&!a.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}})),HTML5BackendImpl_defineProperty(this,"handleTopDragEndCapture",(function(){r.clearCurrentDragSourceNode()&&r.monitor.isDragging()&&r.actions.endDrag()})),HTML5BackendImpl_defineProperty(this,"handleTopDragEnterCapture",(function(e){if(r.dragEnterTargetIds=[],r.enterLeaveCounter.enter(e.target)&&!r.monitor.isDragging()){var t=e.dataTransfer,n=matchNativeItemType(t);n&&r.beginDragNativeItem(n,t)}})),HTML5BackendImpl_defineProperty(this,"handleTopDragEnter",(function(e){var t=r.dragEnterTargetIds;(r.dragEnterTargetIds=[],r.monitor.isDragging())&&(r.altKeyPressed=e.altKey,t.length>0&&r.actions.hover(t,{clientOffset:getEventClientOffset(e)}),t.some((function(e){return r.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())))})),HTML5BackendImpl_defineProperty(this,"handleTopDragOverCapture",(function(){r.dragOverTargetIds=[]})),HTML5BackendImpl_defineProperty(this,"handleTopDragOver",(function(e){var t=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));r.altKeyPressed=e.altKey,r.actions.hover(t||[],{clientOffset:getEventClientOffset(e)}),(t||[]).some((function(e){return r.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))})),HTML5BackendImpl_defineProperty(this,"handleTopDragLeaveCapture",(function(e){r.isDraggingNativeItem()&&e.preventDefault(),r.enterLeaveCounter.leave(e.target)&&r.isDraggingNativeItem()&&setTimeout((function(){return r.endDragNativeItem()}),0)})),HTML5BackendImpl_defineProperty(this,"handleTopDropCapture",(function(e){var t;(r.dropTargetIds=[],r.isDraggingNativeItem())?(e.preventDefault(),null===(t=r.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):matchNativeItemType(e.dataTransfer)&&e.preventDefault();r.enterLeaveCounter.reset()})),HTML5BackendImpl_defineProperty(this,"handleTopDrop",(function(e){var t=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(t,{clientOffset:getEventClientOffset(e)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.monitor.isDragging()&&r.actions.endDrag()})),HTML5BackendImpl_defineProperty(this,"handleSelectStart",(function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))})),this.options=new fe(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new ae(this.isNodeInDocument)}return function HTML5BackendImpl_createClass(e,t,n){return t&&HTML5BackendImpl_defineProperties(e.prototype,t),n&&HTML5BackendImpl_defineProperties(e,n),e}(HTML5BackendImpl,[{key:"profile",value:function profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}},{key:"window",get:function get(){return this.options.window}},{key:"document",get:function get(){return this.options.document}},{key:"rootElement",get:function get(){return this.options.rootElement}},{key:"setup",value:function setup(){var e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}},{key:"teardown",value:function teardown(){var e,t=this.rootElement;void 0!==t&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(e=this.window)||void 0===e||e.cancelAnimationFrame(this.asyncEndDragFrameId)))}},{key:"connectDragPreview",value:function connectDragPreview(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function connectDragSource(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var a=function handleDragStart(t){return r.handleDragStart(t,e)},o=function handleSelectStart(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",a),t.addEventListener("selectstart",o),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",a),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function connectDropTarget(e,t){var n=this,r=function handleDragEnter(t){return n.handleDragEnter(t,e)},a=function handleDragOver(t){return n.handleDragOver(t,e)},o=function handleDrop(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",a),t.addEventListener("drop",o),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",a),t.removeEventListener("drop",o)}}},{key:"addEventListeners",value:function addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function getCurrentSourceNodeOptions(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return HTML5BackendImpl_objectSpread({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function getCurrentSourcePreviewNodeOptions(){var e=this.monitor.getSourceId();return HTML5BackendImpl_objectSpread({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function isDraggingNativeItem(){var e=this.monitor.getItemType();return Object.keys(r).some((function(t){return r[t]===e}))}},{key:"beginDragNativeItem",value:function beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function createNativeDragSource(e,t){var n=new ge(pe[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function setCurrentDragSourceNode(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((function(){var e;return null===(e=t.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function handleDrop(e,t){this.dropTargetIds.unshift(t)}}]),HTML5BackendImpl}(),me=function createBackend(e,t,n){return new be(e,t,n)},ve=n(24350),ye=n.n(ve),_e=n(94770),Oe=n(78527),Ee=n(28121),xe=(0,a.createContext)(null),useComponentsContext=()=>(0,_e.useContext)(xe).components,useFeatureToggleContext=()=>(0,_e.useContext)(xe).featureToggle;const Se=xe;var we=n(34410),Ce=n(47970),De=n(9087),Pe=n(62751),Te={};Te.styleTagTransform=y(),Te.setAttributes=g(),Te.insert=h().bind(null,"head"),Te.domAPI=u(),Te.insertStyleElement=m();s()(Pe.Z,Te);Pe.Z&&Pe.Z.locals&&Pe.Z.locals;var ke=n(91420),Ie=n(72488),je={};je.styleTagTransform=y(),je.setAttributes=g(),je.insert=h().bind(null,"head"),je.domAPI=u(),je.insertStyleElement=m();s()(Ie.Z,je);Ie.Z&&Ie.Z.locals&&Ie.Z.locals;var Me=n(50066),ze={getInputParserToNumber:e=>t=>{if(""===t||null==t)return null;var n=e(t);return isNaN(n)?t:n},isNumber:e=>"number"==typeof e&&isFinite(e)},Ae=n(41545),Ne=n.n(Ae),Le={overlayPathToLiteral(e){for(var t=e.getPaths(),n=[],r=0;r<t.length;r++){for(var a=t.getAt(r),o=[],l=0;l<a.length;l++){var s=a.getAt(l);o.push({lat:s.lat(),lng:s.lng()})}n.push(o)}return n},isGeoJSONAsObject(e){try{return!!Le.convertToWKT(e)}catch(e){return!1}},convertToWKT:e=>Ne().stringify(e),convertToGeoJSON:e=>Ne().parse(e),pointArrayToOverlay(e){if(isArrayOfArrays(e))return null;var[t,n]=e;return{lng:t,lat:n}},polylineArrayToOverlay:e=>isArrayOfArrays(e)?e.map((e=>{var[t,n]=e;return{lat:n,lng:t}})):[],polygonArrayToOverlay:e=>isArrayOfArrays(e[0])?e.map((e=>e.slice(0,-1).map((e=>{var[t,n]=e;return{lat:n,lng:t}})))):[],pointToWKT:e=>"POINT(".concat(withPrecision(e.lng)," ").concat(withPrecision(e.lat),")"),pathToWKT(e){var t=e.map((e=>{var{lng:t,lat:n}=e;return"".concat(withPrecision(t)," ").concat(withPrecision(n))})).join(",");return"LINESTRING(".concat(t,")")},polygonPathsToWKT(e){var t=e.map((e=>e.map((e=>{var{lat:t,lng:n}=e;return"".concat(withPrecision(n)," ").concat(withPrecision(t))}))));return t.forEach((e=>e.push(e[0]))),t=t.map((e=>"(".concat(e.join(","),")"))).join(","),"POLYGON(".concat(t,")")}};function isArrayOfArrays(e){return Array.isArray(e)&&e.every((e=>Array.isArray(e)))}function withPrecision(e){return Number(e).toFixed(8)}var Re=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/,Fe=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/,Be=n(27361),We=n.n(Be),isEmpty=e=>null==e||"string"==typeof e&&""===e.trim()||e&&0===e.length,He=function maxLength(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Must be no more than ".concat(e," characters");return n=>{if(!isEmpty(n)&&n.length>e)return t}};var jsonValidator=e=>{if(e)try{JSON.parse(e)}catch(e){return"Must be a valid JSON string!"}},geoValidator=e=>{if(e){if("object"!=typeof e)return"Must be a valid Geo value!";try{JSON.stringify(e)}catch(e){return"Must be a valid JSON string!"}return Le.isGeoJSONAsObject(e)?void 0:"Must be a valid Geo JSON string!"}},Ze={[Ee.oS.INT]:e=>{if(!isEmpty(e)&&("number"!=typeof e||isNaN(e)))return'Must be of "'.concat(Ee.oS.INT,'" type!')},[Ee.oS.DOUBLE]:e=>{if(!isEmpty(e)&&!Re.test(e))return'Must be of "'.concat(Ee.oS.DOUBLE,'" type!')},[Ee.oS.DECIMAL]:e=>{if(!isEmpty(e)&&!Fe.test(e))return'Must be of "'.concat(Ee.oS.DECIMAL,'" type!')},[Ee.oS.STRING]:He(Ee.qj[Ee.oS.STRING]),[Ee.oS.EXTENDED_STRING]:He(Ee.qj[Ee.oS.EXTENDED_STRING]),[Ee.oS.TEXT]:He(Ee.qj[Ee.oS.TEXT]),[Ee.oS.JSON]:jsonValidator,[Ee.oS.POLYGON]:geoValidator,[Ee.oS.POINT]:geoValidator,[Ee.oS.GEOMETRY]:geoValidator,[Ee.oS.LINESTRING]:geoValidator},customRegExpValidator=e=>function regex(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Incorrect value";return n=>{if(!isEmpty(n)&&!e.test(n))return t}}(e,"Value does not match the chosen validator"),buildRecordValidator=e=>{var t={};return e.forEach((e=>{if(!e.readOnly){var n=[],r=(e=>{if(!e)return null;try{return new RegExp(e)}catch(e){return null}})(e.customRegex);e.required&&n.push(function required(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This field should not be empty";return t=>{if(isEmpty(t))return e}}('"'.concat(e.name,'" is required!'))),e.validators&&n.push(...e.validators),Ze[e.type]&&n.push(Ze[e.type]),r&&n.push(customRegExpValidator(r)),n.length&&(t[e.name]=function compose(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.reduce(((e,t)=>e||t(...n)),void 0)}}(...n))}})),function groupValidators(e){return function validate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};if(Object.keys(e).forEach((r=>{var a=e[r];if(a){var o=a(We()(t,r),t);o&&(n[r]=o)}})),Object.keys(n).length>0)return n}}(t)},Ve=n(79723),Ke=(0,a.createContext)(null),context_useComponentsContext=()=>(0,_e.useContext)(Ke).components;const Ye=Ke;var Ge=n(82555),validateGeo=e=>{if(!e||"object"==typeof e)return e;var t=Ge.E.getParsedJSONIfValid(e);if(t&&Le.isGeoJSONAsObject(t))return t;var n=Le.convertToGeoJSON(e);return n||e},Ue=n(68334);function EditorGroup(e){var{name:t,dataType:n,children:r,error:o}=e,l=a.createElement(a.Fragment,null,a.createElement("div",{className:"bl-visualization--data-table-records-editor--column-name"},t),a.createElement("div",{className:"bl-visualization--data-table-records-editor--column-type"},n));return a.createElement(Ue.Z.Group,{id:t,label:l,error:o},r)}var $e=n(19120);var Xe=n(91367);var qe=n(8409),Qe={};Qe.styleTagTransform=y(),Qe.setAttributes=g(),Qe.insert=h().bind(null,"head"),Qe.domAPI=u(),Qe.insertStyleElement=m();s()(qe.Z,Qe);qe.Z&&qe.Z.locals&&qe.Z.locals;var Je=n(59209);function JsonEditor(e){var{components:t,onError:n,value:r,readOnly:o,maxLength:l,onChange:s,validators:c}=e,u=t.Textarea||Je.Z,d=function useError(e,t,n){var[r,o]=(0,_e.useState)((()=>validateJson(e,t)));return(0,a.useEffect)((()=>{var r=validateJson(e,t);o(r),n&&n(r)}),[e]),r}(r,c,n);return a.createElement(Ue.Z.Group,{error:d,className:"bl-visualization--json-editor"},a.createElement(u,{maxRows:7,minRows:7,readOnly:o,maxLength:l,value:r||"",onChange:s,autoFocus:!o}))}function validateJson(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t=[jsonValidator,...t];for(var n=Ge.E.inputValueToJSONValue(e),r=0;r<t.length;r++){var a=t[r](n);if(a)return a}return null}function JsonEditorModal(e){var{onChange:t,value:n,onHide:r,maxLength:o,className:l,readOnly:s,components:c}=e,[u,d]=(0,a.useState)(n),[h,p]=(0,a.useState)(null),{Button:g}=c,b=(0,_e.useCallback)((()=>{t(u),r()}),[r,t,u]),m=(0,Me.cn)(l,"bl-visualization--json-editor-modal");return a.createElement(Ve.Z,{open:!0,onClose:r,className:m},a.createElement(Ve.Z.Header,{title:"JSON Editor",onClose:r}),a.createElement(Ve.Z.Body,null,a.createElement(JsonEditor,{components:c,onError:p,readOnly:s,maxLength:o,onChange:d,value:u})),a.createElement(Ve.Z.Footer,null,a.createElement(g,{onClick:r},"CANCEL"),!s&&a.createElement(g,{disabled:!!h,onClick:b,primary:!0},"SAVE")))}var et=n(13218),tt=n.n(et);var tryToStringifyValue=e=>e.join(",")||null;function NumericEditor(e){var{name:t,value:n,dataType:r,onChange:o,error:l,column:s,readOnly:c}=e,{NumberInput:u}=context_useComponentsContext(),d=(0,_e.useCallback)((e=>o({name:t,value:e})),[o,t]);return a.createElement(EditorGroup,{name:t,dataType:r,error:l},a.createElement(u,{value:n,onChange:d,size:"small",readOnly:c,maxLength:s.dataSize}))}var nt=n(59780),rt={};rt.styleTagTransform=y(),rt.setAttributes=g(),rt.insert=h().bind(null,"head"),rt.domAPI=u(),rt.insertStyleElement=m();s()(nt.Z,rt);nt.Z&&nt.Z.locals&&nt.Z.locals;function MultiLineEditor(e){var{onChange:t,value:n,onHide:r,maxLength:o,className:l,readOnly:s,components:c}=e,[u,d]=(0,a.useState)(n),{Button:h,Textarea:p}=c,g=(0,_e.useCallback)((()=>{t(u),r()}),[r,t,u]),b=(0,_e.useCallback)(d,[]),m=(0,Me.cn)(l,"bl-visualization--multi-line-editor");return a.createElement(Ve.Z,{open:!0,onClose:r,className:m},a.createElement(Ve.Z.Header,{title:"Multi Line Editor",onClose:r}),a.createElement(Ve.Z.Body,null,a.createElement(p,{maxRows:7,minRows:7,readOnly:s,maxLength:o,value:u||"",onChange:b,autoFocus:!s})),a.createElement(Ve.Z.Footer,null,a.createElement(h,{onClick:r},"CANCEL"),!s&&a.createElement(h,{onClick:g,primary:!0},"SAVE")))}function StringEditor(e){var{name:t,value:n,dataType:r,onChange:o,error:l,column:s,readOnly:c,modalClassName:u}=e,d=context_useComponentsContext(),{FontIcon:h,Input:p}=d,[g,b]=(0,_e.useState)(!1),m=(0,_e.useCallback)((()=>b(!0)),[]),v=(0,_e.useCallback)((()=>b(!1)),[]),y=(0,_e.useCallback)((e=>o({name:t,value:e||null})),[o,t]);return a.createElement(EditorGroup,{name:t,dataType:r,error:l},a.createElement(p,{value:n,onChange:y,size:"small",readOnly:c,maxLength:s.dataSize,className:"bl-input--with-editor"}),a.createElement(h,{tooltip:"Open Multi Line Editor",icon:Ee.gW.MULTILINE_EDITOR,onClick:m,className:"bl-visualization-multi-line-editor-icon",action:!0}),g&&a.createElement(MultiLineEditor,{className:u,components:d,readOnly:c,maxLength:s.dataSize,value:n,onChange:y,onHide:v}))}var at=n(90562),it={};it.styleTagTransform=y(),it.setAttributes=g(),it.insert=h().bind(null,"head"),it.domAPI=u(),it.insertStyleElement=m();s()(at.Z,it);at.Z&&at.Z.locals&&at.Z.locals;var ot=n(91629),lt={};lt.styleTagTransform=y(),lt.setAttributes=g(),lt.insert=h().bind(null,"head"),lt.domAPI=u(),lt.insertStyleElement=m();s()(ot.Z,lt);ot.Z&&ot.Z.locals&&ot.Z.locals;var st=n(66986),ct=["value","label"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function tabs_menu_objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function tabs_menu_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function TabsMenu(e){var{onChange:t,children:n,value:r,className:o}=e,l=(0,_e.useCallback)(((e,n)=>t(n)),[t]),s=(0,Me.cn)("bl-visualization--tabs-menu-container",o);return a.createElement("div",{className:s},a.createElement(st.Z.Tabs,{value:r,onChange:l,classes:{indicator:"bl-visualization--tabs-menu-indicator",root:"bl-visualization--tabs-menu-root"}},n))}TabsMenu.Item=function TabsMenuItem(e){var{value:t,label:n}=e,r=tabs_menu_objectWithoutProperties(e,ct);return a.createElement(st.Z.Tab,_extends({},r,{value:t,label:n,classes:{root:"bl-visualization--tab-root"}}))};const ut=TabsMenu;var dt=[e=>{if(e){try{JSON.parse(e)}catch(e){return"Must be a valid JSON string!"}return Le.isGeoJSONAsObject(JSON.parse(e))?void 0:"Must be a valid Geo JSON string!"}}];function text_editor_TextEditor(e){var{onChange:t,value:n,components:r,onError:o}=e,l=(0,a.useCallback)((e=>{var n=Ge.E.getParsedJSONIfValid(e),r=Le.isGeoJSONAsObject(n)?n:e;t(r)}),[t]),s=(0,_e.useMemo)((()=>tt()(n)?JSON.stringify(n):n),[n]);return a.createElement(JsonEditor,{onError:o,value:s,onChange:l,validators:dt,components:r})}var ht=n(27462),pt={};pt.styleTagTransform=y(),pt.setAttributes=g(),pt.insert=h().bind(null,"head"),pt.domAPI=u(),pt.insertStyleElement=m();s()(ht.Z,pt);ht.Z&&ht.Z.locals&&ht.Z.locals;var gt=n(44627),ft={enrichChildWithProps:(e,t)=>a.Children.map(e,(e=>a.isValidElement(e)?a.cloneElement(e,t):e))};var bt=n(73935);var mt={overlayBounds:e=>e.getBounds?e.getBounds():e.getPath?function pointsBounds(e){var t=new google.maps.LatLngBounds;return e.forEach((e=>t.extend(e))),t}(e.getPath().getArray()):void 0,isPathClockwise(e){if(!(Array.isArray(e)||e instanceof google.maps.MVCArray))throw new Error("Path must be an Array or MVCArray");return e instanceof google.maps.MVCArray||(e=e.map((e=>{var{lat:t,lng:n}=e;return new google.maps.LatLng(t,n)}))),google.maps.geometry.spherical.computeSignedArea(e)>0}};function polyline_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function polyline_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vt=["click","mouseover","dragend","insert_at","remove_at","set_at"],yt=["insert_at","remove_at","set_at"],sanitizePath=e=>e.map((e=>{var{lng:t,lat:n}=e;return{lng:Number(t),lat:Number(n)}}));function polygon_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function polygon_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _t=["click","mouseover","dragend","insert_at","remove_at","set_at"],Ot=["insert_at","remove_at","set_at"],sanitizePaths=e=>e.map((e=>e.map((e=>{var{lng:t,lat:n}=e;return{lng:Number(t),lat:Number(n)}}))));var Et=["places","drawing"],xt=["bounds_changed","zoom_changed","click"],St={lat:37.774929,lng:-122.419416};function GoogleMap(e){var{zoom:t=8,defaultCenter:n=St,mapTypeControl:r=!0}=e,{center:o,onMapRef:l,className:s,children:c,apiKey:u}=e,[d,h]=(0,_e.useState)(null),p=ft.enrichChildWithProps(c,{map:d});return a.createElement(gt.Z.GoogleMapApiLoader,{googleApiKey:u,libraries:Et},a.createElement("div",{className:x()("bl-visualization--google-map",s),ref:a=>{if(a&&!d){var s=new google.maps.Map(a,{zoom:t,mapTypeControl:r,streetViewControl:!1,zoomControl:!0,draggableCursor:"pointer",center:o||n||St,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT},zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER}});xt.forEach((t=>{e[t]&&s.addListener(t,e[t])})),h(s),l&&l(s)}}},d&&p))}GoogleMap.Marker=function GoogleMarker(e){var{map:t,point:n,onClick:r}=e,{lat:o,lng:l,title:s}=n;return(0,a.useEffect)((()=>{var e,a=new google.maps.Marker({title:s,position:{lat:o,lng:l},map:t,icon:(e="#ea4335","https://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=|"+e.slice(1))});return a.data=n,a.addListener("click",(()=>{r&&r(n)})),()=>{a.setMap(null)}}),[t,o,l]),null},GoogleMap.InfoWindow=function InfoWindow(e){var{lat:t,lng:n,maxWidth:r,visible:a,onClose:o,map:l,children:s}=e,c=(0,_e.useHelpers)({infoWindow:null});(0,_e.useEffect)((()=>{createInfoWindow()}),[]),(0,_e.useEffect)((()=>{a?openWindow():closeWindow()}),[a,t,n]),(0,_e.useEffect)((()=>{updateContent()}),[s]);var createInfoWindow=()=>{var e=new google.maps.InfoWindow({pixelOffset:new google.maps.Size(0,-35),maxWidth:r});google.maps.event.addListener(e,"closeclick",onCloseInfo),c.infoWindow=e,updateContent(),a&&openWindow()},onCloseInfo=()=>{o&&o()},updateContent=()=>{var e=document.createElement("div");s?bt.render(s,e):e.innerHTML="",c.infoWindow.setContent(e)},openWindow=()=>{c.infoWindow.setPosition({lat:t,lng:n}),c.infoWindow.open(l)},closeWindow=()=>{c.infoWindow.close()};return null},GoogleMap.Polyline=function Polyline(e){var{path:t,map:n,options:r}=e,a=(0,_e.useHelpers)({polyline:null});(0,_e.useEffect)((()=>(renderPolyline(),fitMap(),()=>destroyPolyline())),[]),(0,_e.useEffect)((()=>{a.polyline?renderPolyline():a.polyline.setOptions(preparePolylineOptions())}),[t]);var renderPolyline=()=>{if(n){destroyPolyline();var t=new google.maps.Polyline(preparePolylineOptions());t.setMap(n),vt.forEach((n=>{e[n]&&t.addListener(n,(()=>e[n](a.polyline)))}));var r=t.getPath();yt.forEach((t=>{e[t]&&google.maps.event.addListener(r,t,(()=>e[t](a.polyline)))})),a.polyline=t}},preparePolylineOptions=()=>function polyline_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?polyline_ownKeys(Object(n),!0).forEach((function(t){polyline_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):polyline_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({path:sanitizePath(e.path),strokeColor:"#CC3399",strokeOpacity:1,strokeWeight:3,editable:!0},r),fitMap=()=>{var e=mt.overlayBounds(a.polyline);n.fitBounds(e)},destroyPolyline=()=>{a.polyline&&a.polyline.setMap(null)};return null},GoogleMap.Polygon=function Polygon(e){var{paths:t,map:n,options:r}=e,a=(0,_e.useHelpers)({polygon:null});(0,_e.useEffect)((()=>(renderPolygon(),fitMap(),()=>destroyPolygon())),[]),(0,_e.useEffect)((()=>{a.polygon?renderPolygon():a.polygon.setOptions(preparePolygonOptions())}),[t]);var renderPolygon=()=>{if(n){destroyPolygon();var t=new google.maps.Polygon(preparePolygonOptions());t.setMap(n),_t.forEach((n=>{e[n]&&t.addListener(n,(()=>e[n](a.polygon)))}));for(var r=t.getPaths(),o=function _loop(t){var n=r.getAt(t);Ot.forEach((t=>{e[t]&&google.maps.event.addListener(n,t,(()=>e[t](a.polygon)))}))},l=0;l<r.length;l++)o(l);a.polygon=t}},preparePolygonOptions=()=>function polygon_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?polygon_ownKeys(Object(n),!0).forEach((function(t){polygon_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):polygon_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({paths:sanitizePaths(t),strokeColor:"#CC3399",fillColor:"#3333CC",strokeOpacity:.8,strokeWeight:3,fillOpacity:.35},r),fitMap=()=>{var e=mt.overlayBounds(a.polygon);n.fitBounds(e)},destroyPolygon=()=>{a.polygon&&a.polygon.setMap(null)};return null};var wt=(0,a.createContext)(null),geo_editor_context_useComponentsContext=()=>(0,_e.useContext)(wt).components;const Ct=wt;function coordinates_item_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function coordinates_item_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?coordinates_item_ownKeys(Object(n),!0).forEach((function(t){coordinates_item_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):coordinates_item_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function coordinates_item_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GroupByItem(e){var{value:t,onChange:n}=e,{NumberInput:r}=geo_editor_context_useComponentsContext(),o=(0,_e.useCallback)(((e,r)=>{n(coordinates_item_objectSpread(coordinates_item_objectSpread({},t),{},{[e]:r}))}),[t,n]),l=(0,_e.useCallback)((e=>o("lat",e)),[o]),s=(0,_e.useCallback)((e=>o("lng",e)),[o]);return a.createElement("div",{className:"bl-visualization--geo-editor--coordinates-item"},a.createElement(r,{value:t.lat,onChange:l,size:"small"}),a.createElement(r,{value:t.lng,onChange:s,size:"small"}))}function MapTools(e){var{onClear:t}=e;return a.createElement("div",{className:"bl-visualization--google-map-editor--map-tool-container"},a.createElement("button",{onClick:t,type:"button"},"CLEAR ALL"))}var Dt=n(76249),Pt={lat:"",lng:""},isValueEmpty=e=>{var{lat:t,lng:n}=e;return t===Pt.lat||n===Pt.lng};function Coordinates(e){var{value:t,onChange:n,maxItems:r}=e,{FontIcon:o}=geo_editor_context_useComponentsContext(),l=!(e=>{if(!e)return!1;if(Array.isArray(e)){if(!e.length)return!1;var t=e[e.length-1];return!isValueEmpty(t)}return!isValueEmpty(e)})(t);return a.createElement("div",{className:"bl-visualization--geo-editor--coordinates"},a.createElement("div",{className:"bl-visualization--geo-editor--coordinates-title-container"},a.createElement("div",null,"Latitude:"),a.createElement("div",null,"Longitude:")),a.createElement(Dt.Z,{onChange:n,values:t,initialValue:Pt,max:r,FontIconComponent:o,readOnly:l,modern:!0},a.createElement(GroupByItem,null)))}function PointInfoContent(e){var{point:t}=e;return a.createElement("div",null,a.createElement(PointField,{field:"Latitude",value:t.lat.toFixed(5)}),a.createElement(PointField,{field:"Longitude",value:t.lng.toFixed(5)}))}function PointField(e){var{field:t,value:n}=e;return a.createElement("span",{className:"bl-visualization--google-map-editor--point-info-field"},a.createElement("span",{className:"bl-visualization--google-map-editor--point-info-field-label"},t+": "),a.createElement("span",{className:"bl-visualization--google-map-editor--point-info-field-value"},n))}var linestring_sanitizePath=e=>e.filter((e=>{var{lat:t,lng:n}=e;return ze.isNumber(t)&&ze.isNumber(n)})),Tt={editable:!0};function PolygonEditor(e){var{onPathsChange:t,paths:n,tabIndex:r,onTabChange:o}=e,l=(0,_e.useCallback)((e=>{var a=[...n];a[r]=e,t(a)}),[t,r,n]),s=!(n[0]&&n[0].length>2);return a.createElement("div",null,a.createElement(ut,{onChange:o,value:r},a.createElement(ut.Item,{value:0,label:"EXTERIOR BOUNDARY"}),a.createElement(ut.Item,{value:1,label:"INTERIOR BOUNDARIES",disabled:s})),a.createElement(Coordinates,{value:n[r],onChange:l}))}var isPointValid=e=>{var{lat:t,lng:n}=e;return ze.isNumber(t)&&ze.isNumber(n)},normalizePaths=e=>e.map((e=>e.filter((e=>isPointValid(e))))),polygon_sanitizePaths=e=>e&&e.length&&(1!==e.length||isPointValid(e[0]))?e:[],validatePath=e=>!e||!e.length||e.length>2,kt={editable:!0,strokeColor:"#CC3399",fillColor:"#3333CC",strokeWeight:2},It=0,jt=1;var Mt={POINT:"POINT",LINESTRING:"LINESTRING",POLYGON:"POLYGON"},zt={[Mt.POINT]:function PointEditor(e){var{value:t,onChange:n,googleApiKey:r}=e,[o,l]=function usePaths(e,t){var[n,r]=(0,_e.useState)((()=>function getInitialPoint(e){return null!=e&&e.coordinates?Le.pointArrayToOverlay(null==e?void 0:e.coordinates):null}(t))),a=(0,_e.useCallback)((t=>{r(t);var n=t&&Le.convertToGeoJSON(Le.pointToWKT(t));e(n)}),[e]);return[n,a]}(n,t),s=(0,_e.useCallback)((e=>{l({lat:e.latLng.lat(),lng:e.latLng.lng()})}),[]),c=(0,_e.useCallback)((()=>l(null)),[]);return a.createElement("div",null,a.createElement("div",{className:"bl-visualization--geo-editor--coordinates-title-container"},a.createElement("div",null,"Latitude:"),a.createElement("div",null,"Longitude:")),o&&a.createElement(GroupByItem,{value:o,onChange:l}),a.createElement("div",{className:"bl-visualization--google-map-editor"},a.createElement(GoogleMap,{click:s,zoom:3,defaultCenter:o,apiKey:r},o&&a.createElement(GoogleMap.Marker,{point:o})),a.createElement(MapTools,{onClear:c})))},[Mt.LINESTRING]:function LinestringEditor(e){var{value:t,onChange:n,googleApiKey:r,onError:o}=e,[l,s]=function usePath(e,t){var[n,r]=(0,_e.useState)((()=>function getInitialPath(e){return null!=e&&e.coordinates?Le.polylineArrayToOverlay(null==e?void 0:e.coordinates):[]}(t))),a=(0,_e.useCallback)((t=>{r(t);var n=Le.convertToGeoJSON(Le.pathToWKT(linestring_sanitizePath(t)));e(n)}),[e]);return[n,a]}(n,t),[c,u]=(0,_e.useState)(null),d=(0,_e.useHelpers)({mapPath:null}),h=(0,_e.useMemo)((()=>linestring_sanitizePath(l)),[l]);d.mapPath=h,(0,a.useEffect)((()=>validate(h)),[h]);var p=(0,_e.useCallback)((e=>{var t=[...d.mapPath,{lat:e.latLng.lat(),lng:e.latLng.lng()}];s(t)}),[]),validate=e=>{var t=1===e.length?"Please add two or more points":null;o(t)},g=(0,_e.useCallback)((e=>{s(e),u(null)}),[]),b=function usePathChanger(e){return(0,_e.useCallback)((t=>{for(var n=t.getPath(),r=n.getLength(),a=[],o=0;o<r;o++){var{lat:l,lng:s}=n.getAt(o);a.push({lng:s(),lat:l()})}e(a)}),[e])}(g),m=(0,_e.useCallback)((()=>u(null)),[]),v=(0,_e.useCallback)((()=>g([])),[]),y=function useMarkers(e,t){var n=(0,_e.useCallback)((e=>t(e)),[]);return(0,_e.useMemo)((()=>e.length?e.map((e=>a.createElement(GoogleMap.Marker,{key:JSON.stringify(e),point:e,onClick:n}))):[]),[e])}(h,u);return a.createElement("div",null,a.createElement(Coordinates,{value:l,onChange:g}),a.createElement("div",{className:"bl-visualization--google-map-editor"},a.createElement(GoogleMap,{click:p,zoom:3,apiKey:r},">",y,h&&a.createElement(GoogleMap.Polyline,{path:h,options:Tt,insert_at:b,remove_at:b,dragend:b,set_at:b}),a.createElement(GoogleMap.InfoWindow,{lat:c&&c.lat,lng:c&&c.lng,maxWidth:350,visible:!!c,onClose:m},c&&a.createElement(PointInfoContent,{point:c}))),a.createElement(MapTools,{onClear:v})))},[Mt.POLYGON]:function polygon_PolygonEditor(e){var{value:t,onChange:n,googleApiKey:r,onError:o}=e,[l,s]=function polygon_usePaths(e,t){var[n,r]=(0,_e.useState)((()=>function getInitialPaths(e){return null!=e&&e.coordinates?Le.polygonArrayToOverlay(null==e?void 0:e.coordinates):[]}(t))),a=(0,_e.useCallback)((t=>{r(t);var n=Le.convertToGeoJSON(Le.polygonPathsToWKT(normalizePaths(t)));e(n)}),[e]);return[n,a]}(n,t),[c,u]=(0,_e.useState)(null),[d,h]=(0,_e.useState)(It),p=(0,_e.useMemo)((()=>normalizePaths(l)),[l]),g=(0,_e.useHelpers)({drawingManager:null,map:null});(0,a.useEffect)((()=>{createDrawManager(g.map)}),[p,d]),(0,a.useEffect)((()=>validate(p)),[p]);var b=(0,_e.useCallback)((e=>{g.map=e,createDrawManager(e)}),[]),validate=e=>{var[t=[],n]=e,r="";validatePath(t)||(r="Outer polygon created incorrectly. Make sure to connect your first and last points."),validatePath(n)||(r="Inner polygon created incorrectly. Make sure to connect your first and last points."),o(r)},m=(0,_e.useCallback)((e=>{var t=(e=e.map(polygon_sanitizePaths))[It],n=e[jt],r=t&&t.length>0,a=n&&n.length>0;r&&a&&mt.isPathClockwise(t)===mt.isPathClockwise(n)&&(e[jt]=n.reverse()),s(r?e:[]),u(null),h(r?d:It)}),[d]),createDrawManager=e=>{if(g.drawingManager&&g.drawingManager.setMap(null),!(p.length&&p[d]&&p[d].length)){var t,n=new google.maps.drawing.DrawingManager({drawingMode:google.maps.drawing.OverlayType.POLYGON,drawingControl:!1,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:["polygon"]},polygonOptions:kt});n.setMap(e),n.addListener("overlaycomplete",(t=d,e=>{var n=Le.overlayPathToLiteral(e.overlay);if(t===It)m(n);else{var r=n[0],a=p[It];mt.isPathClockwise(a)===mt.isPathClockwise(r)&&(r=r.reverse()),m([a,r])}g.drawingManager.setMap(null),e.overlay.setMap(null)})),g.drawingManager=n}},v=(0,_e.useCallback)((e=>{m(Le.overlayPathToLiteral(e))}),[m]),y=(0,_e.useCallback)((()=>m([])),[]),_=(0,_e.useCallback)((()=>u(null)),[]),O=function polygon_useMarkers(e,t){var n=(0,_e.useCallback)((e=>t(e)),[]);return(0,_e.useMemo)((()=>{var t=[];return e.forEach((e=>e.forEach((e=>t.push(e))))),t.map((e=>a.createElement(GoogleMap.Marker,{key:JSON.stringify(e),point:e,onClick:n})))}),[e])}(p,u);return a.createElement("div",null,a.createElement(PolygonEditor,{onPathsChange:m,paths:l,onTabChange:h,tabIndex:d}),a.createElement("div",{className:"bl-visualization--google-map-editor"},a.createElement(GoogleMap,{zoom:3,apiKey:r,onMapRef:b},O,p.length>0&&a.createElement(GoogleMap.Polygon,{paths:p,options:kt,insert_at:v,remove_at:v,dragend:v,set_at:v}),a.createElement(GoogleMap.InfoWindow,{lat:c&&c.lat,lng:c&&c.lng,maxWidth:350,visible:!!c,onClose:_},c&&a.createElement(PointInfoContent,{point:c}))),a.createElement(MapTools,{onClear:y})))}},At={[Ee.oS.POINT]:Mt.POINT,[Ee.oS.LINESTRING]:Mt.LINESTRING,[Ee.oS.POLYGON]:Mt.POLYGON},Nt="MAP",Lt="TEXT",Rt=[Mt.POINT,Mt.LINESTRING,Mt.POLYGON];function GeoEditorModal(e){var{onChange:t,onHide:n,className:r,readOnly:o,dataType:l,components:s,googleApiKey:c}=e,[u,d]=(0,_e.useState)((()=>(e=>tt()(e)?e:null)(e.value))),[h,p]=(0,_e.useState)((()=>((e,t)=>{if(t===Ee.oS.GEOMETRY){var n=e&&e.type.toUpperCase();return Mt[n]||Mt.POINT}return At[t]})(e.value,l))),[g,b]=(0,_e.useState)(Nt),[m,v]=(0,_e.useObjectState)({}),y=(0,_e.useMemo)((()=>(0,Oe.vD)(s)),[s]),_=(0,_e.persistContextValue)({components:y}),{Select:O,Button:E}=y,x=l===Ee.oS.GEOMETRY,S=(0,_e.useCallback)((()=>{var e=(e=>e?tt()(e)&&Le.isGeoJSONAsObject(e)?e:null:e)(u);t(e),n()}),[u]),w=(0,_e.useCallback)((t=>{var n=e.value,r=null;n&&n.type&&Mt[n.type.toUpperCase()]===t&&(r=n),d(r),p(t)}),[e.value]),C=(0,_e.useCallback)((e=>v({[Lt]:e})),[]),D=(0,_e.useCallback)((e=>v({[Nt]:e})),[]),P=(0,Me.cn)("bl-visualization--geo-editor",r),T=zt[h];return a.createElement(Ve.Z,{open:!0,onClose:n,className:P},a.createElement(Ct.Provider,{value:_},a.createElement(Ve.Z.Header,{title:"Edit  ".concat(l),onClose:n}),a.createElement(Ve.Z.Body,null,a.createElement(ut,{onChange:b,value:g},a.createElement(ut.Item,{value:Nt,label:"MAP VIEW"}),a.createElement(ut.Item,{value:Lt,label:"TEXT VIEW"})),g===Nt&&a.createElement(T,{value:u,onChange:d,onError:D,googleApiKey:c}),g===Lt&&a.createElement(text_editor_TextEditor,{value:u,onChange:d,components:y,onError:C})),a.createElement(Ve.Z.Footer,null,x&&a.createElement(O,{options:Rt,value:h,onChange:w,className:"bl-visualization--geo-editor--type-selector",size:"small"}),a.createElement(E,{onClick:n},"CANCEL"),!o&&a.createElement(E,{onClick:S,primary:!0,disabled:m[g],tooltip:m[g]},"SAVE"))))}var{WKT:Ft,GEO_JSON:Bt}=Ee.eL;function RenderTypeSwitcher(e){var{renderType:t,onChange:n,disabled:r}=e,o=(0,Me.cn)("bl-visualization--data-table-records-editor--data-type-render-switcher",{"bl-visualization--disabled":r});return a.createElement("div",{className:o,title:"Render Format"},a.createElement("span",{onClick:r?null:()=>n(Ft),className:(0,Me.cn)({"bl-visualization--checked":t===Ft})},"WKT"),a.createElement("span",{style:{margin:"0 2px"}},"|"),a.createElement("span",{onClick:r?null:()=>n(Bt),className:(0,Me.cn)({"bl-visualization--checked":t===Bt})},"GeoJSON"))}function GeoEditor(e){var{name:t,value:n,dataType:r,onChange:o,error:l,readOnly:s,modalClassName:c,metaInfo:u}=e,{components:d,googleApiKey:h}=(0,_e.useContext)(Ye),{FontIcon:p,Input:g}=d,b=u.srsId===Ee.ls.WGS84,[m,v]=(0,_e.useState)(Ee.eL.WKT),[y,_]=(0,_e.useState)(!1),O=function useFieldValue(e,t){return(0,_e.useMemo)((()=>e&&"object"==typeof e?t===Ee.eL.GEO_JSON?JSON.stringify(e):Le.convertToWKT(e):e),[e,t])}(n,m),E=(0,_e.useCallback)((()=>_(!0)),[]),x=(0,_e.useCallback)((()=>_(!1)),[]),S=(0,_e.useCallback)((e=>o({name:t,value:e||null})),[o,t,t]);return a.createElement(EditorGroup,{error:l,name:t,dataType:r},a.createElement(RenderTypeSwitcher,{renderType:m,onChange:v,disabled:l}),a.createElement(g,{value:O,onChange:S,size:"small",readOnly:s,className:"bl-input--with-editor"}),b&&a.createElement(p,{tooltip:"Open Multi Line Editor",icon:Ee.gW.GEO_EDITOR,onClick:E,className:"bl-visualization-multi-line-editor-icon",action:!0}),y&&a.createElement(GeoEditorModal,{className:c,onChange:S,value:n,onHide:x,readOnly:s,dataType:r,components:d,googleApiKey:h}))}var Wt={STRING:StringEditor,STRING_ID:StringEditor,MULTIPLE_CHOICE:function MultipleEditor(e){var{name:t,value:n,dataType:r,onChange:o,error:l,column:s,readOnly:c}=e,{options:u,rules:d}=s.metaInfo.localData.multipleChoice,{isMultipleSelection:h}=d,{Select:p}=context_useComponentsContext(),g=(0,_e.useMemo)((()=>u.map((e=>{var{value:t}=e;return t}))),[u]),b=(0,_e.useMemo)((()=>((e,t)=>e&&t&&!Array.isArray(e)?e.split(","):e)(n,h)),[n,h]),m=(0,_e.useCallback)((e=>{o({name:t,value:h?tryToStringifyValue(e):e})}),[o,h,t]);return a.createElement(EditorGroup,{name:t,dataType:r,error:l},a.createElement(p,{readOnly:c,size:"small",searchable:!0,value:b,options:g,multiple:h,onChange:m}))},TEXT:function TextEditor(e){var{name:t,value:n,dataType:r,onChange:o,error:l,column:s,readOnly:c,modalClassName:u}=e,d=context_useComponentsContext(),{FontIcon:h,Textarea:p}=d,[g,b]=(0,_e.useState)(!1),m=(0,_e.useCallback)((()=>b(!0)),[]),v=(0,_e.useCallback)((()=>b(!1)),[]),y=(0,_e.useCallback)((e=>o({name:t,value:e||null})),[o,t]);return a.createElement(EditorGroup,{name:t,dataType:r,error:l},a.createElement(p,{maxLength:s.dataSize,value:n,onChange:y,size:"small",readOnly:c,minRows:4,maxRows:4,className:"bl-input--with-editor"}),a.createElement(h,{tooltip:"Open Multi Line Editor",icon:Ee.gW.MULTILINE_EDITOR,onClick:m,className:"bl-visualization-multi-line-editor-icon",action:!0}),g&&a.createElement(MultiLineEditor,{className:u,readOnly:c,maxLength:s.dataSize,value:n,onChange:y,onHide:v,components:d}))},INT:NumericEditor,DOUBLE:NumericEditor,DECIMAL:NumericEditor,MONEY:NumericEditor,DATETIME:function DatetimeEditor(e){var{name:t,value:n,dataType:r,onChange:o,error:l,readOnly:s}=e,[c,u]=(0,_e.useState)(n),{DateTimePickers:d}=context_useComponentsContext(),h=d[Xe.w.TIME_PICKER],p=(0,_e.useLazyCallback)(o,500),g=(0,_e.useCallback)((e=>{u(e),p({name:t,value:e})}),[p,t]);return a.createElement(EditorGroup,{error:l,name:t,dataType:r},a.createElement(h,{value:c,onChange:g,readOnly:s}))},JSON:function JSONEditor(e){var{name:t,value:n,dataType:r,onChange:o,error:l,column:s,readOnly:c,modalClassName:u}=e,d=context_useComponentsContext(),{FontIcon:h,Input:p}=d,[g,b]=(0,_e.useState)(!1),m=(0,_e.useMemo)((()=>tt()(n)?JSON.stringify(n):n),[n]),v=(0,_e.useCallback)((()=>b(!0)),[]),y=(0,_e.useCallback)((()=>b(!1)),[]),_=(0,_e.useCallback)((e=>o({name:t,value:e||null})),[o,t]);return a.createElement(EditorGroup,{name:t,dataType:r,error:l},a.createElement(p,{value:m,onChange:_,size:"small",readOnly:c,maxLength:s.dataSize,className:"bl-input--with-editor"}),a.createElement(h,{tooltip:"Open JSON Editor",icon:Ee.gW.MULTILINE_EDITOR,onClick:v,className:"bl-visualization-multi-line-editor-icon",action:!0}),g&&a.createElement(JsonEditorModal,{className:u,components:d,readOnly:c,maxLength:s.dataSize,value:m,onChange:_,onHide:y}))},BOOLEAN:function BooleanEditor(e){var{name:t,value:n,dataType:r,onChange:o,error:l,readOnly:s}=e,{Select:c}=context_useComponentsContext(),u=(0,_e.useCallback)((e=>o({name:t,value:e})),[o,t]);return a.createElement(EditorGroup,{error:l,name:t,dataType:r},a.createElement(c.Boolean,{value:n,onChange:u,readOnly:s,size:"small"}))},FILE_REF:StringEditor,LINESTRING:GeoEditor,POINT:GeoEditor,POLYGON:GeoEditor,GEOMETRY:GeoEditor,COLOR_PICKER:function ColorEditor(e){var{name:t,value:n,dataType:r,onChange:o,error:l,readOnly:s}=e,{ColorInput:c}=context_useComponentsContext(),u=(0,_e.useCallback)((e=>{o({name:t,value:e})}),[o,t]);return a.createElement(EditorGroup,{error:l,name:t,dataType:r},a.createElement("div",{className:"bl-visualization--data-table-records-editor--color"},a.createElement($e.Z,{readOnly:s,component:c,onChange:u,value:n||"#FFF",disableAlpha:!1}),n||"(no color)"))}},Ht=n(85306),Zt={};Zt.styleTagTransform=y(),Zt.setAttributes=g(),Zt.insert=h().bind(null,"head"),Zt.domAPI=u(),Zt.insertStyleElement=m();s()(Ht.Z,Zt);Ht.Z&&Ht.Z.locals&&Ht.Z.locals;var Vt="default",Kt="danger";function ConfirmModal(e){var{onHide:t,disabled:n,title:r,components:o,message:l,children:s,className:c,busy:u}=e,{confirmText:d,cancelText:h,type:p}=e,{Button:g,FontIcon:b}=(0,_e.useMemo)((()=>(0,Oe.vD)(o)),[o]),m=(0,Me.cn)("bl-visualizations--confirm-modal",c,{"bl-visualizations--confirm-modal--danger":p===Kt,"bl-visualizations--confirm-modal--default":p===Vt}),v=(0,_e.useCallback)((()=>t(!1)),[t]),y=(0,_e.useCallback)((()=>t(!0)),[t]);return a.createElement(Ve.Z,{open:!0,onClose:v,className:m},a.createElement(Ve.Z.Header,{onClose:v},a.createElement("div",{className:"bl-visualizations--confirm-modal-title"},a.createElement(b,{icon:Ee.gW.WARNING}),r)),a.createElement(Ve.Z.Body,null,l||s),a.createElement(Ve.Z.Footer,null,d&&a.createElement(g,{onClick:y,busy:u,disabled:n||u,className:"bl-visualizations--confirm-modal--confirm-btn",danger:!0},d),a.createElement(g,{onClick:v,disabled:n||u,className:"bl-visualizations--confirm-modal--cancel-btn"},h)))}function DeleteBtn(e){var{onDelete:t,busy:n,components:r,disabled:o}=e,{Button:l}=r,[s,c]=(0,_e.useState)(!1),u=(0,_e.useCallback)((()=>c(!0)),[]),d=(0,_e.useCallback)((()=>c(!1)),[]),h=(0,_e.useCallback)((e=>{d(),e&&t()}),[d,t]);return a.createElement(a.Fragment,null,a.createElement(l,{onClick:u,disabled:o},n?"DELETING...":"DELETE"),s&&a.createElement(ConfirmModal,{onHide:h,title:"Delete event",components:r,message:"Do you want to delete this event?",type:"danger",confirmText:"DELETE"}))}function record_editor_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function record_editor_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?record_editor_ownKeys(Object(n),!0).forEach((function(t){record_editor_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):record_editor_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function record_editor_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ConfirmModal.defaultProps={title:"Confirmation required",cancelText:"CANCEL",confirmText:"CONFIRM",type:"default"};var Yt={[Ee.oS.INT]:ze.getInputParserToNumber(parseInt),[Ee.oS.DOUBLE]:ze.getInputParserToNumber(parseFloat),[Ee.oS.DECIMAL]:ze.getInputParserToNumber(parseFloat),[Ee.oS.MONEY]:ze.getInputParserToNumber(parseFloat),[Ee.oS.LINESTRING]:validateGeo,[Ee.oS.POINT]:validateGeo,[Ee.oS.POLYGON]:validateGeo,[Ee.oS.GEOMETRY]:validateGeo};function EventEditor(e){var{value:t,onHide:n,headerTitle:r,components:o,onChange:l}=e,{googleApiKey:s,isCreator:c,onDelete:u,editorsOrderComparator:d}=e,{editorsModalClassName:h,readOnly:p}=e,g=(0,_e.useMemo)((()=>c?e.columns.filter((e=>!e.readOnly)):e.columns),[e.columns,c]),b=(0,_e.useMemo)((()=>(0,Oe.vD)(o)),[o]),m=(0,_e.persistContextValue)({components:b,googleApiKey:s}),v=(0,_e.useSafeAsync)(),{Button:y}=b,_=function useValidatorBuilder(e){return(0,_e.useCallback)(buildRecordValidator(e),[e])}(g),[O,E]=(0,_e.useState)((()=>function getInitValue(e,t,n){if(!n)return e;var r=record_editor_objectSpread({},e);return t.forEach((e=>{var{name:t,defaultValue:n,type:a}=e;(null===r[t]||void 0===r[t])&&null!=n&&Gt[a]&&(r[t]=Gt[a](n))})),r}(t,g,c))),[x,S]=(0,_e.useState)((()=>_(O))),[w,C]=(0,_e.useState)(!1),[D,P]=(0,_e.useState)(!1),[T,k]=(0,_e.useState)(null),I=function useRowDataTypes(e){return(0,_e.useMemo)((()=>e.reduce(((e,t)=>{var n,r;return e[t.name]=(null===(n=t.metaInfo)||void 0===n||null===(r=n.localData)||void 0===r?void 0:r.type)||t.type,e}),{})),[e])}(g),j=(0,_e.useCallback)((e=>{var{name:t,value:n}=e,r=Yt[I[t]],a=record_editor_objectSpread(record_editor_objectSpread({},O),{},{[t]:r?r(n):n}),o=_(a);E(a),S(o)}),[_,I,O]),M=(0,_e.useCallback)((()=>{n()}),[n]),z=(0,_e.useCallback)((()=>k(null)),[]),A=(0,_e.useCallback)((e=>k(e.message)),[]),N=(0,_e.useCallback)((()=>{!x&&O&&(C(!0),v(l(O)).then((()=>n())).catch(A).finally((()=>C(!1))))}),[n,O,l,x,A]),L=(0,_e.useCallback)((()=>{P(!0),u(t.objectId).then((()=>n())).catch(A).finally((()=>P(!1)))}),[t,u,A]),R=(0,Me.cn)(e.className,"bl-visualization--data-table-records-editor"),F=(0,_e.useMemo)((()=>w?c?"CREATING...":"SAVING..":c?"CREATE":"SAVE"),[w,c]),B=function useEditors(e){var{columns:t,rowData:n,onChange:r,errors:o,components:l,editorsCustomOrderComparator:s,editorsModalClassName:c}=e,{readOnly:u}=e;return(0,_e.useMemo)((()=>{var e=[];for(var d of t){var h,{id:p,name:g,readOnly:b,metaInfo:m,type:v}=d,y=(null==m||null===(h=m.localData)||void 0===h?void 0:h.type)||v,_=Wt[y];if(_){var O=o&&o[g],E={readOnly:u||b,onChange:r,name:g,column:d,metaInfo:m,error:O,value:n[g],dataType:y,key:p,components:l,modalClassName:c};e.push(a.createElement(_,E))}}var x=e.sort(editorsOrderComparator);return s?x.sort(s):x}),[t,n,r,o,l,c])}({columns:g,rowData:O,onChange:j,errors:x,components:b,editorsCustomOrderComparator:d,editorsModalClassName:h,readOnly:p});return a.createElement(a.Fragment,null,a.createElement(Ve.Z,{open:!0,onClose:M,className:R},a.createElement(Ye.Provider,{value:m},a.createElement(Ve.Z.Header,{title:r,onClose:M}),a.createElement(Ve.Z.Body,null,B),a.createElement(Ve.Z.Footer,null,!p&&!c&&a.createElement(DeleteBtn,{onDelete:L,busy:D,disabled:D||w,components:b}),a.createElement(y,{onClick:M},p?"CLOSE":"CANCEL"),!p&&a.createElement(y,{disabled:!!x||w||D,onClick:N,primary:!0},F)))),T&&a.createElement(ConfirmModal,{onHide:z,title:"Request Error",components:b,message:T,type:"danger",confirmText:null,cancelText:"OK"}))}function editorsOrderComparator(e,t){var n=e.props.readOnly;return n===t.props.readOnly?0:!0===n?1:-1}var Gt={[Ee.oS.DOUBLE]:parseFloat,[Ee.oS.INT]:parseInt,[Ee.oS.DATETIME]:e=>new Date(e).getTime(),[Ee.oS.BOOLEAN]:e=>null===e?null:"true"===e};function EventEditorModal(e){var{show:t,onHide:n,data:r,isCreator:o,labelsCustomization:l,dateFields:s}=e,{components:c,columns:u,onRecordSave:d,googleApiKey:h,onRecordDelete:p,featureToggle:g}=(0,_e.useContext)(Se),b=function useEditorsOrderComparator(e,t){for(var n=[...e.fields].reverse(),r=t.length-1;r>=0;r--){var{startEventField:a,finishEventField:o}=t[r];o&&n.push(o),a&&n.push(a)}var l={};return n.forEach(((e,t)=>{l[e]=t+1})),(0,_e.useCallback)(((e,t)=>{var n=l[e.props.name]||0,r=l[t.props.name]||0;return n===r?0:n<r?1:-1}),[l])}(l,s);if(!t)return null;var m=((e,t)=>t?"Event Data":e?"Create Event":"Event Editor")(o,!g.dataEditing);return a.createElement(EventEditor,{className:"bl-calendar-visualization-modal",editorsModalClassName:"bl-calendar-visualization-modal",onHide:n,onChange:d,onDelete:p,value:r,components:c,headerTitle:m,columns:u,googleApiKey:h,isCreator:o,editorsOrderComparator:b,readOnly:!g.dataEditing})}function DateFields(e){var{disabled:t,initTimestamp:n,dateFields:r,labelsCustomization:o}=e,[l,s]=(0,_e.useState)(!1),c=function useEditorData(e,t){return(0,_e.useMemo)((()=>1===t.length?{[t[0].startEventField]:e}:{}),[e,t])}(n,r),{FontIcon:u}=useComponentsContext(),d=(0,_e.useCallback)((()=>s(!0)),[]),h=(0,_e.useCallback)((()=>s(!1)),[]),p=t?"There is no way to add event without data columns":"Add event";return a.createElement(Ce.Z.ButtonContainer,{className:"bl-calendar-visualization--toolbar--add-event-btn",isDisabled:t},a.createElement(ke.Z,{onClick:d,tooltip:p,disabled:t},a.createElement(u,{icon:Ee.gW.PLUS})),a.createElement(EventEditorModal,{show:l,data:c,onHide:h,isCreator:!0,dateFields:r,labelsCustomization:o}))}var Ut=n(40408),$t={};$t.styleTagTransform=y(),$t.setAttributes=g(),$t.insert=h().bind(null,"head"),$t.domAPI=u(),$t.insertStyleElement=m();s()(Ut.Z,$t);Ut.Z&&Ut.Z.locals&&Ut.Z.locals;var Xt=n(17788),qt=n(13903);function item_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function item_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?item_ownKeys(Object(n),!0).forEach((function(t){item_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):item_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function item_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var getOptionValue=e=>tt()(e)?e.value:e;function DateFieldItem(e){var{value:t,onChange:n,columns:r}=e,{startEventField:o,finishEventField:l}=t,{Select:s}=useComponentsContext(),{dateFieldsEndDateField:c}=useFeatureToggleContext(),u=(0,_e.useMemo)((()=>r.map((e=>{var{name:t}=e;return(0,Oe.nY)(t)}))),[r]),d=(0,_e.useMemo)((()=>u.filter((e=>{var{value:t}=e;return o!==t}))),[o,u]),h=(0,_e.useCallback)((e=>{var r=getOptionValue(e);return n(item_objectSpread(item_objectSpread({},t),{},r===l?{startEventField:r,finishEventField:null}:{startEventField:r}))}),[n,t,l]),p=(0,_e.useCallback)((e=>{var r=getOptionValue(e);n(item_objectSpread(item_objectSpread({},t),{},{finishEventField:r}))}),[n,t]);return a.createElement("div",{className:"bl-calendar-visualization--date-fields-item"},a.createElement(Ue.Z.Group,{label:"Start Date",inline:!0},a.createElement(s,{value:o,onChange:h,options:u,size:"small",autoFocus:!0,block:!0})),c&&a.createElement(Ue.Z.Group,{label:"End Date (optional)",inline:!0},a.createElement(s,{value:l,onChange:p,options:d,disabled:!o,size:"small",autoFocus:!0,block:!0,clearable:!0})))}var Qt={startEventField:null,finishEventField:null},hasValues=e=>e.length>0&&e.every((e=>!!e.startEventField));function DateFieldsModal(e){var t,n,[r,o]=(0,_e.useObjectState)({initValue:e.value,value:e.value,additionDisabled:!hasValues(e.value)}),{value:l,additionDisabled:s,initValue:c}=r,{FontIcon:u,Button:d}=useComponentsContext(),{dateFieldsMultiple:h}=useFeatureToggleContext(),p=(0,_e.useMemo)((()=>l.filter((e=>!!e.startEventField))),[l]),g=(0,_e.useMemo)((()=>(0,Xt.h)(p,c)),[p,c]),b=(0,_e.useCallback)((e=>{var t=e.map((e=>{var{startEventField:t,finishEventField:n}=e;return{startEventField:t,finishEventField:n}}));o({value:t,additionDisabled:!hasValues(e)})}),[]),m=(0,_e.useCallback)((()=>{o({value:qt.Z.DefaultModel.dateFields,additionDisabled:!1})}),[]),v=(0,_e.useCallback)((()=>{e.onChange(p),e.onHide()}),[e.onHide,e.onChange,p]),y=(t=e.columns.length,n=h,t>1?n?t:1:t),_=!l.length||s||y===l.length;return a.createElement(Ve.Z,{open:e.show,onClose:e.onHide,className:"bl-calendar-visualization--date-fields-modal bl-calendar-visualization-modal"},a.createElement(Ve.Z.Header,{title:"Select Date Properties",onClose:e.onHide}),a.createElement(Ve.Z.Body,null,a.createElement(Dt.Z,{FontIconComponent:u,values:l,onChange:b,max:y,readOnly:_,initialValue:Qt,modern:!0},a.createElement(DateFieldItem,{columns:e.columns}))),a.createElement(Ve.Z.Footer,null,a.createElement(d,{onClick:m},"RESET ALL"),a.createElement(d,{onClick:e.onHide},"CANCEL"),a.createElement(d,{onClick:v,primary:!0,disabled:!g},"SAVE")))}function date_fields_DateFields(e){var{onChange:t,columns:n,value:r,disabled:o}=e,[l,s]=(0,_e.useState)(!1),{FontIcon:c}=useComponentsContext(),u=(0,_e.useCallback)((()=>s(!0)),[]),d=(0,_e.useCallback)((()=>s(!1)),[]),h=o?'There is no way to select start/end date properties without "DateTime" data column':"Select Start/End Date Properties";return a.createElement(Ce.Z.ButtonContainer,{isDisabled:o},a.createElement(ke.Z,{onClick:u,tooltip:h,disabled:o},a.createElement(c,{icon:Ee.gW.CALENDAR})),l&&a.createElement(DateFieldsModal,{show:l,onHide:d,onChange:t,columns:n,value:r}))}var Jt=n(38674),en={};en.styleTagTransform=y(),en.setAttributes=g(),en.insert=h().bind(null,"head"),en.domAPI=u(),en.insertStyleElement=m();s()(Jt.Z,en);Jt.Z&&Jt.Z.locals&&Jt.Z.locals;function FieldLabelItem(e){var{usedItems:t,value:n,onChange:r,columns:o}=e,{Select:l}=useComponentsContext(),s=(e=>(0,_e.useMemo)((()=>e.map((e=>{var{name:t}=e;return t}))),[e]))(o),c=((e,t,n)=>(0,_e.useMemo)((()=>(0,Oe.fG)(e,t,n)),[e,t,n]))(s,t,n),u=(0,_e.useCallback)((e=>{var{value:t}=e;return r(t)}),[r]);return a.createElement("div",{className:"bl-calendar-visualization--customize-label-modal--fields-item"},a.createElement(l,{value:n&&(0,Oe.nY)(n),onChange:u,options:c,autoFocus:!0,block:!0,size:"small"}))}function LabelFields(e){var t,{value:n,onChange:r,columns:o}=e,{FontIcon:l}=useComponentsContext(),s=o.length,c=!(t=n,t.length>0&&t.every((e=>!!e))&&s!==n.length);return a.createElement("div",{className:"bl-calendar-visualization--customize-label-modal--section"},a.createElement("div",{className:"bl-calendar-visualization--customize-label-modal--section-title bl-control-label"},"Label Editor"),a.createElement(Dt.Z,{FontIconComponent:l,values:n,onChange:r,max:s,readOnly:c,initialValue:null,modern:!0},a.createElement(FieldLabelItem,{usedItems:n,columns:o})))}var tn=[{value:"SMALL",label:"Small"},{value:"MEDIUM",label:"Medium"},{value:"LARGE",label:"Large"}];function LabelSize(e){var{value:t,onChange:n}=e,{Select:r}=useComponentsContext(),o=(0,_e.useCallback)((e=>{var{value:t}=e;return n(t)}),[n]);return a.createElement("div",{className:"bl-calendar-visualization--customize-label-modal--section"},a.createElement("div",{className:"bl-calendar-visualization--customize-label-modal--section-title bl-control-label"},"Text Size"),a.createElement("div",{className:"bl-calendar-visualization--customize-label-modal--section-size--select-box"},a.createElement(r,{value:t,onChange:o,options:tn,autoFocus:!0,size:"small"})))}var nn=n(55485),rn=n(21080),an={};an.styleTagTransform=y(),an.setAttributes=g(),an.insert=h().bind(null,"head"),an.domAPI=u(),an.insertStyleElement=m();s()(rn.Z,an);rn.Z&&rn.Z.locals&&rn.Z.locals;var on=n(68319),ln=n(15885);function InfoIcon(e){var{className:t,content:n,component:r}=e,o=r||on.Z;return a.createElement(ln.Z,{tooltip:n},a.createElement("span",{className:"bl-visualization--info-icon"},a.createElement(o,{icon:Ee.gW.INFO,className:t})))}function depth_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function depth_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?depth_ownKeys(Object(n),!0).forEach((function(t){depth_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):depth_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function depth_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sn=[{value:nn.G$.INDENT,label:"Min Indent"},{value:nn.G$.STACK_SIZE,label:"Max Items"}];function VisibleDepth(e){var{value:t,onChange:n}=e,{Select:r,NumberInput:o,FontIcon:l}=useComponentsContext(),s=(0,_e.useCallback)((e=>{var{value:r}=e;return n(depth_objectSpread(depth_objectSpread({},t),{},{mode:r}))}),[n,t]),c=(0,_e.useCallback)((e=>n(depth_objectSpread(depth_objectSpread({},t),{},{value:e}))),[n,t]);return a.createElement("div",{className:"bl-calendar-visualization--customize-label-modal--section"},a.createElement("div",{className:"bl-calendar-visualization--customize-label-modal--section-title bl-control-label"},"Event Packing Behavior",a.createElement(InfoIcon,{content:"Controls how events should be displayed when their times overlap",component:l})),a.createElement("div",{className:"bl-calendar-visualization--customize-label-modal--section-depth--controls"},a.createElement("div",{className:"bl-calendar-visualization--customize-label-modal--section-depth--mode-box"},a.createElement(r,{value:t.mode,onChange:s,options:sn,autoFocus:!0,size:"small"})),a.createElement("div",{className:"bl-calendar-visualization--customize-label-modal--section-depth--value-box"},a.createElement(o,{value:t.value,onChange:c,size:"small",className:"bl-calendar-visualization--customize-label-modal--section-depth--value-number-input"}),t.mode===nn.G$.INDENT&&a.createElement("div",{className:"bl-control-field"},"px"))))}function modal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function modal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?modal_ownKeys(Object(n),!0).forEach((function(t){modal_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):modal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function modal_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EventLabelCustomizerModal(e){var{columns:t,onChange:n,onHide:r,show:o,value:l}=e,{Button:s}=useComponentsContext(),[c,u]=(0,_e.useObjectState)(l),{fields:d,depth:h,size:p}=c,g=(0,_e.useCallback)((e=>u({fields:e})),[]),b=(0,_e.useCallback)((e=>u({size:e})),[]),m=(0,_e.useCallback)((e=>u({depth:e})),[]),v=(0,_e.useCallback)((()=>u(qt.Z.DefaultModel.labelsCustomization)),[]),y=(0,_e.useMemo)((()=>(e=>{var{fields:t}=e;return modal_objectSpread(modal_objectSpread({},e),{},{fields:t.filter((e=>null!==e))})})(c)),[c]),_=(0,_e.useMemo)((()=>(0,Xt.h)(y,l)),[y]),O=(0,_e.useCallback)((()=>{n(y),r()}),[r,n,y]);return a.createElement(Ve.Z,{open:o,onClose:r,className:"bl-calendar-visualization--customize-label-modal bl-calendar-visualization-modal"},a.createElement(Ve.Z.Header,{title:"Event Label Customizer",onClose:r}),a.createElement(Ve.Z.Body,null,a.createElement(LabelSize,{value:p,onChange:b}),a.createElement(VisibleDepth,{value:h,onChange:m}),a.createElement(LabelFields,{value:d,onChange:g,columns:t})),a.createElement(Ve.Z.Footer,null,a.createElement(s,{onClick:v},"RESET ALL"),a.createElement(s,{onClick:r},"CANCEL"),a.createElement(s,{onClick:O,disabled:!_,primary:!0},"SAVE")))}function EventLabelCustomizer(e){var{onChange:t,columns:n,value:r,disabled:o}=e,[l,s]=(0,_e.useState)(!1),{FontIcon:c}=useComponentsContext(),u=(0,_e.useCallback)((()=>s(!0)),[]),d=(0,_e.useCallback)((()=>s(!1)),[]),h=(0,_e.useMemo)((()=>function checkIsActive(e){var{fields:t,depth:n,size:r}=e,{mode:a}=n;if(t.length)return!0;if(a!==qt.Z.DefaultModel.labelsCustomization.depth.mode)return!0;if(r!==qt.Z.DefaultModel.labelsCustomization.size)return!0;return!1}(r)),[r]),p=o?"There is no way to customize labels without data columns":"Customize labels";return a.createElement(Ce.Z.ButtonContainer,{isActive:h,isDisabled:o},a.createElement(ke.Z,{onClick:u,tooltip:p,disabled:o},a.createElement(c,{icon:Ee.gW.SETTINGS_GEAR})),l&&a.createElement(EventLabelCustomizerModal,{show:l,onHide:d,onChange:t,columns:n,value:r}))}var cn=n(37362),un={};un.styleTagTransform=y(),un.setAttributes=g(),un.insert=h().bind(null,"head"),un.domAPI=u(),un.insertStyleElement=m();s()(cn.Z,un);cn.Z&&cn.Z.locals&&cn.Z.locals;var dn=n(26288),hn=n(858),pn={};pn.styleTagTransform=y(),pn.setAttributes=g(),pn.insert=h().bind(null,"head"),pn.domAPI=u(),pn.insertStyleElement=m();s()(hn.Z,pn);hn.Z&&hn.Z.locals&&hn.Z.locals;var gn=n(46709),fn={};fn.styleTagTransform=y(),fn.setAttributes=g(),fn.insert=h().bind(null,"head"),fn.domAPI=u(),fn.insertStyleElement=m();s()(gn.Z,fn);gn.Z&&gn.Z.locals&&gn.Z.locals;function header_extends(){return header_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},header_extends.apply(this,arguments)}function header_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function header_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?header_ownKeys(Object(n),!0).forEach((function(t){header_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):header_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function header_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function body_extends(){return body_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},body_extends.apply(this,arguments)}function body_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function body_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?body_ownKeys(Object(n),!0).forEach((function(t){body_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):body_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function body_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function accordion_extends(){return accordion_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},accordion_extends.apply(this,arguments)}function accordion_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function accordion_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?accordion_ownKeys(Object(n),!0).forEach((function(t){accordion_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):accordion_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function accordion_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Accordion(e){var{className:t,classes:n,children:r,error:o,disabled:l,expanded:s}=e,c=(0,_e.useMemo)((()=>accordion_objectSpread(accordion_objectSpread({},n),{},{root:(0,Me.cn)(null==n?void 0:n.root,"bl-visualizations-accordion--root",t,{"bl-visualizations-accordion--root-error":!!o})})),[n,t,o]);return a.createElement(st.Z.Accordion,accordion_extends({},e,{classes:c,expanded:!l&&s,disabled:l}),r)}function AccordionSection(e){var{expanded:t,disabled:n,error:r,className:o,contentDescription:l,children:s,label:c,helpContent:u,applied:d}=e,{onVisibilityClick:h,onExpandedChange:p,id:g}=e,{FontIcon:b}=useComponentsContext();return a.createElement("div",{className:"bl-calendar-visualization--labels-color-modal-section"},n&&a.createElement(ln.Z,{tooltip:u},a.createElement("div",{className:"bl-calendar-visualization--labels-color-modal--accordion-header--shadow-tooltip-box"})),a.createElement(Accordion,{expanded:t,onChange:p,disabled:n,className:o,error:r},a.createElement(Accordion.Header,{expandIcon:a.createElement(b,{icon:Ee.gW.BODY_GROUP_TITLE_CHEVRON_DOWN}),id:g},!n&&a.createElement(b,{icon:d?Ee.gW.VISIBILITY:Ee.gW.VISIBILITY_OFF,onClick:h}),a.createElement(InfoIcon,{content:u,component:b}),a.createElement("div",{className:"bl-visualizations-accordion-header--content-label"},c),a.createElement("div",{className:"bl-visualizations-accordion-header--content-describe"},l)),a.createElement(Accordion.Body,null,s)))}function ByFieldItem(e){var{usedItems:t,value:n,onChange:r,columns:o}=e,{Select:l}=useComponentsContext(),s=item_useColumnsNames(o),c=item_useOptions(s,t,n),u=(0,_e.useCallback)((e=>{var{value:t}=e;return r(t)}),[r]);return a.createElement(Ue.Z.Group,{className:"bl-calendar-visualization--color-label-by-field-item",label:"Display field"},a.createElement(l,{value:n&&(0,Oe.nY)(n,n),onChange:u,options:c,autoFocus:!0,block:!0,size:"small"}))}Accordion.Header=function AccordionHeader(e){var{className:t,classes:n,children:r,label:o}=e,l=(0,_e.useMemo)((()=>header_objectSpread(header_objectSpread({},n),{},{root:(0,Me.cn)(null==n?void 0:n.root,t,"bl-visualizations-accordion-header--root"),content:(0,Me.cn)(null==n?void 0:n.content,"bl-visualizations-accordion-header--content"),expandIcon:(0,Me.cn)(null==n?void 0:n.expandIcon,"bl-visualizations-accordion-header--expand-icon"),expanded:(0,Me.cn)(null==n?void 0:n.expanded,"bl-visualizations-accordion-header--expanded")})),[n,t]);return a.createElement(st.Z.AccordionSummary,header_extends({},e,{classes:l}),o&&a.createElement("div",{className:"bl-visualizations-accordion-header--content-label"},o),r)},Accordion.Body=function AccordionBody(e){var{className:t,classes:n,children:r}=e,o=(0,_e.useMemo)((()=>body_objectSpread(body_objectSpread({},n),{},{root:(0,Me.cn)(null==n?void 0:n.root,t,"bl-visualizations-accordion-body--root")})),[n,t]);return a.createElement(st.Z.AccordionDetails,body_extends({},e,{classes:o}),r)};var item_useColumnsNames=e=>(0,_e.useMemo)((()=>e.map((e=>{var{name:t}=e;return t}))),[e]),item_useOptions=(e,t,n)=>(0,_e.useMemo)((()=>(0,Oe.fG)(e,t,n)),[e,t,n]);function by_field_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function by_field_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?by_field_ownKeys(Object(n),!0).forEach((function(t){by_field_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):by_field_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function by_field_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bn=a.createElement(a.Fragment,null,a.createElement("div",null,"Apply color from columns such as:"),a.createElement("div",null," - COLOR_PICKER type"),a.createElement("div",null," - MULTIPLE CHOICE with modes: Colors - true, Multiple selection - false"),a.createElement("br",null),a.createElement("div",null,"If the event matches the condition and gets a color, it will override the conditions below."),a.createElement("div",null,"If the event matches the condition above and gets a color, it will be overridden by the conditions above."),a.createElement("div",null,"If the event matches the condition and does not get a color, then the event will try to get the color from the conditions below."));function ByFields(e){var t,{columns:n,onChange:r,expandedSection:o,onSectionExpandedChange:l}=e,{FontIcon:s}=useComponentsContext(),{apply:c,value:u}=e.value,d=n.length,h=!(t=u,t.length>0&&t.every((e=>!!e))&&d!==u.length),p=(0,_e.useCallback)(((e,t)=>{l("byFields",t)}),[l]),g=(0,_e.useCallback)((t=>{t.length||r(by_field_objectSpread(by_field_objectSpread({},e.value),{},{value:[]}))}),[r,e.value]),b=(0,_e.useCallback)((t=>r(by_field_objectSpread(by_field_objectSpread({},e.value),{},{value:t}))),[r,e.value]),m=(0,_e.useCallback)((()=>{r(by_field_objectSpread(by_field_objectSpread({},e.value),{},{apply:!c}))}),[r,e.value,c]),v=(0,_e.useStopPropagation)(m),y=!n.length;return a.createElement(AccordionSection,{expanded:o,onExpandedChange:p,disabled:y,id:"byFields",applied:c,onVisibilityClick:v,helpContent:bn,label:"Select Fields",contentDescription:"Color records the same as a single field"},a.createElement("div",{className:"bl-calendar-visualization--labels-color-modal--by-field"},a.createElement(Dt.Z,{FontIconComponent:s,values:u,onChange:b,max:d,readOnly:h,initialValue:null,modern:!0,onRemoveClick:g,showRemoveBtnRequired:!0},a.createElement(ByFieldItem,{usedItems:u,columns:n}))))}var mn=n(19645),vn={};vn.styleTagTransform=y(),vn.setAttributes=g(),vn.insert=h().bind(null,"head"),vn.domAPI=u(),vn.insertStyleElement=m();s()(mn.Z,vn);mn.Z&&mn.Z.locals&&mn.Z.locals;var yn=["#cfdfff","#c2f6e9","#feeab6","#ffdce5","#ede1fe","#d0f0fd","#d0f7c3","#fde2d5","#ffd9f6","#eeeeee"],_n="HEX",On="RGBA",En="RGB",xn=/^#([0-9a-f]{3}){1,2}$/i,Sn=/^rgb\((0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d)\)$/,wn=/^rgba\((0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|1|0.\d|0.\d\d)\)$/,Cn=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Dn=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),?(1|0|0.\d|0.\d\d)?\)/,Pn={generateRandomHex(){var e=16777215*Math.random(),t=(e=(e=Math.floor(e)).toString(16)).padStart(6,"0");return"#".concat(t.toLowerCase())},generateHexColor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=yn.find((t=>!e.includes(t)))||generateUniqHexColor();return e.includes(t)?generateUniqHexColor(t):t},getContrastHexColor(e,t){if(0===e.indexOf("#")&&(e=e.slice(1)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6!==e.length)throw new Error("Invalid HEX color.");var n=parseInt(e.slice(0,2),16),r=parseInt(e.slice(2,4),16),a=parseInt(e.slice(4,6),16);return t?.299*n+.587*r+.114*a>186?"#000000":"#ffffff":(n=(255-n).toString(16),r=(255-r).toString(16),a=(255-a).toString(16),"#"+n.padStart(2,"0")+r.padStart(2,"0")+a.padStart(2,"0"))},getContrastRGBAColor(e,t,n){var r=Dn.exec(e),a=+r[1],o=+r[2],l=+r[3],s=+r[4];return t?(.299*a+.587*o+.114*l)/s>186?n?"rgba(0,0,0,".concat(s,")"):"rgba(0,0,0)":n?"rgba(255,255,255,".concat(s,")"):"rgba(255,255,255)":(a=255-a,o=255-o,l=255-l,n?"rgba(".concat(a,",").concat(o,",").concat(l,",").concat(s,")"):"rgba(".concat(a,",").concat(o,",").concat(l,")"))},getContrastRGBColor(e,t){var n=Cn.exec(e),r=+n[1],a=+n[2],o=+n[3];return t?.299*r+.587*a+.114*o>186?"rgb(0,0,0)":"rgb(255,255,255)":(a=255-a,o=255-o,"rgb(".concat(r=255-r,",").concat(a,",").concat(o,")"))},getContrastColor(e,t,n){var r=function getColorCodeType(e){if(!e||"string"!=typeof e)throw new Error("Color should be a string.");if(xn.test(e))return _n;if(Sn.test(e))return En;if(wn.test(e))return On;throw new Error("Invalid color code")}(e);return r===_n?Pn.getContrastHexColor(e,t):r===On?Pn.getContrastRGBAColor(e,t,n):r===En?Pn.getContrastRGBColor(e,t):void 0}};function generateUniqHexColor(e){var t;do{t=Pn.generateRandomHex()}while(t===e);return t}function ColorMultipleIcons(e){var{icon:t,className:n,disabled:r,onClick:o}=e,{FontIcon:l}=useComponentsContext();if(t===Ee.gW.MULTIPLE_CONTROLS_ADD){var s=(0,Me.cn)(n,"bl-calendar-visualization--labels-color-modal--by-condition-add-icon");return a.createElement("button",{disabled:r,className:s,onClick:o},"ADD COLOR")}return a.createElement(l,e)}var Tn=n(84642);function ColorInputContainer(e){var{onChange:t,value:n}=e,{ColorInput:r}=useComponentsContext();return a.createElement("div",{className:"bl-calendar-visualization--labels-color-modal--color-container",onClick:e=>e.stopPropagation()},a.createElement($e.Z,{onChange:t,value:n,component:r,tooltip:"Events Labels Background Color"}))}var kn=["isJustAdded"];function color_item_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function color_item_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?color_item_ownKeys(Object(n),!0).forEach((function(t){color_item_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):color_item_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function color_item_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function color_item_objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function color_item_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ColorItem(e){var{columns:t,onChange:n,error:r,validated:o,onRemoveClick:l,expandedSections:s,onSectionExpandedChange:c}=e,u=e.value,{isJustAdded:d}=u,h=color_item_objectWithoutProperties(u,kn),{color:p,priority:g,conditions:b}=h,m=useComponentsContext(),{FontIcon:v,CheckBox:y}=m,_=r&&r[p],O=(0,_e.useCallback)((e=>n(color_item_objectSpread(color_item_objectSpread({},h),{},{color:e.toLowerCase()}))),[n,h]),E=(0,_e.useCallback)((()=>n(color_item_objectSpread(color_item_objectSpread({},h),{},{priority:!g}))),[n,h,g]),x=(0,_e.useStopPropagation)(E),S=(0,_e.useStopPropagation)(l),w=(0,_e.useCallback)((e=>n(color_item_objectSpread(color_item_objectSpread({},h),{},{conditions:e}))),[n,h]),C=(0,_e.useCallback)(((e,t)=>{c(p,t)}),[c,p]);!function useEffectOnJustAddedItem(e,t,n){(0,_e.useEffect)((()=>{n&&e(t,!0)}),[n])}(c,p,d);var D=!(!s||!s[p]);return a.createElement(Accordion,{error:o&&_?1:0,className:"bl-calendar-visualization--labels-color-modal--by-condition--item",expanded:D,onChange:C},a.createElement(Accordion.Header,{id:p,expandIcon:a.createElement(v,{icon:Ee.gW.BODY_GROUP_TITLE_CHEVRON_DOWN})},a.createElement(ColorInputContainer,{onChange:O,value:p}),a.createElement(y,{onClick:x,value:g,label:"Override",tooltip:"Add priority to this color if color by field exist"}),a.createElement(v,{onClick:S,icon:Ee.gW.DELETE,className:"bl-calendar-visualization--labels-color-modal--by-condition-item-header-control",action:!0})),a.createElement(Accordion.Body,null,a.createElement(Tn.Z,{columns:t,onChange:w,conditions:b,error:_,showError:o,components:m})))}function by_condition_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function by_condition_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?by_condition_ownKeys(Object(n),!0).forEach((function(t){by_condition_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):by_condition_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function by_condition_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var In=a.createElement(a.Fragment,null,a.createElement("div",null,"If the event matches the condition and gets a color, it will override the conditions below."),a.createElement("div",null,"If the event matches the condition and does not get a color, then the event will try to get the color from the conditions below."),a.createElement("div",null,"In this section the condition above takes precedence over the condition below."));function ByCondition(e){var{columns:t,onChange:n,validated:r,error:o,expandedSections:l,onSectionExpandedChange:s,usedColors:c}=e,{apply:u,value:d}=e.value,h=function useInitialValueCreator(e){return(0,_e.useCallback)((()=>({isJustAdded:!0,color:Pn.generateHexColor(e),priority:!0,conditions:[]})),[e])}(c),p=(0,_e.useCallback)(((e,t)=>{s("byCondition",t)}),[s]),g=(0,Me.cn)("bl-calendar-visualization--labels-color-modal--by-condition",{"bl-accordion--no-content":!d.length}),b=(0,_e.useCallback)((t=>n(by_condition_objectSpread(by_condition_objectSpread({},e.value),{},{value:t}))),[n,e.value]),m=(0,_e.useCallback)((()=>{n(by_condition_objectSpread(by_condition_objectSpread({},e.value),{},{apply:!u}))}),[n,e.value,u]),v=(0,_e.useStopPropagation)(m),y=!t.length;return a.createElement(AccordionSection,{className:g,expanded:!(null==l||!l.byCondition),onExpandedChange:p,disabled:y,id:"byCondition",applied:u,onVisibilityClick:v,helpContent:In,label:"Conditions",error:r&&o?1:0,contentDescription:"Color records by defining filter-like rules"},a.createElement(Dt.Z,{FontIconComponent:ColorMultipleIcons,values:d,onChange:b,initialValue:h,modern:!0,min:0,hideRemoveBtn:!0,allowEmpty:!0},a.createElement(ColorItem,{columns:t,validated:r,error:o,expandedSections:l,onSectionExpandedChange:s})))}var jn=n(18286),Mn={};Mn.styleTagTransform=y(),Mn.setAttributes=g(),Mn.insert=h().bind(null,"head"),Mn.domAPI=u(),Mn.insertStyleElement=m();s()(jn.Z,Mn);jn.Z&&jn.Z.locals&&jn.Z.locals;var zn=n(62760);function color_conditions_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function color_conditions_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?color_conditions_ownKeys(Object(n),!0).forEach((function(t){color_conditions_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):color_conditions_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function color_conditions_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getEventColor(e,t,n,r){var a=function getColorByFields(e,t,n){if(!t.apply)return null;for(var r=t.value,a=0;a<r.length;a++){var o=r[a],l=e[o];if(l){var s=getColorByColumnValue(l,o,n);if(s)return s}}return null}(e,t.byFields,n),o=function getColorByCondition(e,t){if(!t.apply)return null;for(var n=t.value,r=0;r<n.length;r++){var{conditions:a,color:o}=n[r];if(isMatchedWithConditions(e,a))return o}return null}(e,color_conditions_objectSpread(color_conditions_objectSpread({},t.byCondition),{},{value:t.byCondition.value.filter((e=>{var{priority:t}=e;return!a||t}))})),l=function getColorByDateFields(e,t){if(!t.apply)return null;var n=getDateFieldToFieldBunch(e),r=t.value.find((e=>{var{fieldsBunch:t}=e;return t===n}));return(null==r?void 0:r.color)||null}(r,t.byDateFields);return o||a||l}function getColorByColumnValue(e,t,n){var r,a,o=n.find((e=>{var{name:n}=e;return n===t})),l=null==o||null===(r=o.metaInfo)||void 0===r||null===(a=r.localData)||void 0===a?void 0:a.type;if(l===Ee.oS.COLOR_PICKER)return e;if(l===Ee.oS.MULTIPLE_CHOICE){var s=function getMultipleChoiceColumnColors(e){var t,n,r,a=null==e||null===(t=e.metaInfo)||void 0===t||null===(n=t.localData)||void 0===n||null===(r=n.multipleChoice)||void 0===r?void 0:r.options,o={};a&&a.forEach((e=>o[e.value]=e.color));return o}(o);return s[e]}}function isMatchedWithConditions(e,t){for(var n=null,r=!1,a=0;a<t.length;a++){var{operator:o,conditionValue:l,columnName:s,combinator:c}=t[a];if(r){if(!c)return n;"OR"===c&&(r=!1)}else{if(n=(0,An[o])(e[s],l),!c)return n;if("AND"!==c||n){if("OR"===c&&n)return!0}else r=!0}}}function getDateFieldToFieldBunch(e){var{startEventField:t,finishEventField:n}=e;return n?"".concat(t," - ").concat(n):"".concat(t)}function getDateFieldsToFieldsBunches(e){return e.map(getDateFieldToFieldBunch)}var An=color_conditions_objectSpread({equal:(e,t)=>e===t,notEqual:(e,t)=>e!==t,contains:(e,t)=>null!=e&&-1!==e.indexOf(t),notContains:(e,t)=>null==e||-1===e.indexOf(t),startsWith:(e,t)=>null!=e&&(""+e).startsWith(t),notStartsWith:(e,t)=>null==e||!(""+e).startsWith(t),endsWith:(e,t)=>null!=e&&(""+e).endsWith(t),notEndsWith:(e,t)=>null==e||!(""+e).endsWith(t),isEmpty:e=>""===e,isNotEmpty:e=>""!==e,isNull:e=>null===e,isNotNull:e=>null!==e,isTrue:e=>!0===e,isNotTrue:e=>!0!==e,isFalse:e=>!1===e,isNotFalse:e=>!1!==e,">":(e,t)=>e>t,"<":(e,t)=>e<t,">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t},{"is-specificDate":(e,t)=>e>=zn.E.getDayStart(t)&&e<=zn.E.getDayEnd(t),"is-specificTime":(e,t)=>e>=zn.E.getSecondStart(t)&&e<=zn.E.getSecondEnd(t),"is-specificMonth":(e,t)=>e>=zn.E.getMonthStart(t)&&e<=zn.E.getMonthEnd(t),"is-specificYear":(e,t)=>e>=zn.E.getYearStart(t)&&e<=zn.E.getYearEnd(t),"is-today":e=>e>=zn.E.getTodayStart()&&e<=zn.E.getTodayEnd(),"is-yesterday":e=>e>=zn.E.getYesterdayStart()&&e<=zn.E.getYesterdayEnd(),"is-tomorrow":e=>e>=zn.E.getTomorrowStart()&&e<=zn.E.getTomorrowEnd(),"isNot-specificDate":(e,t)=>e<zn.E.getDayStart(t)||e>zn.E.getDayEnd(t),"isNot-specificTime":(e,t)=>e<zn.E.getSecondStart(t)||e>zn.E.getSecondEnd(t),"isNot-specificMonth":(e,t)=>e<zn.E.getMonthStart(t)||e>zn.E.getMonthEnd(t),"isNot-specificYear":(e,t)=>e<zn.E.getYearStart(t)||e>zn.E.getYearEnd(t),"isNot-today":e=>e<zn.E.getTodayStart()||e>zn.E.getTodayEnd(),"isNot-yesterday":e=>e<zn.E.getYesterdayStart()||e>zn.E.getYesterdayEnd(),"isNot-tomorrow":e=>e<zn.E.getTomorrowStart()||e>zn.E.getTomorrowEnd(),"before-specificDate":(e,t)=>e<zn.E.getDayStart(t),"before-specificTime":(e,t)=>e<zn.E.getSecondStart(t),"before-specificMonth":(e,t)=>e<zn.E.getMonthStart(t),"before-specificYear":(e,t)=>e<zn.E.getYearStart(t),"before-today":e=>e<zn.E.getTodayStart(),"before-yesterday":e=>e<zn.E.getYesterdayStart(),"before-tomorrow":e=>e<zn.E.getTomorrowStart(),"after-specificDate":(e,t)=>e>zn.E.getDayEnd(t),"after-specificTime":(e,t)=>e>zn.E.getSecondEnd(t),"after-specificMonth":(e,t)=>e>zn.E.getMonthEnd(t),"after-specificYear":(e,t)=>e>zn.E.getYearEnd(t),"after-today":e=>e>zn.E.getTodayEnd(),"after-yesterday":e=>e>zn.E.getYesterdayEnd(),"after-tomorrow":e=>e>zn.E.getTomorrowEnd(),"atOrBefore-specificDate":(e,t)=>e<=zn.E.getDayEnd(t),"atOrBefore-specificTime":(e,t)=>e<=zn.E.getSecondEnd(t),"atOrBefore-specificMonth":(e,t)=>e<=zn.E.getMonthEnd(t),"atOrBefore-specificYear":(e,t)=>e<=zn.E.getYearEnd(t),"atOrBefore-today":e=>e<=zn.E.getTodayEnd(),"atOrBefore-yesterday":e=>e<=zn.E.getYesterdayEnd(),"atOrBefore-tomorrow":e=>e<=zn.E.getTomorrowEnd(),"atOrAfter-specificDate":(e,t)=>e>=zn.E.getDayStart(t),"atOrAfter-specificTime":(e,t)=>e>=zn.E.getSecondStart(t),"atOrAfter-specificMonth":(e,t)=>e>=zn.E.getMonthStart(t),"atOrAfter-specificYear":(e,t)=>e>=zn.E.getYearStart(t),"atOrAfter-today":e=>e>=zn.E.getTodayStart(),"atOrAfter-yesterday":e=>e>=zn.E.getYesterdayStart(),"atOrAfter-tomorrow":e=>e>=zn.E.getTomorrowStart(),"within-thePastWeek":e=>e>=zn.E.getWeekBefore()&&e<=zn.E.getNow(),"within-thePastMonth":e=>e>=zn.E.getMonthBefore()&&e<=zn.E.getNow(),"within-thePastYear":e=>e>=zn.E.getYearBefore()&&e<=zn.E.getNow(),"within-theNextWeek":e=>e>=zn.E.getNow()&&e<=zn.E.getWeekAfter(),"within-theNextMonth":e=>e>=zn.E.getNow()&&e<=zn.E.getMonthAfter(),"within-theNextYear":e=>e>=zn.E.getNow()&&e<=zn.E.getYearAfter(),"within-theNextDays":(e,t)=>e>=zn.E.getNow()&&e<=zn.E.getDaysAfter(t),"within-thePastDays":(e,t)=>e<=zn.E.getNow()&&e>=zn.E.getDaysBefore(t),"notWithin-thePastWeek":e=>e<zn.E.getWeekBefore()||e>zn.E.getNow(),"notWithin-thePastMonth":e=>e<zn.E.getMonthBefore()||e>zn.E.getNow(),"notWithin-thePastYear":e=>e<zn.E.getYearBefore()||e>zn.E.getNow(),"notWithin-theNextWeek":e=>e<zn.E.getNow()||e>zn.E.getWeekAfter(),"notWithin-theNextMonth":e=>e<zn.E.getNow()||e>zn.E.getMonthAfter(),"notWithin-theNextYear":e=>e<zn.E.getNow()||e>zn.E.getYearAfter(),"notWithin-theNextDays":(e,t)=>e<zn.E.getNow()||e>zn.E.getDaysAfter(t),"notWithin-thePastDays":(e,t)=>e>zn.E.getNow()||e<zn.E.getDaysBefore(t)});function by_date_field_item_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function by_date_field_item_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?by_date_field_item_ownKeys(Object(n),!0).forEach((function(t){by_date_field_item_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):by_date_field_item_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function by_date_field_item_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function item_ColorItem(e){var{usedItems:t,value:n,onChange:r,dateFields:o}=e,{color:l,fieldsBunch:s}=n,{Select:c}=useComponentsContext(),u=by_date_field_item_useOptions(o,t,s),d=(0,_e.useCallback)((e=>{var t,a=(t=e,tt()(t)?t.value:t);r(by_date_field_item_objectSpread(by_date_field_item_objectSpread({},n),{},{fieldsBunch:a}))}),[r,n]),h=(0,_e.useCallback)((e=>r(by_date_field_item_objectSpread(by_date_field_item_objectSpread({},n),{},{color:e}))),[r,n]);return a.createElement("div",{className:"bl-calendar-visualization--color-label-by-date-fields-item"},a.createElement(ColorInputContainer,{onChange:h,value:l}),a.createElement(c,{value:s&&(0,Oe.nY)(s),onChange:d,options:u,autoFocus:!0,block:!0,size:"small"}))}var by_date_field_item_useOptions=(e,t,n)=>(0,_e.useMemo)((()=>{var r=t.map((e=>e.fieldsBunch)),a=getDateFieldsToFieldsBunches(e);return(0,Oe.fG)(a,r,n)}),[e,t,n]);function by_date_field_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function by_date_field_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?by_date_field_ownKeys(Object(n),!0).forEach((function(t){by_date_field_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):by_date_field_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function by_date_field_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nn=a.createElement(a.Fragment,null,a.createElement("div",null,"If the event matches the condition above and gets a color, it will be overridden by the conditions above."));function ByDateFields(e){var t,{onChange:n,expandedSection:r,onSectionExpandedChange:o,dateFields:l,usedColors:s,error:c,validated:u}=e,{FontIcon:d}=useComponentsContext(),{value:h,apply:p}=e.value,g=function by_date_field_useInitialValueCreator(e){return(0,_e.useCallback)((()=>({color:Pn.generateHexColor(e),fieldsBunch:null})),[e])}(s),b=l.length,m=!(t=h,t.length>0&&t.every((e=>{var{fieldsBunch:t}=e;return!!t}))&&b!==h.length),v=(0,_e.useCallback)(((e,t)=>{o("byDateFields",t)}),[o]),y=(0,_e.useCallback)((t=>{t.length||n(by_date_field_objectSpread(by_date_field_objectSpread({},e.value),{},{value:[]}))}),[n,e.value]),_=(0,_e.useCallback)((t=>n(by_date_field_objectSpread(by_date_field_objectSpread({},e.value),{},{value:t}))),[n,e.value]),O=(0,_e.useCallback)((()=>{n(by_date_field_objectSpread(by_date_field_objectSpread({},e.value),{},{apply:!p}))}),[n,e.value,p]),E=(0,_e.useStopPropagation)(O),x=!l.length;return a.createElement(AccordionSection,{expanded:r,onExpandedChange:v,disabled:x,id:"byDateFields",applied:p,onVisibilityClick:E,helpContent:Nn,label:"Date Fields",error:u&&c?1:0,contentDescription:"Color events based on the data fields they use"},a.createElement("div",{className:"bl-calendar-visualization--labels-color-modal--by-date-fields"},a.createElement(Dt.Z,{FontIconComponent:d,values:h,onChange:_,initialValue:g,modern:!0,max:b,readOnly:m,onRemoveClick:y,showRemoveBtnRequired:!0},a.createElement(item_ColorItem,{usedItems:h,dateFields:l}))))}function event_labels_color_modal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function event_labels_color_modal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?event_labels_color_modal_ownKeys(Object(n),!0).forEach((function(t){event_labels_color_modal_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):event_labels_color_modal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function event_labels_color_modal_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ln={byCondition:!1,byDateFields:!1,byFields:!1};function modal_EventLabelCustomizerModal(e){var{onChange:t,onHide:n,show:r,filterableColumns:o,coloredColumns:l,dateFields:s,value:c}=e,{LocalStorageManager:u,components:d}=(0,_e.useContext)(Se),{Button:h}=d,[p,g]=(0,_e.useObjectState)({value:c,validated:!1,error:{},expandedSections:(null==u?void 0:u.getCalendarLabelsColorsExpandedSections())||Ln}),{value:b,error:m,validated:v,expandedSections:y}=p,{byFields:_,byCondition:O,byDateFields:E}=b,x=function useUsedColors(e,t){return(0,_e.useMemo)((()=>{var n=[];return e.value.forEach((e=>{var{color:t}=e;return n.push(t)})),t.value.forEach((e=>{var{color:t}=e;return n.push(t)})),n}),[e,t])}(O,E);(0,_e.useEffect)((()=>{var e=function validateColorSections(e,t){var{byCondition:n,byDateFields:r}=e,a={};return n.value.forEach((e=>{var{conditions:n,color:r}=e,o=(0,dn.F)(n)||validateColorsDuplicate(r,t);o&&(a.byCondition={[r]:o})})),r.value.forEach((e=>{var{color:n}=e,r=validateColorsDuplicate(n,t);r&&(a.byDateFields={[n]:r})})),a}({byCondition:O,byDateFields:E},x);Object.keys(e).length?g({error:e}):g({error:{}})}),[O,E]);var S=function useStorageExpandedSectionsUpdated(e,t){return(0,_e.useCallback)((n=>{var{byCondition:r,byFields:a,byDateFields:o}=e,l={byCondition:r,byFields:a,byDateFields:o};n.byCondition.value.forEach((t=>{var{color:n}=t;e[n]&&(l[n]=e[n])})),null==t||t.setCalendarLabelsColorsExpandedSections(l)}),[e,t])}(y,u),w=(0,_e.useCallback)(((e,t)=>{g({value:event_labels_color_modal_objectSpread(event_labels_color_modal_objectSpread({},b),{},{[e]:t})})}),[b]),C=(0,_e.useCallback)((e=>w("byFields",e)),[w]),D=(0,_e.useCallback)((e=>w("byCondition",e)),[w]),P=(0,_e.useCallback)((e=>w("byDateFields",e)),[w]),T=(0,_e.useCallback)((()=>g({value:qt.Z.DefaultModel.labelsColors})),[]),k=(0,_e.useMemo)((()=>function event_labels_color_modal_normalizeValue(e){var t=e.byFields.value.filter((e=>null!==e)),n=function normalizeValueByCondition(e){var t=[];return e.forEach((e=>{var n=function normalizeCondition(e){var t=[];return e.forEach(((n,r)=>{var{columnName:a,operator:o,conditionValue:l,combinator:s}=n;if(1!==e.length||a){var c=e.length-1===r;!c||a?(s=c?null:s||"AND",t.push({columnName:a,operator:o,conditionValue:l,combinator:s})):t[r-1].combinator=null}})),t}(e.conditions);n.length&&t.push(event_labels_color_modal_objectSpread(event_labels_color_modal_objectSpread({},e),{},{conditions:n}))})),t}(e.byCondition.value),r=e.byDateFields.value.filter((e=>{var{fieldsBunch:t}=e;return!!t}));return{byFields:event_labels_color_modal_objectSpread(event_labels_color_modal_objectSpread({},e.byFields),{},{value:t}),byCondition:event_labels_color_modal_objectSpread(event_labels_color_modal_objectSpread({},e.byCondition),{},{value:n}),byDateFields:event_labels_color_modal_objectSpread(event_labels_color_modal_objectSpread({},e.byDateFields),{},{value:r})}}({byFields:_,byCondition:O,byDateFields:E})),[_,O,E]),I=(0,_e.useMemo)((()=>(0,Xt.h)(c,k)),[k,c]),j=(0,_e.useCallback)((()=>{S(k),n()}),[n,S,k]),M=(0,_e.useCallback)((()=>{Object.keys(m).length||(t(k),S(k),n()),g({validated:!0})}),[n,t,m,S,k]),z=(0,_e.useCallback)(((e,t)=>{g({expandedSections:event_labels_color_modal_objectSpread(event_labels_color_modal_objectSpread({},y),{},{[e]:t})})}),[y]);return a.createElement(Ve.Z,{open:r,onClose:j,className:"bl-calendar-visualization--labels-color-modal bl-calendar-visualization-modal"},a.createElement(Ve.Z.Header,{title:"Event Label Color",onClose:j}),a.createElement(Ve.Z.Body,null,a.createElement(ByCondition,{onChange:D,value:O,columns:o,validated:v,error:m.byCondition,expandedSections:y,onSectionExpandedChange:z,usedColors:x}),a.createElement(ByFields,{onChange:C,value:_,columns:l,expandedSection:!(null==y||!y.byFields),onSectionExpandedChange:z}),a.createElement(ByDateFields,{onChange:P,value:E,expandedSection:!(null==y||!y.byDateFields),onSectionExpandedChange:z,dateFields:s,usedColors:x,validated:v,error:m.byDateFields})),a.createElement(Ve.Z.Footer,null,a.createElement(h,{onClick:T},"RESET ALL"),a.createElement(h,{onClick:j},"CANCEL"),a.createElement(h,{onClick:M,disabled:!I,primary:!0},"SAVE")))}function validateColorsDuplicate(e,t){if(t.filter((t=>t===e)).length>=2)return"Duplicate color"}function EventLabelColor(e){var{onChange:t,value:n,disabled:r,filterableColumns:o,coloredColumns:l,dateFields:s}=e,[c,u]=(0,_e.useState)(!1),{byFields:d,byCondition:h,byDateFields:p}=n,{FontIcon:g}=useComponentsContext(),b=(0,_e.useCallback)((()=>u(!0)),[]),m=(0,_e.useCallback)((()=>u(!1)),[]),v=d.value.length||h.value.length||p.value.length,y=r?"There is no way to coloring events without date fields and data columns without colored data type":"Labels Color";return a.createElement(Ce.Z.ButtonContainer,{isActive:v,isDisabled:r},a.createElement(ke.Z,{onClick:b,tooltip:y,disabled:r},a.createElement(g,{icon:Ee.gW.CUSTOMIZE_LABEL_COLOR})),c&&a.createElement(modal_EventLabelCustomizerModal,{show:c,onHide:m,onChange:t,filterableColumns:o,coloredColumns:l,value:n,dateFields:s}))}var Rn=n(31267);function toolbar_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function toolbar_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?toolbar_ownKeys(Object(n),!0).forEach((function(t){toolbar_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):toolbar_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function toolbar_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fn={[De.AT.AGGREGATIONS]:!1,[De.AT.GROUP_BY]:!1,[De.AT.SORT_BY]:!1};function CalendarToolbar(e){var{query:t,calendarModel:n,onQueryChange:r,onModelChange:o,dataSource:l,loadingStatus:s}=e,{labelsCustomization:c,labelsColors:u,dateFields:d,initTimestamp:h}=n,{components:p,LocalStorageManager:g,columns:b,featureToggle:m}=(0,_e.useContext)(Se),v=(0,_e.useCallback)((e=>o({labelsCustomization:e})),[o]),y=(0,_e.useCallback)((e=>o({labelsColors:e})),[o]),_=function useDateFieldsChanger(e,t,n,r){return(0,_e.useCallback)((a=>{var o=getDateFieldsToFieldsBunches(a),l=t.byDateFields.value.filter((e=>{var{fieldsBunch:t}=e;return o.includes(t)})),s=toolbar_objectSpread(toolbar_objectSpread({},t),{},{byDateFields:toolbar_objectSpread(toolbar_objectSpread({},t.byDateFields),{},{value:l})}),c=(0,Rn.xp)(a)?{pageSize:null,optimizeWhereClause:(0,Rn.E6)(r,a)}:{pageSize:0};e({dateFields:a,labelsColors:s}),n(c)}),[e,t,n,r])}(o,u,r,h),O=function useFilterableColumns(e){return(0,_e.useMemo)((()=>e.filter((e=>{var{type:t}=e;return Ee.O$.includes(t)}))),[e])}(b),E=function useColorColumns(e){return(0,_e.useMemo)((()=>e.filter((e=>{var t,n,r=null==e||null===(t=e.metaInfo)||void 0===t||null===(n=t.localData)||void 0===n?void 0:n.type;if(r===Ee.oS.COLOR_PICKER)return!0;if(r===Ee.oS.MULTIPLE_CHOICE){var a,o,l,s=null==e||null===(a=e.metaInfo)||void 0===a||null===(o=a.localData)||void 0===o||null===(l=o.multipleChoice)||void 0===l?void 0:l.rules,c=null==s?void 0:s.isColored,u=null==s?void 0:s.isMultipleSelection;return c&&!u}}))),[e])}(b),x=function useDateColumns(e){return(0,_e.useMemo)((()=>e.filter((e=>{var{type:t}=e;return Ee.oS.DATETIME===t}))),[e])}(b);return a.createElement(Ce.Z,{loadingStatus:s},m.dateFields&&a.createElement(date_fields_DateFields,{value:d,columns:x,onChange:_,disabled:!x.length}),m.labelsCustomization&&a.createElement(EventLabelCustomizer,{value:c,columns:b,onChange:v,disabled:!b.length}),m.labelsColors&&a.createElement(EventLabelColor,{value:u,coloredColumns:E,filterableColumns:O,onChange:y,dateFields:d,disabled:!E.length&&!O.length&&!d.length}),m.dataSettings&&a.createElement(we.Z,{modalClassName:"bl-calendar-visualization-modal",dataSource:l,query:t,columns:b,filterableColumns:O,onQueryChange:r,components:p,LocalStorageManager:g,hideAdvanced:!m.dataSettingsAdvanced,options:Fn}),m.dataEditing&&a.createElement(DateFields,{disabled:!b.length,initTimestamp:h,dateFields:d,labelsCustomization:c}))}var Bn=n(85019),Wn={};Wn.styleTagTransform=y(),Wn.setAttributes=g(),Wn.insert=h().bind(null,"head"),Wn.domAPI=u(),Wn.insertStyleElement=m();s()(Bn.Z,Wn);Bn.Z&&Bn.Z.locals&&Bn.Z.locals;var Hn=n(78916),Zn=n(61800),Vn=n(99490),Kn=n(78531);function WeeksDay(e){var{weekDayName:t,date:n,isToday:r}=e,o=(0,Me.cn)("bl-calendar-weeks-day-date",{"bl-calendar-weeks-day-date--today":r});return a.createElement("div",{className:"bl-calendar-weeks-day-container"},a.createElement("div",{className:"bl-calendar-weeks-day"},t),n&&a.createElement("div",{className:o},n))}const Yn=(0,a.memo)(WeeksDay);function WeeksDays(e){var{timeScale:t,startWeekDataSet:n}=e,r=useWeekDaysDataSet(t,n);return a.createElement("div",{className:"bl-calendar-weeks"},r.map((e=>{var{weekDayName:t,date:n,isToday:r}=e;return a.createElement(Yn,{weekDayName:t,date:n,key:t,isToday:r})})))}var Gn=Vn.kI.weekdays("short").map((e=>Kn.x.capitalizeFirstLetter(e))),useWeekDaysDataSet=(e,t)=>(0,_e.useMemo)((()=>e===nn.L7.MONTH||e===nn.L7.TWO_WEEK?t.map((e=>{var{dayInfo:t}=e,{weekDay:n,weekend:r}=t;return{weekDayName:Gn[n-1],weekend:r}})):t.map((e=>{var{dayInfo:t}=e,{weekDay:n,date:r,weekend:a,isToday:o}=t;return{weekDayName:Gn[n-1],date:r,weekend:a,isToday:o}}))),[e,t]),Un=n(12699),$n={};$n.styleTagTransform=y(),$n.setAttributes=g(),$n.insert=h().bind(null,"head"),$n.domAPI=u(),$n.insertStyleElement=m();s()(Un.Z,$n);Un.Z&&Un.Z.locals&&Un.Z.locals;var Xn=n(79728),qn={};qn.styleTagTransform=y(),qn.setAttributes=g(),qn.insert=h().bind(null,"head"),qn.domAPI=u(),qn.insertStyleElement=m();s()(Xn.Z,qn);Xn.Z&&Xn.Z.locals&&Xn.Z.locals;var Qn=27;var Jn="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;function DragSourceImpl_typeof(e){return DragSourceImpl_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DragSourceImpl_typeof(e)}function DragSourceImpl_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var er=function(){function DragSourceImpl(e,t,n){!function DragSourceImpl_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DragSourceImpl),this.spec=e,this.monitor=t,this.connector=n}return function DragSourceImpl_createClass(e,t,n){return t&&DragSourceImpl_defineProperties(e.prototype,t),n&&DragSourceImpl_defineProperties(e,n),e}(DragSourceImpl,[{key:"beginDrag",value:function beginDrag(){var e,t=this.spec,n=this.monitor;return null!==(e="object"===DragSourceImpl_typeof(t.item)?t.item:"function"==typeof t.item?t.item(n):{})&&void 0!==e?e:null}},{key:"canDrag",value:function canDrag(){var e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}},{key:"isDragging",value:function isDragging(e,t){var n=this.spec,r=this.monitor,isDragging=n.isDragging;return isDragging?isDragging(r):t===e.getSourceId()}},{key:"endDrag",value:function endDrag(){var e=this.spec,t=this.monitor,n=this.connector,r=e.end;r&&r(t.getItem(),t),n.reconnect()}}]),DragSourceImpl}();function useDragDropManager(){var e=(0,a.useContext)(ee).dragDropManager;return invariant(null!=e,"Expected drag drop context"),e}function useRegisteredDragSource_slicedToArray(e,t){return function useRegisteredDragSource_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function useRegisteredDragSource_iterableToArrayLimit(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function useRegisteredDragSource_unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return useRegisteredDragSource_arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useRegisteredDragSource_arrayLikeToArray(e,t)}(e,t)||function useRegisteredDragSource_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useRegisteredDragSource_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function useRegisteredDragSource(e,t,n){var r=useDragDropManager(),o=function useDragSource(e,t,n){var r=(0,a.useMemo)((function(){return new er(e,t,n)}),[t,n]);return(0,a.useEffect)((function(){r.spec=e}),[e]),r}(e,t,n),l=function useDragType(e){return(0,a.useMemo)((function(){var t=e.type;return invariant(null!=t,"spec.type must be defined"),t}),[e])}(e);Jn((function registerDragSource(){if(null!=l){var e=function registerSource(e,t,n){var r=n.getRegistry(),a=r.addSource(e,t);return[a,function(){return r.removeSource(a)}]}(l,o,r),a=useRegisteredDragSource_slicedToArray(e,2),s=a[0],c=a[1];return t.receiveHandlerId(s),n.receiveHandlerId(s),c}}),[r,t,n,o,l])}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return useOptionalFactory_arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function useOptionalFactory_unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return useOptionalFactory_arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useOptionalFactory_arrayLikeToArray(e,t)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useOptionalFactory_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function useOptionalFactory(e,t){var n=_toConsumableArray(t||[]);return null==t&&"function"!=typeof e&&n.push(e),(0,a.useMemo)((function(){return"function"==typeof e?e():e}),n)}function DragSourceMonitorImpl_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var tr=!1,nr=!1,rr=function(){function DragSourceMonitorImpl(e){!function DragSourceMonitorImpl_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DragSourceMonitorImpl),this.sourceId=null,this.internalMonitor=e.getMonitor()}return function DragSourceMonitorImpl_createClass(e,t,n){return t&&DragSourceMonitorImpl_defineProperties(e.prototype,t),n&&DragSourceMonitorImpl_defineProperties(e,n),e}(DragSourceMonitorImpl,[{key:"receiveHandlerId",value:function receiveHandlerId(e){this.sourceId=e}},{key:"getHandlerId",value:function getHandlerId(){return this.sourceId}},{key:"canDrag",value:function canDrag(){invariant(!tr,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return tr=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{tr=!1}}},{key:"isDragging",value:function isDragging(){if(!this.sourceId)return!1;invariant(!nr,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return nr=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{nr=!1}}},{key:"subscribeToStateChange",value:function subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function getTargetIds(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function isSourcePublic(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function getSourceId(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function canDragSource(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function getItemType(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function getItem(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function getDropResult(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function didDrop(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function getClientOffset(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),DragSourceMonitorImpl}();function throwIfCompositeComponentElement(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function wrapConnectorHooks(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var o=function wrapHookToRecognizeElement(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,a.isValidElement)(t)){var r=t;return e(r,n),r}var o=t;throwIfCompositeComponentElement(o);var l=n?function(t){return e(t,n)}:e;return cloneWithRef(o,l)}}(r);t[n]=function(){return o}}})),t}function setRef(e,t){"function"==typeof e?e(t):e.current=t}function cloneWithRef(e,t){var n=e.ref;return invariant("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?(0,a.cloneElement)(e,{ref:function ref(e){setRef(n,e),setRef(t,e)}}):(0,a.cloneElement)(e,{ref:t})}function isRef_typeof(e){return isRef_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},isRef_typeof(e)}function isRef(e){return null!==e&&"object"===isRef_typeof(e)&&Object.prototype.hasOwnProperty.call(e,"current")}function shallowEqual(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),l=Object.keys(t);if(o.length!==l.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var u=o[c];if(!s(u))return!1;var d=e[u],h=t[u];if(!1===(a=n?n.call(r,d,h,u):void 0)||void 0===a&&d!==h)return!1}return!0}function SourceConnector_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ar=function(){function SourceConnector(e){var t=this;!function SourceConnector_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SourceConnector),this.hooks=wrapConnectorHooks({dragSource:function dragSource(e,n){t.clearDragSource(),t.dragSourceOptions=n||null,isRef(e)?t.dragSourceRef=e:t.dragSourceNode=e,t.reconnectDragSource()},dragPreview:function dragPreview(e,n){t.clearDragPreview(),t.dragPreviewOptions=n||null,isRef(e)?t.dragPreviewRef=e:t.dragPreviewNode=e,t.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}return function SourceConnector_createClass(e,t,n){return t&&SourceConnector_defineProperties(e.prototype,t),n&&SourceConnector_defineProperties(e,n),e}(SourceConnector,[{key:"receiveHandlerId",value:function receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"connectTarget",get:function get(){return this.dragSource}},{key:"dragSourceOptions",get:function get(){return this.dragSourceOptionsInternal},set:function set(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function get(){return this.dragPreviewOptionsInternal},set:function set(e){this.dragPreviewOptionsInternal=e}},{key:"reconnect",value:function reconnect(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function reconnectDragSource(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function reconnectDragPreview(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();t&&this.disconnectDragPreview(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.lastConnectedDragPreview=e)}},{key:"didHandlerIdChange",value:function didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function didDragSourceOptionsChange(){return!shallowEqual(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function didDragPreviewOptionsChange(){return!shallowEqual(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function get(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function get(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),SourceConnector}();var ir=n(52690),or=n.n(ir);function useCollector_slicedToArray(e,t){return function useCollector_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function useCollector_iterableToArrayLimit(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function useCollector_unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return useCollector_arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useCollector_arrayLikeToArray(e,t)}(e,t)||function useCollector_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useCollector_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function useMonitorOutput_slicedToArray(e,t){return function useMonitorOutput_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function useMonitorOutput_iterableToArrayLimit(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function useMonitorOutput_unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return useMonitorOutput_arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useMonitorOutput_arrayLikeToArray(e,t)}(e,t)||function useMonitorOutput_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useMonitorOutput_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function useMonitorOutput(e,t,n){var r=function useCollector(e,t,n){var r=useCollector_slicedToArray((0,a.useState)((function(){return t(e)})),2),o=r[0],l=r[1],s=(0,a.useCallback)((function(){var r=t(e);or()(o,r)||(l(r),n&&n())}),[o,e,n]);return Jn(s),[o,s]}(e,t,n),o=useMonitorOutput_slicedToArray(r,2),l=o[0],s=o[1];return Jn((function subscribeToMonitorStateChange(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(s,{handlerIds:[t]})}),[e,s]),l}function useCollectedProps(e,t,n){return useMonitorOutput(t,e||function(){return{}},(function(){return n.reconnect()}))}function useConnectDragSource(e){return(0,a.useMemo)((function(){return e.hooks.dragSource()}),[e])}function useConnectDragPreview(e){return(0,a.useMemo)((function(){return e.hooks.dragPreview()}),[e])}function useDrag(e,t){var n=useOptionalFactory(e,t);invariant(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var r=function useDragSourceMonitor(){var e=useDragDropManager();return(0,a.useMemo)((function(){return new rr(e)}),[e])}(),o=function useDragSourceConnector(e,t){var n=useDragDropManager(),r=(0,a.useMemo)((function(){return new ar(n.getBackend())}),[n]);return Jn((function(){r.dragSourceOptions=e||null,r.reconnect()}),[r,e]),Jn((function(){r.dragPreviewOptions=t||null,r.reconnect()}),[r,t]),r}(n.options,n.previewOptions);return useRegisteredDragSource(n,r,o),[useCollectedProps(n.collect,r,o),useConnectDragSource(o),useConnectDragPreview(o)]}function geoRenderer(e){return e&&"object"==typeof e?Le.convertToWKT(e):e}var lr={[Ee.oS.GEOMETRY]:geoRenderer,[Ee.oS.LINESTRING]:geoRenderer,[Ee.oS.POINT]:geoRenderer,[Ee.oS.POLYGON]:geoRenderer,[Ee.oS.BOOLEAN]:function booleanRenderer(e){return"boolean"==typeof e?""+e:e}};var sr={[nn.eE.SMALL]:"1",[nn.eE.MEDIUM]:"2",[nn.eE.LARGE]:"3"},cr={[nn.eE.SMALL]:8.5,[nn.eE.MEDIUM]:12,[nn.eE.LARGE]:15},ur={[nn.eE.SMALL]:7,[nn.eE.MEDIUM]:9,[nn.eE.LARGE]:12};function EventComponent(e){var t,n,r,{data:o,style:l,labelsCustomization:s,hasFinishSegment:c=!0,hasStartSegment:u=!0,id:d}=e,{verticalView:h,calendarVerticalMode:p,dateField:g,isFinishSegment:b,isStartSegment:m}=e,{onEventDragStart:v,draggingEvent:y,onEventDragEnd:_,onEventResizeStart:O,resizingEvent:E}=e,{size:x}=s,{startEventField:S,finishEventField:w}=g,{components:C,featureToggle:D,columnsByName:P}=(0,_e.useContext)(Se),{FontIcon:T}=C,{dataEditing:k}=D,I=function useDraggingHorizontalMode(e,t,n){var[{isDragging:r,startPosition:a},o]=useDrag((()=>({type:nn.yP.EVENT,item:n,end:(e,n)=>t(n.getClientOffset(),e),collect:e=>({isDragging:!!e.isDragging(),startPosition:e.getInitialClientOffset()})})),[t,n]);return(0,_e.useEffect)((()=>{r&&e(a,n)}),[r]),o}(v,_,e),j=k&&c&&O&&w&&!(null!==(t=P[w])&&void 0!==t&&t.readOnly),M=k&&v&&!(null!==(n=P[S])&&void 0!==n&&n.readOnly)&&!(null!==(r=P[w])&&void 0!==r&&r.readOnly),z=M&&p&&!!v,A=M&&!p,N=O&&(t=>O(t,e)),L=(0,_e.useMemo)((()=>{if(z&&v)return t=>v(t,e)}),[z,v,e]),[R,F]=(0,_e.useState)(!1),B=function useHide(e,t){var[n,r]=(0,_e.useState)(!1);return(0,_e.useEffect)((()=>{var n=(null==e?void 0:e.id)===t;setTimeout((()=>r(n)),1)}),[e]),n}(y||E,d),W=(0,_e.useCallback)((()=>F(!0)),[]),H=(0,_e.useCallback)((()=>F(!1)),[]),{displayContinueArrow:Z,useInlineMode:V}=function useContentFormat(e,t){var{top:n,bottom:r}=e;return(0,_e.useMemo)((()=>{var e=cr[t],a=ur[t],o=nn.X[t],l=Math.abs(n+r),s=e+a+o,c={displayContinueArrow:!0,useInlineMode:!1};if(l>s)return c;var u=e+o;return c.displayContinueArrow=s<l,c.useInlineMode=u>l,c}),[n,r,t])}(l,x),K=!h||Z,Y=(0,Me.cn)("bl-calendar-visualization--event","bl-calendar-visualization--event--size-".concat(sr[x]),{"bl-calendar-visualization--event--has-not-start":!u,"bl-calendar-visualization--event--has-not-finish":!c,"bl-calendar-visualization--event--vertical-view":h,"bl-calendar-visualization--event--hidden":B,"bl-calendar-visualization--event--ghost":!!E}),G=(0,Me.cn)("bl-calendar-visualization--event-label-container",{"bl-calendar-visualization--event-label-container--inline":V}),U=(0,Me.cn)("bl-calendar-visualization--event-resize-anchor",{"bl-calendar-visualization--event-resize-anchor--vertical":h}),X={height:cr[x],maxHeight:cr[x]},Q={height:ur[x],maxHeight:ur[x]},Arrow=(e,t)=>{var n=t?Ee.gW.ARROW_DOWN:Ee.gW.ARROW_RIGHT;return a.createElement("div",{className:e,style:Q},a.createElement(T,{className:"bl-calendar-visualization--event--continue-icon",icon:n,style:{color:l.color}}))},J=(0,_e.useMemo)((()=>{var e=a.createElement(T,{icon:Ee.gW.ARROW_RIGHT,style:{color:l.color}});return function getTimeDurationTitle(e,t,n,r,o){var{startEventField:l,finishEventField:s}=e,c=l?t[l]:null,u=s?t[s]:null;if(!u&&c)return a.createElement(a.Fragment,null,getDateFormat(c));if(!n&&r)return a.createElement(a.Fragment,null,getDateFormat(c)," ",o);if(!r&&n)return a.createElement(a.Fragment,null,o," ",getDateFormat(u));if(!r&&!n)return null;return a.createElement(a.Fragment,null,getDateFormat(c)," - ",getDateFormat(u))}(g,o,b,m,e)}),[g,o,b,m,l.color]),ee=(0,_e.useMemo)((()=>[g]),[g]);return a.createElement("div",null,a.createElement("div",{ref:e=>{A&&I(e)},className:Y,style:l,onClick:W,onDragStart:L,draggable:z},!u&&K&&Arrow("bl-calendar-visualization--event--continue bl-calendar-visualization--event--continue-before",h),a.createElement("div",{className:G},a.createElement("div",{className:"bl-calendar-visualization--event-label"},s.fields.map((e=>a.createElement("span",{className:"bl-calendar-visualization--event-custom-label",key:e},function getLabel(e,t,n){var r,a,o=n[e],l=(null===(r=o.metaInfo)||void 0===r||null===(a=r.localData)||void 0===a?void 0:a.type)||o.type,s=lr[l],c=t[e];return s?s(c):c}(e,o,P))))),h&&J&&!V&&a.createElement("div",{className:"bl-calendar-visualization--event-label bl-calendar-visualization--event-label-time",style:X},J)),!c&&K&&Arrow("bl-calendar-visualization--event--continue bl-calendar-visualization--event--continue-after",h),j&&a.createElement("div",{className:U,onMouseDown:N})),a.createElement(EventEditorModal,{show:R,data:o,onHide:H,labelsCustomization:s,dateFields:ee}))}function getDateFormat(e){var t=new Date(e);return new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"numeric"}).format(t)}function menu_extends(){return menu_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},menu_extends.apply(this,arguments)}function menu_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function menu_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?menu_ownKeys(Object(n),!0).forEach((function(t){menu_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):menu_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function menu_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var getEventStyle=e=>{var{backgroundColor:t,textColor:n}=e;return{height:nn.X[nn.eE.LARGE],background:t,color:n}};function Menu(e){var{onClickAway:t,onMenuKeyDown:n,dayInfo:r,events:o,onEventDragStart:l,draggingEvent:s,onEventDragEnd:c}=e,{calendarVerticalMode:u}=e,d=(0,_e.useRef)(null),{FontIcon:h}=useComponentsContext();(0,_e.useEffect)((()=>{d.current&&d.current.focus()}),[]);var p=function useDateTitle(e){return(0,_e.useMemo)((()=>{var t={month:"long",day:"numeric",weekday:"long"};return new Intl.DateTimeFormat(void 0,t).format(e)}),[e])}(r.startTimestamp),g=menu_objectSpread(menu_objectSpread({},e.labelsCustomization),{},{size:[nn.eE.LARGE]});return a.createElement(st.Z.Paper,{classes:{root:"bl-calendar-visualization--grid-row-cell--show-more-menu"}},a.createElement(st.Z.ClickAwayListener,{onClickAway:t},a.createElement("div",{tabIndex:"0",ref:d,onKeyDown:n,className:"bl-calendar-visualization--grid-row-cell--show-more-menu-container"},a.createElement("div",{className:"bl-calendar-visualization--grid-row-cell--show-more-menu-container-header"},a.createElement("div",{className:"bl-calendar-visualization--grid-row-cell--show-more-menu-container-header-content"},a.createElement("div",null,p),a.createElement(h,{icon:Ee.gW.MULTIPLE_CONTROLS_REMOVE,onClick:t,action:!0}))),a.createElement("div",{className:"bl-calendar-visualization--grid-row-cell--show-more-menu-container--events"},o.map((e=>a.createElement(EventComponent,menu_extends({},e,{onEventDragEnd:c,onEventDragStart:l,style:getEventStyle(e),key:e.id,labelsCustomization:g,draggingEvent:s,hasFinishSegment:!0,hasStartSegment:!0,calendarVerticalMode:u}))))))))}function ShowMore(e){var{dayInfo:t,events:n,labelsCustomization:r,label:o,onEventDragStart:l,draggingEvent:s,onEventDragEnd:c}=e,{calendarVerticalMode:u}=e,[d,h]=(0,_e.useState)(!1),p=(0,_e.useRef)(null),{rootRef:g}=(0,_e.useContext)(Se),b=(0,_e.useCallback)((()=>{h((e=>!e))}),[]),m=(0,_e.useCallback)((e=>{p.current&&p.current.contains(e.target)||h(!1)}),[p]),v=(0,_e.useCallback)((e=>{e.keyCode===Qn&&h(!1)}),[]),y=function usePopperModifiers(e){return(0,_e.useMemo)((()=>({preventOverflow:{enabled:!0,boundariesElement:e},keepTogether:{enabled:!0}})),[e])}(g.current),_=o||"+".concat(n.length," more"),O=(0,Me.cn)("bl-calendar-visualization--show-more-menu",{"bl-calendar-visualization--show-more-menu--hide":!!s});return a.createElement("div",null,a.createElement("div",{ref:p,className:"bl-calendar-visualization--grid-row-cell--show-more",onClick:b},_),a.createElement(st.Z.Popper,{open:d,anchorEl:p.current,modifiers:y,className:O},a.createElement(Menu,{onMenuKeyDown:v,onClickAway:m,dayInfo:t,events:n,labelsCustomization:r,onEventDragStart:l,onEventDragEnd:c,draggingEvent:s,calendarVerticalMode:u})))}function AllDayEventsButton(e){var{dayInfo:t,events:n,width:r,labelsCustomization:o}=e,l=!!n&&!!n.length,s=(0,Me.cn)("bl-calendar-visualization--all-day-events--item",{"bl-calendar-visualization--all-day-events--item--with-value":l});return a.createElement("td",{className:s,style:{width:r}},l&&a.createElement(ShowMore,{dayInfo:t,events:n,labelsCustomization:o}))}function all_day_events_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function all_day_events_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?all_day_events_ownKeys(Object(n),!0).forEach((function(t){all_day_events_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):all_day_events_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function all_day_events_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AllDayEventsContainer(e){var{gridDataSet:t,labelsCustomization:n}=e,r=(0,_e.useMemo)((()=>t[0]&&t[0].map((e=>{var t=e.events.filter((e=>{var{isStartSegment:t,isFinishSegment:n}=e;return!t&&!n}));return all_day_events_objectSpread(all_day_events_objectSpread({},e),{},{events:t})}))),[t]),o="".concat(100/r.length,"%");return a.createElement("div",{className:"bl-calendar-visualization--all-day-events-container"},a.createElement("div",{className:"bl-calendar-visualization--all-day-events--title"},"ALL DAY"),a.createElement("table",{className:"bl-calendar-visualization--all-day-events--items-list"},a.createElement("tbody",null,a.createElement("tr",null,r.map((e=>{var{dayInfo:t,events:r}=e;return a.createElement(AllDayEventsButton,{key:t.startTimestamp,dayInfo:t,events:r,width:o,labelsCustomization:n})}))))))}var dr=n(36812),hr={};hr.styleTagTransform=y(),hr.setAttributes=g(),hr.insert=h().bind(null,"head"),hr.domAPI=u(),hr.insertStyleElement=m();s()(dr.Z,hr);dr.Z&&dr.Z.locals&&dr.Z.locals;var pr={[nn.L7.MONTH]:{year:"numeric",month:"long"},[nn.L7.WEEK]:{month:"long",day:"numeric"},[nn.L7.DAY]:{month:"long",day:"numeric",year:"numeric",weekday:"long"}};function Title(e){var{gridDataSet:t,timeScale:n,initTimestamp:r}=e,o=useTitle(t,n,r);return a.createElement("div",{className:"bl-calendar-visualization--navigator-title"},o)}var title_getDateFormat=(e,t)=>{var n=new Date(e);return new Intl.DateTimeFormat(void 0,pr[t]).format(n)},useTitle=(e,t,n)=>{var r=(e=>e[0][0])(e),a=(e=>{var t=e[e.length-1];return t[t.length-1]})(e),o=r.dayInfo.startTimestamp,l=a.dayInfo.startTimestamp;return(0,_e.useMemo)((()=>{if(t===nn.L7.MONTH)return title_getDateFormat(n,nn.L7.MONTH);if(t===nn.L7.TWO_WEEK||t===nn.L7.WEEK||t===nn.L7.THREE_DAY){var e=title_getDateFormat(o,nn.L7.WEEK),r=title_getDateFormat(l,nn.L7.WEEK);return"".concat(e," - ").concat(r)}return t===nn.L7.DAY?title_getDateFormat(o,nn.L7.DAY):void 0}),[t,o,l,n])};function OffsetButton(e){var{onChange:t,increase:n}=e,{FontIcon:r}=useComponentsContext(),o=(0,_e.useMemo)((()=>{var e=["bl-calendar-visualization--navigator-control","bl-calendar-visualization--navigator-control-offset","bl-calendar-visualization--navigator-control-offset-".concat(n)];return(0,Me.cn)(e)}),[n]),l=(0,_e.useCallback)((()=>t(br)),[t]),s=(0,_e.useCallback)((()=>t(mr)),[t]),c=n===mr?Ee.gW.FOOTER_PAGING_RIGHT:Ee.gW.FOOTER_PAGING_LEFT,u=n===mr?s:l;return a.createElement("button",{onClick:u,className:o},a.createElement(r,{icon:c}))}const gr=(0,a.memo)(OffsetButton);function DatePickerButton(e){var{onChange:t,value:n}=e,{DatePickerButton:r}=useComponentsContext();return a.createElement(r,{value:n,onChange:t,className:"bl-calendar-visualization--navigator-control bl-calendar-visualization--navigator-control--date-picker",icon:Ee.gW.CALENDAR_MONTH})}const fr=(0,a.memo)(DatePickerButton);var br="dec",mr="inc";function ControlPanel(e){var{initTimestamp:t,timeScale:n,onModelChange:r,onQueryChange:o,dateFields:l}=e,{Select:s}=useComponentsContext(),c=(0,_e.useCallback)((()=>{r({initTimestamp:zn.E.getTodayStart()})}),[r]),u=(0,_e.useCallback)((e=>{var{value:t}=e;return r({timeScale:t})}),[r]),d=function useRangeChanger(e,t,n,r,a){var o=(0,_e.useHelpers)((()=>{var{startRangeDate:e,endRangeDate:n}=(0,Rn.TO)(t);return{prevStartRangeDate:e,prevEndRangeDate:n}}));return(0,_e.useCallback)((l=>{var{startRangeDate:s,endRangeDate:c}=(0,Rn.TO)(t),u=vr[n](t,l);if(e({initTimestamp:u}),s!==o.prevStartRangeDate||c!==o.prevEndRangeDate){o.prevStartRangeDate=s,o.prevEndRangeDate=c;var d=(0,Rn.E6)(u,a);r({optimizeWhereClause:d})}}),[e,t,n,r,a])}(r,t,n,o,l),h=function useDatePickerChanger(e,t,n){return(0,_e.useCallback)((r=>{e({initTimestamp:r});var a=(0,Rn.E6)(r,n);t({optimizeWhereClause:a})}),[e,t,n])}(r,o,l);return a.createElement("div",{className:"bl-calendar-visualization--navigator-control-panel"},a.createElement("button",{type:"button",onClick:c,className:"bl-calendar-visualization--navigator-control bl-calendar-visualization--navigator-control-today"},"Today"),a.createElement(s,{className:"bl-calendar-visualization--navigator-control bl-calendar-visualization--navigator-control-timescale",options:nn.L7.Options,value:n,size:"small",small:!0,onChange:u,menuClassName:"bl-calendar-visualization--navigator-control-timescale-menu",searchable:!1,classNamesPrefix:"bl-calendar-visualization--timescale-select"}),a.createElement("div",{className:"bl-calendar-visualization--navigator-control-offset-container"},a.createElement(gr,{onChange:d,increase:br}),a.createElement(gr,{onChange:d,increase:mr})),a.createElement(fr,{onChange:h,value:t}))}var vr={[nn.L7.DAY]:(e,t)=>t===mr?zn.E.getStartDayOfDaysAfter(1,e):zn.E.getStartDayOfDaysBefore(1,e),[nn.L7.THREE_DAY]:(e,t)=>vr[nn.L7.DAY](e,t),[nn.L7.WEEK]:(e,t)=>t===mr?zn.E.getStartDayOfWeeksAfter(1,e):zn.E.getStartDayOfWeeksBefore(1,e),[nn.L7.TWO_WEEK]:(e,t)=>vr[nn.L7.WEEK](e,t),[nn.L7.MONTH]:(e,t)=>t===mr?zn.E.getStartDayOfMonthsAfter(1,e):zn.E.getStartDayOfMonthsBefore(1,e)};function Navigator(e){var{gridDataSet:t,initTimestamp:n,timeScale:r,onModelChange:o,onQueryChange:l,dateFields:s}=e,{navigationControls:c}=useFeatureToggleContext();return a.createElement("div",{className:"bl-calendar-visualization--navigator"},a.createElement(Title,{gridDataSet:t,timeScale:r,initTimestamp:n}),c&&a.createElement(ControlPanel,{timeScale:r,dateFields:s,onModelChange:o,initTimestamp:n,onQueryChange:l}))}var yr=n(11570),_r={};_r.styleTagTransform=y(),_r.setAttributes=g(),_r.insert=h().bind(null,"head"),_r.domAPI=u(),_r.insertStyleElement=m();s()(yr.Z,_r);yr.Z&&yr.Z.locals&&yr.Z.locals;function timeline_events_builder_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function timeline_events_builder_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?timeline_events_builder_ownKeys(Object(n),!0).forEach((function(t){timeline_events_builder_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):timeline_events_builder_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function timeline_events_builder_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function buildPositioning(e,t,n){var r=new SegHierarchy;null!=n&&(r.strictOrder=n),null!=t&&(r.maxStackCnt=t);var a=function groupIntersectingEntries(e){var t=[];for(var n of e){var r=[],a={span:n.span,entries:[n]};for(var o of t)intersectSpans(o.span,a.span)?a={entries:o.entries.concat(a.entries),span:joinSpans(o.span,a.span)}:r.push(o);r.push(a),t=r}return t}(r.addSegs(e)),o=function buildWeb(e){var{entriesByLevel:t}=e,n=cacheable(((e,t)=>e+":"+t),((r,a)=>{var o=function findNextLevelSegs(e,t,n){for(var{levelCoords:r,entriesByLevel:a}=e,o=a[t][n],l=r[t]+o.thickness,s=t;s<r.length;s+=1)if(!(r[s]<l)){for(var c=a[s],u=binarySearch(c,o.span.start,getEntrySpanEnd),d=u[0]+u[1],h=d;c[h]&&c[h].span.start<o.span.end;)h+=1;if(d<h)return{level:s,lateralStart:d,lateralEnd:h}}return null}(e,r,a),l=buildNodes(o,n),s=t[r][a];return[timeline_events_builder_objectSpread(timeline_events_builder_objectSpread({},s),{},{nextLevelNodes:l[0]}),s.thickness+l[1]]}));return buildNodes(t.length?{level:0,lateralStart:0,lateralEnd:t[0].length}:null,n)[0]}(r);return{segRects:function webToRects(e){var t=[],n=cacheable(buildEntryKey,((e,n,r)=>{var a=timeline_events_builder_objectSpread(timeline_events_builder_objectSpread({},e),{},{levelCoord:n,stackDepth:r,stackForward:0});t.push(a);var o=processNodes(e.nextLevelNodes,n+e.thickness,r+1)+1;return a.stackForward=o,o}));function processNodes(e,t,r){var a=0;for(var o of e)a=Math.max(n(o,t,r),a);return a}return processNodes(e,0,0),t}(o=function stretchWeb(e,t){var n=cacheable(buildEntryKey,((e,r,a)=>{var o,{nextLevelNodes:l,thickness:s}=e,c=s+a,u=s/c,d=[];if(l.length)for(var h of l)if(void 0===o){var p=n(h,r,c);o=p[0],d.push(p[1])}else{var g=n(h,o,0);d.push(g[1])}else o=t;var b=(o-r)*u;return[o-b,timeline_events_builder_objectSpread(timeline_events_builder_objectSpread({},e),{},{thickness:b,nextLevelNodes:d})]}));return e.map((e=>n(e,0,0)[1]))}(o,1)),hiddenGroups:a}}function buildNodes(e,t){if(!e)return[[],0];for(var{level:n,lateralStart:r,lateralEnd:a}=e,o=[],l=r;l<a;)o.push(t(n,l)),l+=1;return o.sort(cmpDescPressures),[o.map(extractNode),o[0][1]]}class SegHierarchy{constructor(){timeline_events_builder_defineProperty(this,"strictOrder",!1),timeline_events_builder_defineProperty(this,"allowReSlicing",!1),timeline_events_builder_defineProperty(this,"maxCoord",-1),timeline_events_builder_defineProperty(this,"maxStackCnt",-1),timeline_events_builder_defineProperty(this,"levelCoords",[]),timeline_events_builder_defineProperty(this,"entriesByLevel",[]),timeline_events_builder_defineProperty(this,"stackCnts",{})}addSegs(e){var t=[];for(var n of e)this.insertEntry(n,t);return t}insertEntry(e,t){var n=this.findInsertion(e);return this.isInsertionValid(n,e)?(this.insertEntryAt(e,n),1):this.handleInvalidInsertion(n,e,t)}isInsertionValid(e,t){return(-1===this.maxCoord||e.levelCoord+t.thickness<=this.maxCoord)&&(-1===this.maxStackCnt||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,n){return this.allowReSlicing&&e.touchingEntry?this.splitEntry(t,e.touchingEntry,n):(n.push(t),0)}splitEntry(e,t,n){var r=[],a=e.span,o=t.span,l=0;return a.start<o.start&&(l+=this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.start,end:o.start}},r)),a.end>o.end&&(l+=this.insertEntry({index:e.index,thickness:e.thickness,span:{start:o.end,end:a.end}},r)),l?(n.push({index:e.index,thickness:e.thickness,span:intersectSpans(o,a)},...r),l):(n.push(e),0)}insertEntryAt(e,t){-1===t.lateral?(insertAt(this.levelCoords,t.level,t.levelCoord),insertAt(this.entriesByLevel,t.level,[e])):insertAt(this.entriesByLevel[t.level],t.lateral,e),this.stackCnts[buildEntryKey(e)]=t.stackCnt}findInsertion(e){for(var{levelCoords:t,entriesByLevel:n,strictOrder:r,stackCnts:a}=this,o=t.length,l=0,s=-1,c=-1,u=null,d=0,h=0;h<o;h+=1){var p=t[h];if(!r&&p>=l+e.thickness)break;for(var g=n[h],b=binarySearch(g,e.span.start,getEntrySpanEnd),m=b[0]+b[1];(null===(v=g[m])||void 0===v?void 0:v.span.start)<e.span.end;){var v,y=p+g[m].thickness;y>l&&(l=y,u=g[m],s=h,c=m),y===l&&(d=Math.max(d,a[buildEntryKey(g[m])]+1)),m+=1}}var _=0;if(u)for(_=s+1;_<o&&t[_]<l;)_+=1;var O=-1;return _<o&&t[_]===l&&(O=binarySearch(n[_],e.span.end,getEntrySpanEnd)[0]),{touchingLevel:s,touchingLateral:c,touchingEntry:u,stackCnt:d,levelCoord:l,level:_,lateral:O}}toRects(){for(var{entriesByLevel:e,levelCoords:t}=this,n=[],r=0;r<e.length;r+=1){var a=e[r],o=t[r];for(var l of a)n.push(timeline_events_builder_objectSpread(timeline_events_builder_objectSpread({},l),{},{levelCoord:o}))}return n}}function intersectSpans(e,t){var n=Math.max(e.start,t.start),r=Math.min(e.end,t.end);return n<r?{start:n,end:r}:null}function joinSpans(e,t){return{start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)}}function getEntrySpanEnd(e){return e.span.end}function buildEntryKey(e){return e.index+":"+e.span.start}function cmpDescPressures(e,t){return t[1]-e[1]}function extractNode(e){return e[0]}function insertAt(e,t,n){e.splice(t,0,n)}function cacheable(e,t){var n={};return function(){var r=e(...arguments);if(r in n)return n[r];var a=t(...arguments);return n[r]=a,a}}function binarySearch(e,t,n){var r=0,a=e.length;if(!a||t<n(e[r]))return[0,0];if(t>n(e[a-1]))return[a,0];for(;r<a;){var o=Math.floor(r+(a-r)/2),l=n(e[o]);if(t<l)a=o;else{if(!(t>l))return[o,1];r=o+1}}return[r,0]}function use_event_editing_vertical_mode_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function use_event_editing_vertical_mode_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?use_event_editing_vertical_mode_ownKeys(Object(n),!0).forEach((function(t){use_event_editing_vertical_mode_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):use_event_editing_vertical_mode_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function use_event_editing_vertical_mode_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Or=15,Er="DRAGGING",xr="RESIZING";function getCellYOffsetInMinutes(e,t){var n=t.current.getBoundingClientRect();return Math.round((e.clientY-n.top)/n.height*1440)}function roundNumberByStep(e,t){return Math.round(e/t)*t}function getGridItemByXY(e,t,n){return n[t]&&n[t][e]?n[t][e]:null}function useEventResizing(e,t,n){var r=(0,_e.useSafeAsync)(),a={resizingEvent:null,newEventData:null,editingType:null},[o,l]=(0,_e.useObjectState)(a),s=(0,_e.useHelpers)({gridX:null,startGridX:null,yMinutesOffset:null,startYMinutesOffset:null,resizingEvent:null,newEventData:null,busy:!1,startEventField:null,finishEventField:null,incrementalMinutes:0}),{resizingEvent:c,newEventData:u,editingType:d}=o,h=(0,_e.useCallback)((()=>{t.current.onmouseleave=null,s.gridX=null,s.startGridX=null,s.yMinutesOffset=null,s.startYMinutesOffset=null,s.resizingEvent=null,s.newEventData=null,s.busy=!1,s.startEventField=null,s.finishEventField=null,s.incrementalMinutes=0,l(a)}),[t]),p=(0,_e.useCallback)((()=>{if(!s.newEventData)return Promise.resolve();var e={objectId:s.newEventData.objectId,[s.startEventField]:s.newEventData[s.startEventField]};return s.finishEventField&&(e[s.finishEventField]=s.newEventData[s.finishEventField]),n(e)}),[n]),g=(0,_e.useCallback)((()=>{r(p()).finally(h),s.busy=!0,document.removeEventListener("mouseup",g)}),[p]),b=(0,_e.useCallback)(((n,r,o,c,u)=>{n.preventDefault(),n.stopPropagation();var{cellInfo:d,dateField:h,data:p}=c,{startEventField:b,finishEventField:m}=h,{gridX:v,gridY:y}=d;s.startEventField=b,s.finishEventField=m;var _=getCellYOffsetInMinutes(n,r),O=roundNumberByStep(_,Or),E=a.newEventData;if(u){var{dayInfo:{startTimestamp:x}}=getGridItemByXY(v,y,e),S=p[b],w=p[m],C=zn.E.getMinutesAfter(_,x),D=zn.E.getMinutesDiffBetween(S,C),P=Math.round(D/Or)*Or;E={[b]:zn.E.getMinutesAfter(P,S)},w&&(E[m]=zn.E.getMinutesAfter(P,w)),s.incrementalMinutes=P}s.gridX=v,s.startGridX=v,s.yMinutesOffset=O,s.resizingEvent=c,s.startYMinutesOffset=O,t.current.onmouseleave=()=>{s.newEventData=null,l({newEventData:null})},document.addEventListener("mouseup",g),l({resizingEvent:c,editingType:o,newEventData:E})}),[t.current,g,e]),m=(0,_e.useCallback)(((t,n,r)=>{if(!s.busy){var a=roundNumberByStep(getCellYOffsetInMinutes(t,n),Or),o=r!==s.gridX,c=s.yMinutesOffset!==a;if(o||c){s.gridX=r,s.yMinutesOffset=a;var u=96*(r-s.startGridX)+(a-s.startYMinutesOffset)/Or,h=d===Er,p=getGridItemByXY(r,0,e),g=h?null:function getTimeMouseOver(e,t){var n=e.dayInfo.startTimestamp,r=zn.E.getTimeSlotsObject(n),a=use_event_editing_vertical_mode_objectSpread(use_event_editing_vertical_mode_objectSpread({},r),{},{minute:r.minute+t});return zn.E.setTimeSlotsObject(a,n)}(p,a),b=function getNewEventData(e,t,n,r,a){var{dateField:o,data:l}=t,{startEventField:s,finishEventField:c}=o,u=l[s],d=l[c];if(!n&&c&&d<u)return use_event_editing_vertical_mode_objectSpread(use_event_editing_vertical_mode_objectSpread({},l),{},{[c]:r});var h=e*Or+a,p=null;if(d){var g=zn.E.getTimeSlotsObject(d),b=use_event_editing_vertical_mode_objectSpread(use_event_editing_vertical_mode_objectSpread({},g),{},{minute:g.minute+h});p=zn.E.setTimeSlotsObject(b,d)}if(!n&&p)return u>=p?l:use_event_editing_vertical_mode_objectSpread(use_event_editing_vertical_mode_objectSpread({},l),{},{[c]:p});var m=zn.E.getTimeSlotsObject(u),v=use_event_editing_vertical_mode_objectSpread(use_event_editing_vertical_mode_objectSpread({},m),{},{minute:m.minute+h}),y=zn.E.setTimeSlotsObject(v,u),_=use_event_editing_vertical_mode_objectSpread(use_event_editing_vertical_mode_objectSpread({},l),{},{[s]:y});return p&&(_[c]=p),_}(u,s.resizingEvent,h,g,s.incrementalMinutes);s.newEventData=b,l({newEventData:b})}}}),[d,e]),v=(0,_e.useMemo)((()=>c?use_event_editing_vertical_mode_objectSpread(use_event_editing_vertical_mode_objectSpread({},c),{},{data:u||c.data}):null),[c,u]);return{onEventResizeDragStart:b,onCellMouseMove:m,resizingEvent:c,newResizingEvent:v}}function events_grid_timeline_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function events_grid_timeline_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?events_grid_timeline_ownKeys(Object(n),!0).forEach((function(t){events_grid_timeline_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):events_grid_timeline_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function events_grid_timeline_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function events_grid_timeline_extends(){return events_grid_timeline_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},events_grid_timeline_extends.apply(this,arguments)}function EventsGrid(e){var{cellSizes:t,events:n,labelsCustomization:r,dayInfo:o,onEventResizeDragStart:l,newResizingEvent:s,resizingEvent:c}=e,{size:u,depth:d}=r,[h,p]=function useEventsLabels(e,t,n,r){return useEventsLabelsDataSet((0,_e.useMemo)((()=>e.filter((e=>{var{isFinishSegment:t,isStartSegment:n}=e;return t||n}))),[e]),t,n,r)}(n,t,u,d),g=h.length+10,b=function useMirrorEventLabel(e,t,n,r,a){var o=e?[e]:[],[l]=useEventsLabelsDataSet(o,t,n,r),s=l[0];return s&&events_grid_timeline_objectSpread(events_grid_timeline_objectSpread({},s),{},{style:events_grid_timeline_objectSpread(events_grid_timeline_objectSpread({},s.style),{},{zIndex:a})})}(s,t,u,d,g+1),m=(0,a.useCallback)(((e,t,n)=>{l(e,Er,t,n)}),[l]),v=(0,a.useCallback)(((e,t)=>{m(e,t,!0)}),[m]),y=(0,a.useCallback)(((e,t)=>{l(e,xr,t)}),[l]);return a.createElement("div",{className:"bl-calendar-visualization--events-grid-timeline"},h.map((e=>{var{event:t,style:n,labelId:o,hasFinishSegment:l,hasStartSegment:s}=e;return o&&a.createElement(EventComponent,events_grid_timeline_extends({},t,{style:n,key:o,labelsCustomization:r,hasFinishSegment:l,hasStartSegment:s,onEventResizeStart:y,onEventDragStart:m,resizingEvent:c,calendarVerticalMode:!0,verticalView:!0}))})),b&&b.labelId&&a.createElement(EventComponent,events_grid_timeline_extends({},b.event,{style:b.style,key:b.labelId,labelsCustomization:r,hasFinishSegment:b.hasFinishSegment,hasStartSegment:b.hasStartSegment,calendarVerticalMode:!0,verticalView:!0})),p.map((e=>{var{span:t,events:n}=e,l=function getOutFitBtnStyles(e,t){var{start:n,end:r}=e;return{top:n,height:r-n,zIndex:t}}(t,g),s=function getOutFitBtnLabel(e){return e.length<100?"+".concat(e.length):"99+"}(n),c=(0,Me.cn)("bl-calendar-visualization--events-grid-timeline--show-more-out-fit-btn",{"bl-calendar-visualization--events-grid-timeline--show-more-out-fit-btn--small-label":n.length>9});return a.createElement("div",{className:c,style:l,key:Zn.h.short()},a.createElement(ShowMore,{onEventDragStart:v,label:s,dayInfo:o,events:n,labelsCustomization:r,calendarVerticalMode:!0}))})))}function useEventsLabelsDataSet(e,t,n,r){return(0,_e.useMemo)((()=>{if(!e.length)return[[],[]];var a=function computeSegVCoords(e,t,n){var{cellHeight:r}=t,a=nn.X[n],o=1440/r,getTopIndent=e=>{if(e){var{hour:t,minute:n}=zn.E.getTimeSlotsObject(e);return(60*t+n)/o}},getStartEndIndentInCell=e=>{var{dateField:t,data:n,isFinishSegment:o,isStartSegment:l}=e,{finishEventField:s,startEventField:c}=t,u=n[c],d=n[s];d=d>u?d:u;var h=l?getTopIndent(u):0,p=o?Math.max(h+a,getTopIndent(d)||0):r;return{start:Math.round(h),end:Math.round(p)}};return e.map((e=>getStartEndIndentInCell(e)))}(e,t,n),o=a.map(((e,t)=>({index:t,thickness:1,span:e}))),l=function getMaxStackCount(e,t){var{mode:n,value:r}=t;if(n===nn.G$.INDENT)return Math.floor(e/r)||1;return r||1}(t.cellWidth,r),{segRects:s,hiddenGroups:c}=buildPositioning(o,l),u=s.map((t=>function getEventLabelProps(e,t){var{textColor:n,backgroundColor:r,isStartSegment:a,isFinishSegment:o,id:l}=e,s=t?function computeSegHStyle(e){var{span:t,levelCoord:n,thickness:r,stackDepth:a}=e,{start:o,end:l}=t,s=n,c=1-Math.min(1,n+2*(n+r-n));return{zIndex:a+2,left:100*s+"%",right:100*c+"%",top:o,bottom:-l}}(t):{left:0,right:0,top:"",bottom:""};return{event:e,labelId:l,hasStartSegment:a,hasFinishSegment:o,style:events_grid_timeline_objectSpread(events_grid_timeline_objectSpread({},s),{},{background:r,color:n})}}(e[t.index],t)));return[u,c.map((t=>{var{span:n,entries:r}=t;return{span:n,events:r.map((t=>{var{index:n}=t;return e[n]}))}}))]}),[e,t,n,r])}function cell_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cell_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cell_ownKeys(Object(n),!0).forEach((function(t){cell_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cell_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cell_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cell(e){var{dayInfo:t,timeScale:n,firstCellRef:r,events:o,labelsCustomization:l,cellSizes:s,isHovered:c,draggingEvent:u}=e,{onEventDragStart:d,onEventResizeDragStart:h,resizingEvent:p,onCellMouseMove:g,newResizingEvent:b}=e,{cellIndex:m,rowIndex:v,dateFields:y,onEventDragEnd:_}=e,{isMonthHidden:O,isWeekend:E,date:x,isToday:S,startTimestamp:w,endTimestamp:C}=t,{FontIcon:D}=useComponentsContext(),{dataEditing:P}=useFeatureToggleContext(),T=(0,_e.useRef)(null),[k,I,j]=function useEventEditor(e,t,n){var{startTimestamp:r}=t,[a,o]=(0,_e.useState)(null),l=(0,_e.useCallback)((e=>{if(1===n.length){var t=n[0].startEventField;o({[t]:e})}else o({})}),[n]),s=(0,_e.useCallback)((t=>{if(t){if(t.target===e.current){var n=getCellYOffsetInMinutes(t,e),a=zn.E.setTimeSlotsObject({minute:n},r);l(a)}}else l(r)}),[e,r,l]),c=(0,_e.useCallback)((()=>o(null)),[]);return[s,c,a]}(T,t,y),M=!!nn.fP[n],z=n===nn.L7.TWO_WEEK||n===nn.L7.MONTH,A=n===nn.L7.MONTH&&O,N=useHiddenEventsCount(o),L=o.length&&o.length===N,R="+".concat(N," more"),F=function useResizingEvent(e,t,n){return(0,_e.useMemo)((()=>{if(!n)return null;var{dateField:r,data:a}=n,{startEventField:o,finishEventField:l}=r,s=a[o],c=a[l];if(!(e<=(c=c>s?c:s)&&t>=s))return null;var u=e<=s&&s<=t,d=e<=c&&c<=t;return cell_objectSpread(cell_objectSpread({},n),{},{isStartSegment:u,isFinishSegment:d})}),[e,t,n])}(w,C,b),B=(0,Me.cn)("bl-calendar-visualization--grid-row-cell",{"bl-calendar-visualization--grid-row-cell--today":S,"bl-calendar-visualization--grid-row-cell--weekend":E,"bl-calendar-visualization--grid-row-cell--hidden":A,"bl-calendar-visualization--grid-row-cell--all-events-hidden":!!L,"bl-calendar-visualization--grid-row-cell--timeline-mode":!!M,"bl-calendar-visualization--grid-row-cell--hovered":!!c}),W=(0,_e.useCallback)(((e,t)=>{d(e,cell_objectSpread(cell_objectSpread({},t),{},{cellInfo:{gridX:m,gridY:v}}))}),[m,v,d]),H=(0,_e.useCallback)(((e,t,n,r)=>{var a=cell_objectSpread(cell_objectSpread({},n),{},{cellInfo:{gridX:m,gridY:v}});h(e,T,t,a,r)}),[m,T,v,h]),Z=(0,_e.useCallback)((e=>{g(e,T,m)}),[m,g,T.current]),V=(0,_e.useMemo)((()=>{if(M&&!p&&P)return k}),[p,k,M,P]),K=(0,_e.useCallback)((()=>k()),[k]);return a.createElement("div",{className:B,ref:e=>{r&&(r.current=e),T.current=e},onMouseMove:p&&Z,onClick:V},M&&a.createElement(CurrentTimeLine,{cellRef:T,dayStartTs:w,dayEndTs:C,zIndex:o.length+10}),!M&&z&&a.createElement("div",{className:"bl-calendar-visualization--grid-row-cell--header"},a.createElement("div",{className:"bl-calendar-visualization--grid-row-cell--date-container"},a.createElement("div",{className:"bl-calendar-visualization--grid-row-cell--date"},x)),P&&a.createElement("div",{className:"bl-calendar-visualization--grid-row-cell--header--add-btn",onClick:K},a.createElement(D,{icon:Ee.gW.PLUS}))),!M&&!!N&&a.createElement(ShowMore,{label:R,dayInfo:t,events:o,labelsCustomization:l,onEventDragEnd:_,onEventDragStart:W,draggingEvent:u}),M&&a.createElement(EventsGrid,{dayInfo:t,cellSizes:s,events:o,labelsCustomization:l,onEventResizeDragStart:H,newResizingEvent:F,resizingEvent:p}),a.createElement(EventEditorModal,{show:!!j,data:j,onHide:I,dateFields:y,labelsCustomization:l,isCreator:!0}))}function CurrentTimeLine(e){var{cellRef:t,dayStartTs:n,dayEndTs:r,zIndex:o}=e,l=(0,_e.useRef)(null),updateLinePos=()=>{if(l.current){var e=Date.now(),a=n<e&&r>e;if(l.current.style.display=a?"block":"none",a){var o,s=(null===(o=t.current)||void 0===o?void 0:o.offsetHeight)/1440,{hour:c,minute:u}=zn.E.getTimeSlotsObject(e),d=60*c+u,h=Math.round(s*d);l.current.style.marginTop="".concat(h,"px")}}};return(0,_e.useEffect)((()=>{updateLinePos();var e=setInterval(updateLinePos,1e4);return()=>clearInterval(e)}),[]),a.createElement("div",{className:"bl-calendar-visualization--grid-row-cell--current-time-line",ref:l,style:{zIndex:o}},a.createElement("div",{className:"bl-calendar-visualization--grid-row-cell--current-time-point"}))}var useHiddenEventsCount=e=>(0,_e.useMemo)((()=>e.reduce(((e,t)=>e+(t.isHidden?1:0)),0)),[e]);const Sr=(0,a.memo)(Cell);function row_extends(){return row_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},row_extends.apply(this,arguments)}function Row(e){var{rowData:t,timeScale:n,firstCellRef:r,labelsCustomization:o,cellSizes:l,rowIndex:s,dateFields:c}=e,{draggingEvent:u,onEventResizeDragStart:d,resizingEvent:h,onCellMouseMove:p}=e,{newResizingEvent:g,onEventDragStart:b,onEventDragEnd:m}=e;return a.createElement("div",{className:"bl-calendar-visualization--grid-row"},t.map(((e,t)=>a.createElement(Sr,row_extends({},e,{rowIndex:s,cellIndex:t,key:e.dayInfo.startTimestamp,timeScale:n,firstCellRef:0===t?r:void 0,labelsCustomization:o,cellSizes:l,onEventDragEnd:m,onEventDragStart:b,draggingEvent:u,onEventResizeDragStart:d,resizingEvent:h,onCellMouseMove:p,newResizingEvent:g,dateFields:c})))))}const wr=(0,a.memo)(Row);var Cr={Long24:["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],Short24:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],Long12:["12:00 AM","1:00 AM","2:00 AM","3:00 AM","4:00 AM","5:00 AM","6:00 AM","7:00 AM","8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM","6:00 PM","7:00 PM","8:00 PM","9:00 PM","10:00 PM","11:00 PM"],Medium12:["12 AM","1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM"],Short12:["12","1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11"]};function Timeline(){return a.createElement("div",{className:"bl-calendar-visualization--timeline"},Cr.Long24.map((e=>a.createElement("div",{className:"bl-calendar-visualization--timeline-item",key:e},a.createElement("div",{className:"bl-calendar-visualization--timeline-item-label"},e),a.createElement("div",{className:"bl-calendar-visualization--timeline-item-border"})))),a.createElement("div",null))}function CalendarGrid(e){var{gridDataSet:t,timeScale:n,firstCellRef:r,labelsCustomization:o,cellSizes:l,onRecordSave:s,dateFields:c}=e,{onEventDragStart:u,draggingEvent:d,onEventDragEnd:h}=e,p=(0,_e.useRef)(null),g=nn.fP[n],{onEventResizeDragStart:b,onCellMouseMove:m,resizingEvent:v,newResizingEvent:y}=useEventResizing(t,p,s);return a.createElement("div",{className:"bl-calendar-visualization--grid",ref:p},g&&a.createElement(Timeline,null),t.map(((e,t)=>a.createElement(wr,{key:t,rowData:e,rowIndex:t,timeScale:n,firstCellRef:0===t?r:void 0,labelsCustomization:o,cellSizes:l,onEventDragEnd:h,onEventDragStart:u,draggingEvent:d,onEventResizeDragStart:b,onCellMouseMove:m,resizingEvent:v,newResizingEvent:y,dateFields:c}))))}function grid_data_set_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function grid_data_set_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?grid_data_set_ownKeys(Object(n),!0).forEach((function(t){grid_data_set_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):grid_data_set_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function grid_data_set_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eventsIterator(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)for(var a=0;a<e[n][r].events.length;a++){t(e[n][r].events[a],r,n,a)}}var getDataSetBoundsTimestamp=(e,t,n)=>t===nn.L7.DAY?n?zn.E.getDayEnd(e):zn.E.getDayStart(e):t===nn.L7.MONTH?n?zn.E.getEndDayOfEndWeekOfEndMonth(e):zn.E.getStartDayOfStartWeekOfStartMonth(e):t===nn.L7.WEEK?n?zn.E.getWeekEnd(e):zn.E.getWeekStart(e):t===nn.L7.TWO_WEEK?n?zn.E.getWeekEndWeekAfter(1,e):zn.E.getWeekStart(e):t===nn.L7.THREE_DAY?n?zn.E.getEndDayOfDaysAfter(2,e):zn.E.getDayStart(e):void 0,Dr=function getTimestampsInterval(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{startBound:r,finishBound:a}=n;if(r&&a&&(e>a||t<r))return[];r&&(e=e<r?r:e),a&&(t=t<a?t:a);var o=[e=zn.E.getDayStart(e)];if(e===(t=zn.E.getDayStart(t)))return o;for(var l=Math.ceil(zn.E.getDaysDiffBetween(e,t)),s=0;s<l-1;s++){var c=zn.E.getStartDayOfDaysAfter(1,o[s]);o.push(c)}return o.push(t),o},eventStartComparator=(e,t)=>e.data[e.dateField.startEventField]-t.data[t.dateField.startEventField],getEventsByDay=(e,t,n)=>{var r={};return[...e].sort(eventStartComparator).forEach((e=>{var{data:a,dateField:o}=e,{startEventField:l,finishEventField:s}=o,c=a[l],u=a[s];if(c){var d=zn.E.getDayStart(c),h=u?zn.E.getDayStart(u):d,p=d<h?Dr(d,h,{startBound:t,finishBound:n}):[d],g=c>=t,b=!u||u<=n;p.forEach(((t,n)=>{var a=n===p.length-1,o=g&&0===n,l=b&&a,s=grid_data_set_objectSpread(grid_data_set_objectSpread({},e),{},{isStartSegment:o,isFinishSegment:l});r[t]?r[t].push(s):r[t]=[s]}))}})),r},buildDayInfo=(e,t)=>{var{month:n}=t,r=zn.E.buildDayInfo(e);return grid_data_set_objectSpread(grid_data_set_objectSpread({},r),{},{isMonthHidden:r.month!==n})},isEventVisible=(e,t,n)=>{var r=e+1;return!!(n===r&&t>=r)||t-r>=.5},enrichWithEvents=(e,t,n,r,a)=>{var o={},l=r===nn.L7.MONTH||r===nn.L7.TWO_WEEK?nn.Kp:null;return e.map(((e,r)=>{var{dayInfo:{startTimestamp:s}}=e;!l||r%l||(o={});var c=t[s]||[],u=[];c.forEach((e=>{var t=o[e.id];if(t)u[t]=e;else for(var n=0;n<u.length+1;n++)if(!u[n])return o[e.id]=n,void(u[n]=e)}));var d=(e=>{var t=[];return e.forEach(((e,n)=>t.push(grid_data_set_objectSpread(grid_data_set_objectSpread({},e),{},{order:n})))),t})(u),h=a?d:((e,t)=>{if(!e||!e.length)return[];var n=e[e.length-1].order;return e.map((e=>grid_data_set_objectSpread(grid_data_set_objectSpread({},e),{},{isHidden:!isEventVisible(e.order,t,n+1)})))})(d,n);return grid_data_set_objectSpread(grid_data_set_objectSpread({},e),{},{events:h})}))},hideNotVisibleEvents=e=>{var t=(e=>{var t={};return eventsIterator(e,((e,n,r)=>{e.isHidden&&(t[e.id]?t[e.id][r]=!0:t[e.id]={[r]:!0})})),t})(e);return e.map(((e,n)=>e.map((e=>{var r=e.events.map((e=>t[e.id]&&t[e.id][n]?grid_data_set_objectSpread(grid_data_set_objectSpread({},e),{},{isHidden:!0}):e));return grid_data_set_objectSpread(grid_data_set_objectSpread({},e),{},{events:r})}))))},useGridDataSet=(e,t,n,r,a,o)=>{var l=!!nn.fP[t],s=(0,_e.useMemo)((()=>getDataSetBoundsTimestamp(e,t)),[e,t]),c=(0,_e.useMemo)((()=>getDataSetBoundsTimestamp(e,t,!0)),[e,t]),u=(0,_e.useMemo)((()=>Dr(s,c)),[s,c]),d=(0,_e.useMemo)((()=>zn.E.buildDayInfo(e)),[e]),h=(0,_e.useMemo)((()=>getEventsByDay(a,s,c)),[a,s,c]),p=(0,_e.useMemo)((()=>((e,t)=>{if(!e)return 0;var{contentHeight:n}=e,r=nn.X[t],a=Math.floor(n/r),o=n-a*r;return nn.Cd<=o?a+.5:a})(n,o)),[n,o]),g=(0,_e.useMemo)((()=>((e,t)=>e.map((e=>({dayInfo:buildDayInfo(e,t)}))))(u,d)),[u,d]),b=(0,_e.useMemo)((()=>enrichWithEvents(g,h,p,t,l)),[g,h,p,t,l]),m=(0,_e.useMemo)((()=>((e,t)=>{if(t===nn.L7.MONTH||t===nn.L7.TWO_WEEK){for(var n=[],r=e.length/nn.Kp,a=0;a<r;a++){var o=a*nn.Kp,l=o+nn.Kp,s=e.slice(o,l);n.push(s)}return n}return[e]})(b,t)),[b,t]);return(0,_e.useMemo)((()=>l?m:hideNotVisibleEvents(m)),[m,l])};function events_grid_extends(){return events_grid_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},events_grid_extends.apply(this,arguments)}function events_grid_EventsGrid(e){var{cellSizes:t,gridDataSet:n,labelsCustomization:r,onEventDragStart:o,onEventResizeStart:l,draggingEvent:s}=e,{mirrorGridDataSet:c,resizingEvent:u,onEventDragEnd:d}=e,{size:h}=r,p=events_grid_useEventsLabelsDataSet(n,t,h),g=events_grid_useEventsLabelsDataSet(c,t,h);return a.createElement("div",{className:"bl-calendar-visualization--events-grid"},p.map((e=>{var{event:t,style:n,labelId:c,hasFinishSegment:h,hasStartSegment:p}=e;return c&&a.createElement(EventComponent,events_grid_extends({},t,{style:n,key:c,labelsCustomization:r,hasFinishSegment:h,hasStartSegment:p,onEventDragEnd:d,onEventDragStart:o,onEventResizeStart:l,draggingEvent:s,resizingEvent:u}))})),g.map((e=>{var{event:t,style:n,labelId:o,hasFinishSegment:l,hasStartSegment:s}=e;return o&&a.createElement(EventComponent,events_grid_extends({},t,{style:n,key:o,labelsCustomization:r,hasFinishSegment:l,hasStartSegment:s}))})))}function events_grid_useEventsLabelsDataSet(e,t,n){return(0,_e.useMemo)((()=>{if(!e)return[];var r={};return eventsIterator(e,((e,t,n)=>{var a=e.id+n,o=r[a];o||e.isHidden||(r[a]={labelId:a,event:e,countSegmentUsedByY:1,hasStartSegment:e.isStartSegment,hasFinishSegment:e.isFinishSegment,x:t,y:n}),o&&(r[a].countSegmentUsedByY+=1,r[a].hasFinishSegment=e.isFinishSegment)})),Object.keys(r).map((e=>function events_grid_getEventLabelProps(e,t,n){var{event:r,x:a,y:o,countSegmentUsedByY:l,hasStartSegment:s,hasFinishSegment:c,labelId:u}=t,{order:d,textColor:h,backgroundColor:p}=r,{cellWidth:g,cellHeight:b,topIndent:m,leftIndent:v,rightIndent:y}=e,_=nn.X[n],O=g*l-(s?v:0)-(c?y:0);return{event:r,labelId:u,hasStartSegment:s,hasFinishSegment:c,style:{top:o*b+m+d*_,left:s?a*g+v:0,maxHeight:_,height:_,maxWidth:O,width:O,background:p,color:h}}}(t,r[e],n)))}),[e,t,n])}function DropTargetImpl_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pr=function(){function DropTargetImpl(e,t){!function DropTargetImpl_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DropTargetImpl),this.spec=e,this.monitor=t}return function DropTargetImpl_createClass(e,t,n){return t&&DropTargetImpl_defineProperties(e.prototype,t),n&&DropTargetImpl_defineProperties(e,n),e}(DropTargetImpl,[{key:"canDrop",value:function canDrop(){var e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}},{key:"hover",value:function hover(){var e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}},{key:"drop",value:function drop(){var e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}}]),DropTargetImpl}();function useRegisteredDropTarget_slicedToArray(e,t){return function useRegisteredDropTarget_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function useRegisteredDropTarget_iterableToArrayLimit(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function useRegisteredDropTarget_unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return useRegisteredDropTarget_arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useRegisteredDropTarget_arrayLikeToArray(e,t)}(e,t)||function useRegisteredDropTarget_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useRegisteredDropTarget_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function useRegisteredDropTarget(e,t,n){var r=useDragDropManager(),o=function useDropTarget(e,t){var n=(0,a.useMemo)((function(){return new Pr(e,t)}),[t]);return(0,a.useEffect)((function(){n.spec=e}),[e]),n}(e,t),l=function useAccept(e){var t=e.accept;return(0,a.useMemo)((function(){return invariant(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t]}),[t])}(e);Jn((function registerDropTarget(){var e=function registerTarget(e,t,n){var r=n.getRegistry(),a=r.addTarget(e,t);return[a,function(){return r.removeTarget(a)}]}(l,o,r),a=useRegisteredDropTarget_slicedToArray(e,2),s=a[0],c=a[1];return t.receiveHandlerId(s),n.receiveHandlerId(s),c}),[r,t,o,n,l.map((function(e){return e.toString()})).join("|")])}function DropTargetMonitorImpl_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Tr=!1,kr=function(){function DropTargetMonitorImpl(e){!function DropTargetMonitorImpl_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DropTargetMonitorImpl),this.targetId=null,this.internalMonitor=e.getMonitor()}return function DropTargetMonitorImpl_createClass(e,t,n){return t&&DropTargetMonitorImpl_defineProperties(e.prototype,t),n&&DropTargetMonitorImpl_defineProperties(e,n),e}(DropTargetMonitorImpl,[{key:"receiveHandlerId",value:function receiveHandlerId(e){this.targetId=e}},{key:"getHandlerId",value:function getHandlerId(){return this.targetId}},{key:"subscribeToStateChange",value:function subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function canDrop(){if(!this.targetId)return!1;invariant(!Tr,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Tr=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Tr=!1}}},{key:"isOver",value:function isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function getItemType(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function getItem(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function getDropResult(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function didDrop(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function getClientOffset(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),DropTargetMonitorImpl}();function TargetConnector_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ir=function(){function TargetConnector(e){var t=this;!function TargetConnector_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TargetConnector),this.hooks=wrapConnectorHooks({dropTarget:function dropTarget(e,n){t.clearDropTarget(),t.dropTargetOptions=n,isRef(e)?t.dropTargetRef=e:t.dropTargetNode=e,t.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}return function TargetConnector_createClass(e,t,n){return t&&TargetConnector_defineProperties(e.prototype,t),n&&TargetConnector_defineProperties(e,n),e}(TargetConnector,[{key:"connectTarget",get:function get(){return this.dropTarget}},{key:"reconnect",value:function reconnect(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"dropTargetOptions",get:function get(){return this.dropTargetOptionsInternal},set:function set(e){this.dropTargetOptionsInternal=e}},{key:"didHandlerIdChange",value:function didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function didOptionsChange(){return!shallowEqual(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function get(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}}]),TargetConnector}();function useConnectDropTarget(e){return(0,a.useMemo)((function(){return e.hooks.dropTarget()}),[e])}function useDrop(e,t){var n=useOptionalFactory(e,t),r=function useDropTargetMonitor(){var e=useDragDropManager();return(0,a.useMemo)((function(){return new kr(e)}),[e])}(),o=function useDropTargetConnector(e){var t=useDragDropManager(),n=(0,a.useMemo)((function(){return new Ir(t.getBackend())}),[t]);return Jn((function(){n.dropTargetOptions=e||null,n.reconnect()}),[e]),n}(n.options);return useRegisteredDropTarget(n,r,o),[useCollectedProps(n.collect,r,o),useConnectDropTarget(o)]}function use_event_dragging_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function use_event_dragging_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?use_event_dragging_ownKeys(Object(n),!0).forEach((function(t){use_event_dragging_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):use_event_dragging_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function use_event_dragging_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function use_event_dragging_getGridItemByXY(e,t,n){return n[t]&&n[t][e]?n[t][e]:null}function getStateInit(){return{newEventData:null,hoveredCell:{gridX:null,gridY:null,gridCell:null},startHoveredCell:{gridX:null,gridY:null,gridCell:null},draggingEvent:null}}function useEventDragging(e,t,n){var r=(0,_e.useSafeAsync)(),a=(0,_e.useHelpers)((()=>({updatingProcess:null,newEventData:null,gridX:null,gridY:null,startEventField:null,finishEventField:null}))),[o,l]=(0,_e.useObjectState)(getStateInit),{hoveredCell:s,draggingEvent:c,startHoveredCell:u,newEventData:d}=o,h=t[0].length,p=t.length,g=(0,_e.useMemo)((()=>function isHoveringValid(e){return null!==e.gridX&&null!==e.gridY}(s)),[s]);(0,_e.useEffect)((()=>{if(c){var e=u.gridX,t=u.gridY,n=s.gridX,r=s.gridY;if(g&&(e!==n||t!==r)){var o=function getXHorizonCoordsPath(e,t,n,r,a){return(r-t)*a+(n-e)}(e,t,n,r,h),d=function shiftEventDateFields(e,t){var{dateField:n,data:r}=e,{finishEventField:a,startEventField:o}=n,l=r[a],s=r[o],c=t>0,u=Math.abs(t),d=l,h=c?zn.E.getDaysAfter(u,s):zn.E.getDaysBefore(u,s);return l&&(d=c?zn.E.getDaysAfter(u,l):zn.E.getDaysBefore(u,l)),use_event_dragging_objectSpread(use_event_dragging_objectSpread({},r),{},{[a]:d,[o]:h})}(c,o);a.newEventData=d,l({newEventData:d})}else l({newEventData:null}),a.newEventData=null}}),[s]);var b=(0,_e.useCallback)((()=>{if(!a.newEventData)return Promise.resolve();var e={objectId:a.newEventData.objectId,[a.startEventField]:a.newEventData[a.startEventField]};return a.finishEventField&&(e[a.finishEventField]=a.newEventData[a.finishEventField]),n(e)}),[n]),m=(0,_e.useCallback)(((n,r)=>{var o=e.current.getBoundingClientRect(),l=o.width/h,s=o.height/p,c=n-o.left,u=r-o.top,d=Math.floor(c/l),g=Math.floor(u/s);if(a.gridX!==d||a.gridY!==g){a.gridX=d,a.gridY=g;var b=use_event_dragging_getGridItemByXY(d,g,t);return b?{gridX:d,gridY:g,gridCell:b}:{gridX:null,gridY:null,gridCell:null}}}),[e.current,h,p]),v=(0,_e.useCallback)((e=>{var{x:t,y:n}=e,r=m(t,n);r&&l({hoveredCell:r})}),[m]),y=(0,_e.useCallback)((()=>{a.updatingProcess=null,a.newEventData=null,a.gridX=null,a.gridY=null,a.startEventField=null,a.finishEventField=null,l({newEventData:null,hoveredCell:{gridX:null,gridY:null,gridCell:null},startHoveredCell:{gridX:null,gridY:null,gridCell:null},draggingEvent:null})}),[]),_=(0,_e.useCallback)((()=>{a.updatingProcess=!0,r(b()).finally((()=>{y()}))}),[b,y]),O=(0,_e.useCallback)(((e,n)=>{var{x:r,y:o}=e,{cellInfo:s,dateField:c}=n,{startEventField:u,finishEventField:d}=c;a.startEventField=u,a.finishEventField=d;var h=s?use_event_dragging_objectSpread(use_event_dragging_objectSpread({},s),{},{gridCell:use_event_dragging_getGridItemByXY(s.gridX,s.gridY,t)}):m(r,o),p={};h&&(p.hoveredCell=h,p.startHoveredCell=h),p.draggingEvent=n,l(p)}),[m,e.current,t]),E=(0,_e.useCallback)((()=>{a.updatingProcess||y()}),[y]),x=(0,_e.useMemo)((()=>c?use_event_dragging_objectSpread(use_event_dragging_objectSpread({},c),{},{data:d||c.data}):null),[c,d]),S=(0,_e.useMemo)((()=>{if(!g)return t;var{dateField:e,data:n}=x,{startEventField:r,finishEventField:a}=e,o=n[r],l=n[a];return l=l>o?l:o,t.map((e=>e.map((e=>{var{startTimestamp:t,endTimestamp:n}=e.dayInfo;if(l<t)return use_event_dragging_objectSpread(use_event_dragging_objectSpread({},e),{},{isHovered:!1});var r=t<=l&&n>=o;return use_event_dragging_objectSpread(use_event_dragging_objectSpread({},e),{},{isHovered:r})}))))}),[x,t,g]),[{isOver:w},C]=useDrop((()=>({accept:nn.yP.EVENT,drop:_,hover:(e,t)=>v(t.getClientOffset(),e),collect:e=>({isOver:e.isOver()})})),[_,v]);return(0,_e.useEffect)((()=>{w||(l({hoveredCell:{gridX:null,gridY:null,gridCell:null}}),a.gridX=null,a.gridY=null)}),[w]),{onEventDragStart:O,onEventDragEnd:E,draggingEvent:c,onCellsContainerDropRef:C,coloredGridDataSet:S}}function use_event_resizing_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function use_event_resizing_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?use_event_resizing_ownKeys(Object(n),!0).forEach((function(t){use_event_resizing_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):use_event_resizing_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function use_event_resizing_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getStartEventCellCoords(e,t,n,r){if(!e)return null;var{dateField:a,data:o}=e,{startEventField:l}=a,s=o[l],c=zn.E.getDayStart(s),u=r.gridCell.dayInfo.startTimestamp,d=function getCoordsByOffset(e,t,n,r,a){var o=t+e,l=Math.floor(o/r),s=n+l,c=t+e-r*l,u=c<0||s<0?0:Math.min(r-1,c),d=s<0?0:Math.min(a-1,s);return{x:u,y:d}}(-zn.E.getDaysDiffBetween(c,u),r.gridX,r.gridY,n,t);return{gridX:d.x,gridY:d.y}}function useMirrorGridDataSet(e,t,n,r){var a=!!n,o=(0,_e.useMemo)((()=>{if(a)return null!=n&&n.data?[n]:[]}),[n,a]),l=(0,_e.useMemo)((()=>{if(a)return function getEventOrderMapByY(e,t){if(!e)return null;var n={};e:for(var r=0;r<t.length;r++)for(var a=0;a<t[r].length;a++)for(var o=0;o<t[r][a].events.length;o++){var l=t[r][a].events[o];if(l.id===e.id){n[r]=l.order;continue e}if(o===t[r][a].events.length-1&&Object.keys(n).length)break e}return n}(n,r)}),[n,r,a]),s=(0,_e.useMemo)((()=>{if(a)return getDataSetBoundsTimestamp(e,t)}),[e,t,a]),c=(0,_e.useMemo)((()=>{if(a)return getDataSetBoundsTimestamp(e,t,!0)}),[e,t,a]),u=(0,_e.useMemo)((()=>{if(a)return getEventsByDay(o,s,c)}),[o,s,c,a]);return(0,_e.useMemo)((()=>a?function getEnrichedGridDataSetByMirrorEvents(e,t,n){return e.map(((e,r)=>e.map((e=>{var{dayInfo:a}=e,o=t[a.startTimestamp];return o?{dayInfo:a,events:o.map((e=>{var t=n[r]||0;return use_event_resizing_objectSpread(use_event_resizing_objectSpread({},e),{},{order:t})}))}:{dayInfo:a,events:[]}}))))}(r,u,l):null),[r,u,l,a])}function use_event_resizing_getStateInit(){return{newEventData:null,hoveredCell:{gridX:null,gridY:null,gridCell:null},startHoveredCell:{gridX:null,gridY:null,gridCell:null},resizingEvent:null}}function use_event_resizing_useEventResizing(e,t,n,r,a){var o=(0,_e.useSafeAsync)(),l=(0,_e.useHelpers)((()=>({newEventData:null,gridX:null,gridY:null,eventRef:null,startEventField:null,finishEventField:null}))),[s,c]=(0,_e.useObjectState)(use_event_resizing_getStateInit),{hoveredCell:u,startHoveredCell:d,resizingEvent:h,newEventData:p}=s,g=t[0].length,b=t.length,m=(0,_e.useMemo)((()=>getStartEventCellCoords(h,b,g,d)),[h,b,g,d]),v=(0,_e.useMemo)((()=>function use_event_resizing_isHoveringValid(e,t){return!(!t||null===e.gridX||null===e.gridY||e.gridY<t.gridY||e.gridY===t.gridY&&e.gridX<t.gridX)}(u,m)),[u,m]);(0,_e.useEffect)((()=>{if(h){var e=d.gridX!==u.gridX||d.gridY!==u.gridY;if(v&&e){var t=function getDaysDifference(e,t,n){var{dateField:r,data:a}=e,o=a[r.finishEventField],l=t.gridCell.dayInfo.startTimestamp,s=o?zn.E.getDayStart(o):n.gridCell.dayInfo.startTimestamp;return zn.E.getDaysDiffBetween(s,l)}(h,u,d),n=function shiftEventFinishDateField(e,t){var{dateField:n,data:r}=e,{finishEventField:a,startEventField:o}=n,l=r[a],s=r[o],c=t>0,u=Math.abs(t),d=c?zn.E.getDaysAfter(u,l||s):zn.E.getDaysBefore(u,l||s);return use_event_resizing_objectSpread(use_event_resizing_objectSpread({},r),{},{[a]:d})}(h,t);l.newEventData=n,c({newEventData:n})}else c({newEventData:null}),l.newEventData=null}}),[u]);var y=(0,_e.useCallback)((()=>{if(!l.newEventData)return Promise.resolve();var e={objectId:l.newEventData.objectId,[l.startEventField]:l.newEventData[l.startEventField]};return l.finishEventField&&(e[l.finishEventField]=l.newEventData[l.finishEventField]),n(e)}),[n]),_=(0,_e.useCallback)((()=>{l.eventRef=null,l.newEventData=null,l.gridX=null,l.gridY=null,l.startEventField=null,l.finishEventField=null,c({newEventData:null,hoveredCell:{gridX:null,gridY:null,gridCell:null},startHoveredCell:{gridX:null,gridY:null,gridCell:null},resizingEvent:null})}),[]),O=(0,_e.useCallback)((n=>{var r=e.current.getBoundingClientRect(),a=r.width/g,o=r.height/b,s=n.clientX-r.left,c=n.clientY-r.top,u=Math.floor(s/a),d=Math.floor(c/o);if(l.gridX!==u||l.gridY!==d){l.gridX=u,l.gridY=d;var h=function use_event_resizing_getGridItemByXY(e,t,n){return n[t]&&n[t][e]?n[t][e]:null}(u,d,t);return h?{gridX:u,gridY:d,gridCell:h}:{gridX:null,gridY:null,gridCell:null}}}),[e.current,g,b,t]),E=(0,_e.useCallback)((e=>{var t=O(e);t&&c({hoveredCell:t})}),[O]),x=(0,_e.useCallback)((()=>{o(y()).finally((()=>{l.eventRef.style.visibility=null,_()})),document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",x)}),[E,_,y]),S=(0,_e.useCallback)(((e,t)=>{e.preventDefault(),e.stopPropagation();var{dateField:n}=t,{startEventField:r,finishEventField:a}=n;l.startEventField=r,l.finishEventField=a;var o=O(e),s={};o&&(s.hoveredCell=o,s.startHoveredCell=o),s.resizingEvent=t,l.eventRef=e.target.parentNode,c(s),e.target.parentNode.style.visibility="hidden",document.addEventListener("mousemove",E),document.addEventListener("mouseup",x)}),[O,E,x]),w=useMirrorGridDataSet(r,a,(0,_e.useMemo)((()=>h?use_event_resizing_objectSpread(use_event_resizing_objectSpread({},h),{},{data:p||h.data}):null),[h,p]),t),C=(0,_e.useMemo)((()=>v?t.map(((e,t)=>e.map(((e,n)=>use_event_resizing_objectSpread(use_event_resizing_objectSpread({},e),{},{isHovered:!!w[t][n].events.length}))))):t),[v,t,w]);return{onEventResizeStart:S,coloredGridDataSet:C,resizingEvent:h,mirrorGridDataSet:w}}function useDataEvents(e){var[t,n]=(0,_e.useObjectState)({events:e,mapEvents:ye()(e,"objectId")}),{events:r,mapEvents:a}=t;return(0,_e.useEffect)((()=>{(function isEventsChanged(e,t,n){if(0===e.length&&0===n.length)return!1;if(e.length!==n.length)return!0;return n.some((e=>{var n=t[e.objectId];return!n||(0,Xt.h)(n,e)}))})(r,a,e)&&n({events:e,mapEvents:ye()(e,"objectId")})}),[e]),r}function ScrollContainer(e){var{onScroll:t,children:n}=e,r=(0,_e.useCallback)((e=>t((e=>({x:e.target.scrollLeft,y:e.target.scrollTop}))(e))),[t]);return a.createElement("div",{className:"bl-calendar-visualization--scroll-container"},a.createElement("div",{className:"bl-calendar-visualization--scroll-content",onScroll:r},n))}function CalendarPreview(e){var t,n,r,{calendarData:o,calendarModel:l,onModelChange:s,onQueryChange:c}=e,{loadingStatus:u,items:d}=o,{timeScale:h,initTimestamp:p,dateFields:g,labelsCustomization:b,labelsColors:m}=l,{size:v}=b,{components:y,columns:_,onRecordSave:O,errorMessageMapByCode:E}=(0,_e.useContext)(Se),{Spinner:x}=y,S=!!nn.fP[h],w=(0,_e.useRef)(null),C=(0,_e.useRef)(null),D=(0,_e.useRef)(null),[P,T]=function useVerticalScrollingMonitor(){var[e,t]=(0,_e.useState)(!1),n=(0,_e.useHelpers)({y:0}),r=(0,_e.useCallback)((e=>{var{y:r}=e;n.y!==r&&(0===r&&t(!1),0!==r&&0===n.y&&t(!0)),n.y=r}),[]);return[e,r]}(),k=useDataEvents(d),I=useCellSizes(D,C,h,p),j=useCalendarEvents(k,_,m,g),M=useGridDataSet(p,h,I,0,j,v),z=useEventDragging(C,M,O),{onEventDragStart:A,onEventDragEnd:N,draggingEvent:L,onCellsContainerDropRef:R}=z;M=z.coloredGridDataSet;var F=use_event_resizing_useEventResizing(C,M,O,p,h),{onEventResizeStart:B,resizingEvent:W,mirrorGridDataSet:H}=F;M=F.coloredGridDataSet;var Z=null===(t=u.columns)||void 0===t?void 0:t.loading,V=(null===(n=u.records)||void 0===n?void 0:n.error)||(null===(r=u.columns)||void 0===r?void 0:r.error),K=(0,Me.cn)("bl-calendar-visualization-preview",{"bl-calendar-visualization-preview--with-timeline":S}),Y=(0,Me.cn)("bl-calendar-visualization--days-container",{"bl-calendar-visualization--days-container--vertically-scrolled":P});return a.createElement("div",{className:K,ref:w},a.createElement(Navigator,{gridDataSet:M,initTimestamp:p,timeScale:h,dateFields:g,onModelChange:s,onQueryChange:c}),h!==nn.L7.DAY&&a.createElement(WeeksDays,{timeScale:h,startWeekDataSet:M[0]}),a.createElement("div",{className:Y},a.createElement(Hn.Z,{loading:Z,error:V,spinner:x,errorMessageMapByCode:E},S&&a.createElement(AllDayEventsContainer,{gridDataSet:M,labelsCustomization:b}),a.createElement("div",{className:"bl-calendar-visualization--scroll-box"},a.createElement(ScrollContainer,{onScroll:T},a.createElement("div",{className:"bl-calendar-visualization--cells-container",ref:e=>{R(e),C.current=e}},a.createElement(CalendarGrid,{gridDataSet:M,timeScale:h,firstCellRef:D,cellSizes:I,labelsCustomization:b,onEventDragStart:A,draggingEvent:L,onRecordSave:O,dateFields:g,onEventDragEnd:N}),!S&&a.createElement(events_grid_EventsGrid,{timeScale:h,cellSizes:I,gridDataSet:M,labelsCustomization:b,onEventDragStart:A,onEventResizeStart:B,onEventDragEnd:N,draggingEvent:L,resizingEvent:W,mirrorGridDataSet:H})))))))}var getCellIndent=e=>{var t=e.current;if(!t)return null;var n=window.getComputedStyle(t,null),r=parseInt(n.paddingLeft)+parseInt(n.borderLeftWidth),a=parseInt(n.paddingRight)+parseInt(n.borderRightWidth),o=parseInt(n.paddingBottom)+parseInt(n.borderBottomWidth),l=parseInt(n.paddingTop)+parseInt(n.borderTopWidth),s=function getCellDateTitleHeight(e){var t=e.childNodes[0];if(t&&t.className.includes("bl-calendar-visualization--grid-row-cell--header"))return t.offsetHeight}(t),c=l+(s?s+l:0),u=t.offsetWidth,d=t.offsetHeight;return{cellWidth:u,cellHeight:d,topIndent:c,leftIndent:r,rightIndent:a,contentHeight:d-o-c}},useCellSizes=(e,t,n,r)=>{var[a,o]=(0,_e.useState)((()=>getCellIndent(e))),l=(0,_e.useHelpers)(),s=(0,_e.useCallback)((e=>{(0,Xt.h)(a,e)&&o(e)}),[a]);(0,_e.useEffect)((()=>s(getCellIndent(e))),[e.current,n,r]);var c=(0,_e.useCallback)((()=>{clearTimeout(l.resizeTimerId),l.resizeTimerId=setTimeout((()=>s(getCellIndent(e))),400)}),[s]);return(0,_e.useResizeObserver)(t,c),a},useCalendarEvents=(e,t,n,r)=>(0,_e.useMemo)((()=>{if(!r.length||!r[0].startEventField)return[];var a=[];return r.forEach(((r,o)=>{e.forEach((e=>{var l=getEventColor(e,n,t,r),s=e.objectId?"".concat(e.objectId,"_").concat(o):"".concat(Zn.h.long(),"_").concat(o);a.push({data:e,dateField:r,textColor:l&&Pn.getContrastColor(l,!0),backgroundColor:l,id:s})}))})),a}),[e,t,n,r]);function calendar_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function calendar_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?calendar_ownKeys(Object(n),!0).forEach((function(t){calendar_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):calendar_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function calendar_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Calendar(e){var{data:t,model:n={},onModelChange:r,onRecordDelete:o,onRecordSave:l,dataSource:s,className:c}=e,{components:u,LocalStorageManager:d,googleApiKey:h,featureToggle:p}=e,{errorMessageMapByCode:g}=e,{query:b={},columns:m,loadingStatus:v}=t,{initTimestamp:y,dateFields:_}=n,O=function useQueryChanger(e,t,n){var r=(0,_e.useMemo)((()=>(0,Rn.E6)(t,n)),[t,n]);return(0,_e.useCallback)((t=>{e(calendar_objectSpread({optimizeWhereClause:r},t))}),[e,r])}(e.onQueryChange,y,_),E=(0,_e.useRef)(null),S=(0,_e.useMemo)((()=>(0,Oe.vD)(u)),[u]),w=(0,_e.useMemo)((()=>calendar_objectSpread(calendar_objectSpread({},Ee.kl[Ee.ZN.CALENDAR]),p)),[p]),C=(0,_e.useMemo)((()=>ye()(m,"name")),[m]),D=(0,_e.persistContextValue)({components:S,LocalStorageManager:d,rootRef:E,columns:m,columnsByName:C,onQueryChange:O,onRecordSave:l,onRecordDelete:o,googleApiKey:h,featureToggle:w,errorMessageMapByCode:g});return s?a.createElement(re,{backend:me},a.createElement("div",{className:x()("bl-calendar-visualization-container",c),ref:E},a.createElement(Se.Provider,{value:D},w.toolbar&&a.createElement(CalendarToolbar,{query:b,onQueryChange:O,onModelChange:r,dataSource:s,calendarModel:n,loadingStatus:v.records}),a.createElement(CalendarPreview,{onQueryChange:O,calendarData:t,calendarModel:n,onModelChange:r})))):null}var jr=n(65468),Mr=n(53947);const zr=(0,jr.Z)((0,Mr.Z)((function calendar_Calendar(e){var{data:t,dataActions:n,className:r,model:l,onModelChange:s,config:c,LocalStorageManager:u,googleApiKey:d}=e,{featureToggle:h}=e,{onQueryChange:p,onRecordSave:g,onRecordDelete:b}=n,{dataSource:m,name:v}=c,y=(0,o.X)(c,h);return a.createElement(Calendar,{className:r,model:l,onModelChange:s,onQueryChange:p,onRecordSave:g,onRecordDelete:b,data:t,dataSource:m,LocalStorageManager:u,name:v,googleApiKey:d,featureToggle:y})})))},19120:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ColorPicker});var r=n(67294),a=n(15885),o=["component","value","onChange","readOnly","tooltip"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ColorPicker(e){var{component:t,value:n,onChange:l,readOnly:s,tooltip:c}=e,u=_objectWithoutProperties(e,o);if(t&&!s)return r.createElement(t,_extends({value:n,onChange:l,className:"bl-visualization--color-picker",tooltip:c},u));var d=r.createElement("div",{style:{background:n,height:20,width:40,borderRadius:4,cursor:"auto"}});return c?r.createElement(a.Z,{tooltip:c},d):d}},91367:(e,t,n)=>{"use strict";n.d(t,{W:()=>r,w:()=>a});var r={DAY:"day",MONTH:"month",YEAR:"year",DATE:"date"},a={DATE_PICKER:"DATE_PICKER",TIME_PICKER:"TIME_PICKER",MONTH_PICKER:"MONTH_PICKER",YEAR_PICKER:"YEAR_PICKER"}},72660:(e,t,n)=>{"use strict";n.d(t,{Z:()=>DateTime});n(21607);var r=n(67294),a=n(50066),o=n(94770),l=n(66986),s=n(68319),c=n(28121),u=["mode","onChange","value","size","className","classNameDialog"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function DateTime(e){var{mode:t,onChange:n,value:d,size:h,className:p,classNameDialog:g}=e,b=_objectWithoutProperties(e,u),m=(0,o.useCallback)((e=>{var{ts:t}=e;return n(t)}),[n]);return r.createElement("div",{className:"bl-datetime-picker-input"},r.createElement(l.Z.MuiPickersUtilsProvider,{utils:l.Z.LuxonUtils},r.createElement(l.Z.DatePicker,_extends({className:(0,a.cn)(p,"bl-datetime-picker"),PopoverProps:{className:(0,a.cn)(g,"bl-datetime-picker-dialog")},variant:t,onChange:m,defaultValue:null,value:d||null,size:h||"small"},b))),r.createElement(s.Z,{icon:c.gW.CALENDAR_MONTH,className:"bl-datetime-picker-input-icon"}))}DateTime.defaultProps={mode:"inline",disableToolbar:!0,inputVariant:"outlined",animateYearScrolling:!1}},90255:(e,t,n)=>{"use strict";n.d(t,{Z:()=>DatePicker});var r=n(67294),a=n(94770),o=n(72660),l=n(78527),s=["value"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c="MM/dd/yyyy";function DatePicker(e){var{value:t}=e,n=_objectWithoutProperties(e,s),u=(0,a.useMemo)((()=>(0,l.PL)(t,c)),[t]);return r.createElement(o.Z,_extends({value:u,format:c,className:"bl-data-grid-date-picker",classNameDialog:"bl-data-grid-date-picker-dialog"},n))}},77574:(e,t,n)=>{"use strict";n.d(t,{Z:()=>DateTime});n(21607);var r=n(67294),a=n(50066),o=n(94770),l=n(66986),s=n(68319),c=n(28121),u=["value","onChange","mode","size","className","classNameDialog","icon"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function DateTime(e){var{value:t,onChange:n,mode:c,size:d,className:h,classNameDialog:p,icon:g}=e,b=_objectWithoutProperties(e,u),m=(0,o.useCallback)((e=>{var{ts:t}=e;return n(t)}),[n]);return r.createElement("div",{className:"bl-datetime-picker-input"},r.createElement(l.Z.MuiPickersUtilsProvider,{utils:l.Z.LuxonUtils},r.createElement(l.Z.DateTimePicker,_extends({className:(0,a.cn)(h,"bl-datetime-picker"),value:t||null,onChange:m,variant:c,PopoverProps:{className:(0,a.cn)(p,"bl-datetime-picker-dialog")},size:d||"small",ampm:!1},b))),g&&r.createElement(s.Z,{icon:g,className:"bl-datetime-picker-input-icon"}))}DateTime.defaultProps={icon:c.gW.CALENDAR_MONTH,mode:"inline",disableToolbar:!0,inputVariant:"outlined"}},55166:(e,t,n)=>{"use strict";n.d(t,{Z:()=>MonthPicker});var r=n(67294),a=n(72660),o=n(91367),l=["value"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=[o.W.YEAR,o.W.MONTH];function MonthPicker(e){var{value:t}=e,n=_objectWithoutProperties(e,l);return r.createElement(a.Z,_extends({value:t&&new Date(t),views:s,format:"MM/yyyy",className:"bl-data-grid-date-picker",classNameDialog:"bl-data-grid-date-picker-dialog"},n))}},25242:(e,t,n)=>{"use strict";n.d(t,{Z:()=>TimePicker});var r=n(67294),a=n(94770),o=n(77574),l=n(78527),s=["value"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c="MM/dd/yyyy HH:mm";function TimePicker(e){var{value:t}=e,n=_objectWithoutProperties(e,s),u=(0,a.useMemo)((()=>(0,l.PL)(t,c)),[t]);return r.createElement(o.Z,_extends({value:u,format:c,className:"bl-data-grid-date-picker",classNameDialog:"bl-data-grid-date-picker-dialog"},n))}},83850:(e,t,n)=>{"use strict";n.d(t,{Z:()=>YearPicker});var r=n(67294),a=n(94770),o=n(72660),l=n(78527),s=n(91367),c=["value"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u="yyyy",d=[s.W.YEAR];function YearPicker(e){var{value:t}=e,n=_objectWithoutProperties(e,c),s=(0,a.useMemo)((()=>(0,l.PL)(t,u)),[t]);return r.createElement(o.Z,_extends({value:s,views:d,format:u,className:"bl-data-grid-date-picker",classNameDialog:"bl-data-grid-date-picker-dialog"},n))}},68319:(e,t,n)=>{"use strict";n.d(t,{Z:()=>FontIcon});var r=n(93379),a=n.n(r),o=n(7795),l=n.n(o),s=n(90569),c=n.n(s),u=n(3565),d=n.n(u),h=n(70609),p=n.n(h),g=n(44589),b=n.n(g),m=n(34104),v={};v.styleTagTransform=b(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=p();a()(m.Z,v);m.Z&&m.Z.locals&&m.Z.locals;var y=n(67294),_=n(66986),O=n(50066),E=n(28121),x={[E.gW.TOOLBAR_DATA_SETTINGS_BTN]:"filter_alt",[E.gW.TOOLBAR_TEXT_SIZE_BTN]:"format_size",[E.gW.BODY_GROUP_TITLE_CHEVRON_DOWN]:"expand_more",[E.gW.BODY_GROUP_TITLE_CHEVRON_UP]:"expand_less",[E.gW.BODY_GROUP_PAGING_NEXT]:"arrow_right",[E.gW.BODY_GROUP_PAGING_PREV]:"arrow_left",[E.gW.FOOTER_PAGING_LEFT]:"chevron_left",[E.gW.FOOTER_PAGING_RIGHT]:"chevron_right",[E.gW.MULTIPLE_CONTROLS_ADD]:"add",[E.gW.MULTIPLE_CONTROLS_REMOVE]:"clear",[E.gW.SORT_ARROW_UP]:"arrow_drop_up",[E.gW.SORT_ARROW_DOWN]:"arrow_drop_down",[E.gW.SETTINGS_GEAR]:"settings",[E.gW.CUSTOMIZE_LABEL_COLOR]:"format_color_fill",[E.gW.DELETE]:"delete",[E.gW.CALENDAR]:"event_note",[E.gW.ARROW_RIGHT]:"arrow_forward",[E.gW.ARROW_DOWN]:"arrow_downward",[E.gW.INFO]:"info",[E.gW.VISIBILITY]:"visibility",[E.gW.VISIBILITY_OFF]:"visibility_off",[E.gW.MULTILINE_EDITOR]:"format_indent_increase",[E.gW.GEO_EDITOR]:"add_location",[E.gW.CALENDAR_MONTH]:"calendar_month",[E.gW.WARNING]:"warning_amber",[E.gW.PLUS]:"add"};function FontIcon(e){var{className:t,icon:n,onClick:r,disabled:a,action:o,style:l}=e,s=(0,O.cn)("material-icons-round","bl-visualization-icon",t,{"bl-visualization-icon--disabled":a,"bl-visualization-icon--action":o});return y.createElement(_.Z.Icon,{className:s,component:"i",fontSize:"small",onClick:e=>{!a&&r&&r(e)},style:l},x[n]||n)}},68334:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Form});var r=n(67294),a=n(94184),o=n.n(a),l=n(94770),s=n(93379),c=n.n(s),u=n(7795),d=n.n(u),h=n(90569),p=n.n(h),g=n(3565),b=n.n(g),m=n(70609),v=n.n(m),y=n(44589),_=n.n(y),O=n(87094),E={};E.styleTagTransform=_(),E.setAttributes=b(),E.insert=p().bind(null,"head"),E.domAPI=d(),E.insertStyleElement=v();c()(O.Z,E);O.Z&&O.Z.locals&&O.Z.locals;var x=n(45697),S=n.n(x);function HelpBlock(e){var{children:t,className:n,small:a}=e;return t?r.createElement("span",{className:o()("bl-help-block",{small:a},n)},t):null}function Group(e){var{id:t,error:n,label:a,title:s,holdLabel:c,simpleLabel:u,onRef:d,children:h}=e,{className:p,labelClassName:g,fieldClassName:b,optional:m,inline:v,helpBlock:y}=e,_=a||c,O=(0,l.useMemo)((()=>o()("bl-form-group",p,{"bl-form-group--has-error":n,"bl-form-group--inline":v})),[p,n,v]),E=(0,l.useMemo)((()=>o()({"bl-control-label":!u},g)),[u,g]),x=o()("bl-control-field",b);return r.createElement("div",{id:t,ref:d,className:O},_&&r.createElement("label",{className:E,title:s},a,m?r.createElement("i",{className:"bl-optional-label"}," - optional"):"","string"==typeof a&&v?":":""),r.createElement("div",{className:x},h,r.createElement(HelpBlock,{small:!0},n)),r.createElement(HelpBlock,{small:!0},y))}Group.propTypes={id:S().string,className:S().string,error:S().oneOfType([S().string,S().node]),title:S().string,label:S().oneOfType([S().string,S().node]),inline:S().bool,helpBlock:S().oneOfType([S().string,S().node])};var w=["children"];function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Form(e){var{children:t}=e,n=_objectWithoutProperties(e,w),{id:a,className:s,inline:c,errors:u,onSubmit:d}=n;t&&(t=r.Children.toArray(t).map(((e,t)=>{if(!e)return e;var declaredProp=t=>e.type.propTypes&&e.type.propTypes[t],{id:n,name:a,label:o,error:l,optional:s}=e.props,d={key:e.key||n||a||o||t,optional:s};return declaredProp("error")&&(d.error=l||u&&u[n||a]),declaredProp("inline")&&(d.inline=c),(0,r.cloneElement)(e,d)})));var h=(0,l.useMemo)((()=>o()(s,{"form-inline":c})),[s,c]);return r.createElement("form",{id:a,className:h,onSubmit:e=>{e.preventDefault(),d&&d(e)}},t,r.createElement("button",{className:"hidden"}))}Form.Group=Group},49450:(e,t,n)=>{"use strict";n.d(t,{Z:()=>TextInput});var r=n(67294),a=n(50066),o=n(66986),l=n(94770),s=["label","onChange","className","value","type","variant","disabled","size","readOnly"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=["outlined","filled","standard"];function TextInput(e){var{label:t,onChange:n,className:u,value:d,type:h,variant:p,disabled:g,size:b,readOnly:m}=e,v=_objectWithoutProperties(e,s),y=(0,l.useCallback)((e=>{var t=e.target.value;if("text"!==h)if("number"!==h)n(t);else{var r=Number(t);if(isNaN(r))return;n(r)}else n(t)}),[n,h]),_=(0,l.useMemo)((()=>p&&c.includes(p)||"outlined"),[p]);return r.createElement(o.Z.TextField,_extends({label:t,size:b,onChange:y,type:h||"text",value:null==d?"":d.toString(),variant:_,disabled:g,className:(0,a.cn)(u,"bl-input","bl-input--".concat(_),{"bl-input--disabled":!!g,"bl-input--with-value":!!d}),InputLabelProps:{classes:{root:"bl-input-label",focused:"bl-input-label--focused",disabled:"bl-input-label--disabled",required:"bl-input-label--required",filled:"bl-input-label--filled",outlined:"bl-input-label--outlined"}},InputProps:{classes:{root:"bl-input-input-root",focused:"bl-input-input--focused",disabled:"bl-input-input--disabled"}},inputProps:{step:"number"===h?"any":void 0,readOnly:m}},v))}},91420:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Button});var r=n(67294),a=n(66986),o=n(15885),l=a.Z.makeStyles({root:{color:"#0CA0E5",textTransform:"capitalize",fontSize:12,minWidth:"auto","&:hover":{color:"#086d9c",background:"transparent"}}});function Button(e){var{onClick:t,disabled:n,className:s,tooltip:c,children:u}=e,d=l(),h=r.createElement(a.Z.Button,{className:s,onClick:t,disabled:n,disableRipple:!0,classes:d},u);return c?r.createElement(o.Z,{tooltip:c},r.createElement("span",null,h)):h}},78916:(e,t,n)=>{"use strict";n.d(t,{Z:()=>LoadingOverlay});var r=n(93379),a=n.n(r),o=n(7795),l=n.n(o),s=n(90569),c=n.n(s),u=n(3565),d=n.n(u),h=n(70609),p=n.n(h),g=n(44589),b=n.n(g),m=n(56754),v={};v.styleTagTransform=b(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=p();a()(m.Z,v);m.Z&&m.Z.locals&&m.Z.locals;var y=n(67294),_=n(50066),O=n(88686);function ErrorPanel(e){var{error:t,errorMessageMapByCode:n}=e,r=n&&n[null==t?void 0:t.code];return y.createElement("div",{className:"bl-overlay-loading--error-container"},y.createElement(O.z.ErrorPanel,{error:t,title:"Error",showStack:!1},y.createElement("h4",null,'Error: "'.concat(r||t.message,'"')),r&&y.createElement("h5",null,'Server error: "'.concat(t.message,'"'))))}function LoadingOverlay(e){var{children:t,loading:n,spinner:r,error:a,blurred:o=!0,errorMessageMapByCode:l}=e,s=r||O.z.Spinner;return y.createElement(y.Fragment,null,y.createElement("div",{className:(0,_.cn)("bl-overlay-loading--content",{"with-overlay":o&&(n||a)})},t),n&&y.createElement("div",{className:"bl-overlay-loading--spinner-container"},y.createElement(s,null)),a&&y.createElement(ErrorPanel,{error:a,errorMessageMapByCode:l}))}},79723:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(93379),a=n.n(r),o=n(7795),l=n.n(o),s=n(90569),c=n.n(s),u=n(3565),d=n.n(u),h=n(70609),p=n.n(h),g=n(44589),b=n.n(g),m=n(72328),v={};v.styleTagTransform=b(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=p();a()(m.Z,v);m.Z&&m.Z.locals&&m.Z.locals;var y=n(67294),_=n(94184),O=n.n(_),E=n(36015),x=n(66986),S=x.Z.makeStyles({root:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#fff",borderBottomColor:"#e7e7e7",padding:15,borderBottom:"1px solid #e5e5e5"},button:{backgroundColor:"transparent","&:hover":{backgroundColor:"transparent",cursor:"pointer","&::before":{color:"#888"}},"&::before":{content:"'x'",fontSize:16,color:"#999"}},title:{fontSize:18,color:"#000"}});var w=x.Z.makeStyles({root:{padding:15,backgroundColor:"#fff",overflow:"auto"}});var C=x.Z.makeStyles({root:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:15,borderTop:"1px solid #e5e5e5",backgroundColor:"#f4f4f4",borderTopColor:"#e7e7e7"}});var D=x.Z.makeStyles({paper:{position:"absolute",width:600,backgroundColor:"#FFF",marginTop:20,left:"50%",transform:"translateX(-50%)",display:"flex",flexDirection:"column",flex:"1 1",maxHeight:"90%"}});function modal_Modal(e){var{className:t,open:n,onClose:r,children:a}=e,o=D();return y.createElement(E.Z,{open:n,onClose:r,className:O()("bl-ui-sdk-modal",t),style:{zIndex:1050}},y.createElement("div",{className:O()("bl-modal-content",o.paper)},a))}modal_Modal.Header=function Header(e){var{title:t,onClose:n,children:r}=e,a=S();return y.createElement("div",{className:O()("bl-modal-header",a.root)},r||y.createElement("div",{className:O()("bl-modal-header-title",a.title)},t),y.createElement("div",{onClick:n,className:O()("bl-modal-header-button",a.button)}))},modal_Modal.Body=function Body(e){var{children:t}=e,n=w();return y.createElement("div",{className:O()("bl-modal-body",n.root)},t)},modal_Modal.Footer=function Footer(e){var{children:t}=e,n=C();return y.createElement("div",{className:O()("bl-modal-footer",n.root)},t)};const P=modal_Modal},76249:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Multiple});var r=n(93379),a=n.n(r),o=n(7795),l=n.n(o),s=n(90569),c=n.n(s),u=n(3565),d=n.n(u),h=n(70609),p=n.n(h),g=n(44589),b=n.n(g),m=n(11424),v={};v.styleTagTransform=b(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=p();a()(m.Z,v);m.Z&&m.Z.locals&&m.Z.locals;var y=n(67294),_=n(45697),O=n.n(_),E=n(94184),x=n.n(E),S=n(13218),w=n.n(S),C=n(73955),D=n.n(C),P=n(28121),T=n(94770),k=n(68319);function MultipleControls(e){var{removeBtn:t,disableAddBtn:n,onRemoveClick:r,onAddClick:a,FontIconComponent:o}=e;return y.createElement("div",{className:"multiple-controls"},y.createElement(o,{icon:P.gW.MULTIPLE_CONTROLS_ADD,action:!0,onClick:a,className:"add-control",disabled:n}),t&&y.createElement(o,{icon:P.gW.MULTIPLE_CONTROLS_REMOVE,action:!0,onClick:r,className:"remove-control"}))}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}MultipleControls.propTypes={disableAddBtn:O().bool,removeBtn:O().bool,onRemoveClick:O().func,onAddClick:O().func.isRequired};var generateKey=()=>D()("multiple-element-"),getValuesFromProps=e=>{var{values:t,initialValue:n,keyValue:r,allowEmpty:a}=e,o=[];if(t&&t.length>0)o=t;else if(!a){o=["function"==typeof n?n():n]}return o.map((e=>w()(e)&&void 0===e[r]?_objectSpread(_objectSpread({},e),{},{[r]:generateKey()}):e))};function Multiple(e){var{readOnly:t,className:n,min:r,max:a,keyValue:o,disabledAddBtn:l,modern:s,showRemoveBtnRequired:c}=e,{FontIconComponent:u,hideRemoveBtn:d}=e,[h,p]=(0,T.useState)((()=>getValuesFromProps(e)));(0,T.useEffect)((()=>p(getValuesFromProps(e))),[e.values]);var onChildValueChange=t=>n=>{var r=[...h],{keyValue:a}=e;n=w()(n)?_objectSpread(_objectSpread({},n),{},{[a]:r[t][a]}):n,r[t]=n,changeValues(r)},changeValues=t=>{var{onChange:n}=e;p(t),n(t)},onAddClick=t=>()=>{var{initialValue:n,keyValue:r}=e,a=[...h],o="function"==typeof n?n(t+1):n,l=w()(o)?_objectSpread(_objectSpread({},o),{},{[r]:generateKey()}):o;a.splice(t+1,0,l),changeValues(a)},onRemoveClick=t=>()=>{var n=[...h];n.splice(t,1),n.length>=r&&changeValues(n),e.onRemoveClick&&e.onRemoveClick(n,t)},g=l||a&&a<=h.length,b=!d&&(c||h.length>r),getKey=e=>w()(e)?e[o]:e;return y.createElement("div",{className:x()("bl-multiple",{modern:s},n)},h.map(((n,r)=>y.createElement("div",{key:getKey(n),className:"multiple-child-wrapper"},((t,n)=>{var{children:r}=e;return(0,y.cloneElement)(r,{index:n,value:t,onChange:onChildValueChange(n),onRemoveClick:onRemoveClick(n)})})(n,r),!(t||s)&&y.createElement(MultipleControls,{removeBtn:b,disableAddBtn:g,onAddClick:onAddClick(r),onRemoveClick:onRemoveClick(r),FontIconComponent:u}),s&&b&&y.createElement(u,{icon:P.gW.MULTIPLE_CONTROLS_REMOVE,onClick:onRemoveClick(r),className:"remove-control",action:!0})))),!t&&s&&y.createElement("div",{className:"add-icon-wrapper"},y.createElement(u,{icon:P.gW.MULTIPLE_CONTROLS_ADD,onClick:onAddClick(h.length-1),className:"add-control",disabled:g,action:!0})))}Multiple.defaultProps={keyValue:"_key",min:1,allowEmpty:!1,FontIconComponent:k.Z},Multiple.propTypes={readOnly:O().bool,values:O().array,min:O().number,max:O().number,keyValue:O().string,initialValue:O().any,onChange:O().func.isRequired,modern:O().bool,onRemoveClick:O().func}},79035:(e,t,n)=>{"use strict";n.d(t,{Z:()=>NumberInput});var r=n(67294),a=n(49450);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function NumberInput(e){return r.createElement(a.Z,_extends({type:"number"},e))}},80306:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Select});var r=n(67294),a=n(13218),o=n.n(a),l=n(24350),s=n.n(l),c=n(66986),u=n(50066),d=n(94770);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}var h=["outlined","filled","standard"],p=[{value:"true",label:"TRUE",itemValue:!0},{value:"false",label:"FALSE",itemValue:!1},{value:"null",label:"NULL",itemValue:null}],getValue=(e,t)=>t&&!e?[]:Array.isArray(e)?e.map((e=>getValue(e))):o()(e)?e.value||"":e||"";function Select(e){var{className:t,label:n,value:a,onChange:o,disabled:l,multiple:p,variant:g,size:b,valuesRenderer:m,clearable:v}=e,{readOnly:y}=e,_=e.classNamesPrefix||"bl-select",O=(0,d.useMemo)((()=>getValue(a,p)),[a,p]),E=(0,d.useMemo)((()=>g&&h.includes(g)||"outlined"),[g]),x=(0,d.useMemo)((()=>{var t=e.options||[];return v?[{value:"",label:"None"},...t]:t}),[e.options,v]),S=l||!x.length,w=(0,d.useMemo)((()=>s()(x,(e=>getValue(e)))),[x]),C=(0,d.useCallback)((e=>p?e.map((e=>w[e])):w[e]),[p,w]),D=(0,d.useCallback)((e=>{o(C(e.target.value))}),[o,C]),P=(0,d.useCallback)((e=>m?m(C(e)):null),[m,C]),T=(0,d.useCallback)(((e,t)=>v&&0===t?r.createElement("em",null,e.label):void 0===e.label?e:e.label),[v]);return r.createElement(c.Z.FormControl,{className:(0,u.cn)(t,_,{["".concat(_,"--disabled")]:!!S}),disabled:S,variant:E,size:b},r.createElement(c.Z.InputLabel,{classes:{root:"".concat(_,"-label"),disabled:"".concat(_,"-label--disabled"),focused:"".concat(_,"-label--focused"),outlined:"".concat(_,"-label-outlined"),filled:"".concat(_,"-label-filled")},className:(0,u.cn)({["".concat(_,"-label-standard")]:"standard"===E})},n),r.createElement(c.Z.MuiSelect,{label:n||void 0,value:O,onChange:D,renderValue:m&&P,multiple:p,className:(0,u.cn)("".concat(_,"-box"),{["".concat(_,"--disabled")]:!!S,["".concat(_,"-outlined")]:"outlined"===E,["".concat(_,"-filled")]:"filled"===E,["".concat(_,"-standard")]:"standard"===E}),classes:{root:"".concat(_,"-root"),icon:"".concat(_,"-icon")},inputProps:{readOnly:y}},x.map(((e,t)=>r.createElement(c.Z.MenuItem,{key:t,value:void 0===e.value?e:e.value,classes:{root:"".concat(_,"-option")}},T(e,t))))))}Select.Boolean=function BooleanSelect(e){var t=_extends({},(function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),n=(0,d.useCallback)((t=>e.onChange(t&&t.itemValue)),[e.onChange]),a=p.find((e=>e.value==="".concat(t.value)));return r.createElement(Select,_extends({},t,{options:p,value:a,onChange:n}))}},59209:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Textarea});var r=n(67294),a=n(50066),o=n(66986),l=n(94770),s=["label","onChange","className","value","variant","disabled","size","readOnly","minRows","maxRows","maxLength"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=["outlined","filled","standard"];function Textarea(e){var{label:t,onChange:n,className:u,value:d,variant:h,disabled:p,size:g,readOnly:b,minRows:m,maxRows:v,maxLength:y}=e,_=_objectWithoutProperties(e,s),{autoFocus:O}=e,E=(0,l.useCallback)((e=>{var t=e.target.value;n(t)}),[n]),x=(0,l.useMemo)((()=>h&&c.includes(h)||"outlined"),[h]);return r.createElement(o.Z.TextField,_extends({label:t,size:g,onChange:E,multiline:!0,autoFocus:O,minRows:m,maxRows:v,value:null==d?"":d.toString(),variant:x,disabled:p,className:(0,a.cn)(u,"bl-textarea","bl-textarea--".concat(x),{"bl-textarea--disabled":p,"bl-textarea--with-value":d}),InputLabelProps:{classes:{root:"bl-textarea-label",focused:"bl-textarea-label--focused",disabled:"bl-textarea-label--disabled",required:"bl-textarea-label--required",filled:"bl-textarea-label--filled",outlined:"bl-textarea-label--outlined"}},InputProps:{readOnly:!!b,classes:{root:"bl-textarea-input-root",focused:"bl-textarea-input--focused",disabled:"bl-textarea-input--disabled"}},inputProps:{maxLength:y}},_))}},84642:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ConditionsSection});var r=n(93379),a=n.n(r),o=n(7795),l=n.n(o),s=n(90569),c=n.n(s),u=n(3565),d=n.n(u),h=n(70609),p=n.n(h),g=n(44589),b=n.n(g),m=n(61666),v={};v.styleTagTransform=b(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=p();a()(m.Z,v);m.Z&&m.Z.locals&&m.Z.locals;var y=n(67294),_=n(94770),O=n(76249),E=n(24350),x=n.n(E),S=n(57557),w=n.n(S),C=n(27361),D=n.n(C),P=n(9087),T=n(28121);function OperatorSelect(e){var{dataType:t,value:n,onChange:r,operators:a,components:o}=e,{Select:l}=o;return t===T.oS.DATETIME?y.createElement(DateTimeOperatorSelect,{value:n,onChange:r,components:o}):y.createElement(l,{options:a,value:n,onChange:r,size:"small"})}function DateTimeOperatorSelect(e){var{value:t="",onChange:n,components:r}=e,{Select:a}=r,[o,l]=t.split("-"),s=P.Sq[o];return y.createElement("div",{className:"bl-visualization-data-settings-datetime-operator-select"},y.createElement(a,{options:P.Sk,value:o,onChange:e=>{var{value:t}=e;return n(t)},size:"small"}),y.createElement(a,{options:s,value:l,onChange:e=>{var{value:r}=e;n(l?o+"-"+r:t+"-"+r)},size:"small"}))}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Item(e){var{columns:t,value:n,onChange:r,lastIndex:a,index:o,getColumnLabel:l,components:s}=e,{columnName:c,operator:u,conditionValue:d,combinator:h}=n,{Select:p}=s,g=(0,_.useMemo)((()=>((e,t)=>e.find((e=>e.name===t)))(t,c)),[t,c]),b=(0,_.useMemo)((()=>(e=>e.map((e=>{var{name:t}=e;return t})))(t)),[t]),m=(0,_.useMemo)((()=>b.map((e=>({value:e,label:l?l(e):e})))),[b,l]),v=null==g?void 0:g.type,O=P.HH[v]&&P.HH[v](s)||[],E=(0,_.useMemo)((()=>x()(O,"value")),[O]),S=D()(E,[u,"renderInput"]),onFieldChange=(e,t)=>a=>{var o=_objectSpread(_objectSpread({},n),{},{[e]:(null==a?void 0:a.value)||a});o=w()(o,t),r(o)},C=-1!==a&&a!==o;return y.createElement("div",{className:"bl-visualizations-data-settings-conditions-item"},y.createElement("div",{className:"bl-visualizations-data-settings-conditions-item__label bl-modal-field-label"},"Column:"),y.createElement(p,{options:m,value:c,onChange:onFieldChange("columnName",["operator","conditionValue"]),size:"small"}),c?y.createElement(OperatorSelect,{dataType:v,operators:O,value:u,onChange:onFieldChange("operator",["conditionValue"]),components:s}):y.createElement("div",null),S?y.createElement(S,{value:d,onChange:onFieldChange("conditionValue"),size:"small"}):y.createElement("div",null),C&&y.createElement(p,{options:P.c7,value:h||P.c7[0].value,onChange:onFieldChange("combinator"),size:"small"}))}Item.defaultProps={columns:[]};var k={columnName:null,operator:null,conditionValue:"",combinator:null};function ConditionsSection(e){var{columns:t,onChange:n,getColumnLabel:r,conditions:a,error:o,showError:l,components:s}=e,{FontIcon:c}=s,u=(0,_.useMemo)((()=>{if(!a.length)return!0;var{columnName:e}=a[a.length-1];return!e||!!o}),[a,o]),d=(0,_.useCallback)((e=>{e.length||n([])}),[n]);return y.createElement(y.Fragment,null,y.createElement(O.Z,{FontIconComponent:c,values:a,onChange:n,initialValue:k,readOnly:u,className:"bl-visualizations-data-settings-conditions",modern:!0,min:1,onRemoveClick:d,showRemoveBtnRequired:!0},y.createElement(Item,{lastIndex:a.length-1,columns:t,getColumnLabel:r,components:s})),l&&o&&y.createElement("div",{className:"bl-visualizations-data-settings-empty-field-alert bl-visualizations-text-danger"},o))}},9087:(e,t,n)=>{"use strict";n.d(t,{AT:()=>j,Ds:()=>I,HH:()=>T,Sk:()=>v,Sq:()=>O,c7:()=>P,g5:()=>g,kq:()=>b,on:()=>k});var r=n(28121),a=n(49450),o=n(79035),l=n(91367),s=n(25242),c=n(83850),u=n(55166),d=n(90255),h=n(83993),p=n(88390),g={[r.SM.DATA_TABLE]:{whereClause:h.I2.DefaultQuery.whereClause,filter:h.I2.DefaultQuery.filter,groupBy:h.I2.DefaultQuery.groupBy,sortBy:h.I2.DefaultQuery.sortBy,aggregateFunction:h.I2.DefaultQuery.aggregateFunction,aggregateColumn:h.I2.DefaultQuery.aggregateColumn,refreshPolicy:h.I2.DefaultQuery.refreshPolicy,refreshInterval:h.I2.DefaultQuery.refreshInterval},[r.SM.DATA_VIEW]:{filter:p.TI.DefaultQuery.filter}},b=[{value:"Count",label:"Count"},{value:"Sum",label:"Sum"},{value:"Avg",label:"Average"},{value:"Min",label:"Min"},{value:"Max",label:"Max"}],m=[{label:"IS NULL",value:"isNull"},{label:"IS NOT NULL",value:"isNotNull"},{label:"IS TRUE",value:"isTrue"},{label:"IS NOT TRUE",value:"isNotTrue"},{label:"IS FALSE",value:"isFalse"},{label:"IS NOT FALSE",value:"isNotFalse"}],v=[{value:"is",label:"IS"},{value:"isNot",label:"IS NOT"},{value:"before",label:"BEFORE"},{value:"after",label:"AFTER"},{value:"atOrBefore",label:"AT OR BEFORE"},{value:"atOrAfter",label:"AT OR AFTER"},{value:"within",label:"WITHIN"},{value:"notWithin",label:"NOT WITHIN"}],y=[{value:"specificDate",label:"SPECIFIC DATE"},{value:"specificTime",label:"SPECIFIC TIME"},{value:"specificMonth",label:"SPECIFIC MONTH"},{value:"specificYear",label:"SPECIFIC YEAR"},{value:"today",label:"TODAY"},{value:"tomorrow",label:"TOMORROW"},{value:"yesterday",label:"YESTERDAY"}],_=[{value:"thePastWeek",label:"THE PAST WEEK"},{value:"thePastMonth",label:"THE PAST MONTH"},{value:"thePastYear",label:"THE PAST YEAR"},{value:"theNextWeek",label:"THE NEXT WEEK"},{value:"theNextMonth",label:"THE NEXT MONTH"},{value:"theNextYear",label:"THE NEXT YEAR"},{value:"theNextDays",label:"THE NEXT DAYS"},{value:"thePastDays",label:"THE PAST DAYS"}],O={is:y,isNot:y,before:y,after:y,atOrBefore:y,atOrAfter:y,within:_,notWithin:_},E=function getDateTimeTypeOperators(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.DateTimePickers||{},n=t[l.w.DATE_PICKER]||d.Z,r=t[l.w.TIME_PICKER]||s.Z,a=t[l.w.MONTH_PICKER]||u.Z,h=t[l.w.YEAR_PICKER]||c.Z,p=e.NumberInput||o.Z;return[{value:"is-specificDate",renderInput:n},{value:"is-specificTime",renderInput:r},{value:"is-specificMonth",renderInput:a},{value:"is-specificYear",renderInput:h},{value:"is-today"},{value:"is-tomorrow"},{value:"is-yesterday"},{value:"isNot-specificDate",renderInput:n},{value:"isNot-specificTime",renderInput:r},{value:"isNot-specificMonth",renderInput:a},{value:"isNot-specificYear",renderInput:h},{value:"isNot-today"},{value:"isNot-tomorrow"},{value:"isNot-yesterday"},{value:"before-specificDate",renderInput:n},{value:"before-specificTime",renderInput:r},{value:"before-specificMonth",renderInput:a},{value:"before-specificYear",renderInput:h},{value:"before-today"},{value:"before-tomorrow"},{value:"before-yesterday"},{value:"after-specificDate",renderInput:n},{value:"after-specificTime",renderInput:r},{value:"after-specificMonth",renderInput:a},{value:"after-specificYear",renderInput:h},{value:"after-today"},{value:"after-tomorrow"},{value:"after-yesterday"},{value:"atOrBefore-specificDate",renderInput:n},{value:"atOrBefore-specificTime",renderInput:r},{value:"atOrBefore-specificMonth",renderInput:a},{value:"atOrBefore-specificYear",renderInput:h},{value:"atOrBefore-today"},{value:"atOrBefore-tomorrow"},{value:"atOrBefore-yesterday"},{value:"atOrAfter-specificDate",renderInput:n},{value:"atOrAfter-specificTime",renderInput:r},{value:"atOrAfter-specificMonth",renderInput:a},{value:"atOrAfter-specificYear",renderInput:h},{value:"atOrAfter-today"},{value:"atOrAfter-tomorrow"},{value:"atOrAfter-yesterday"},{value:"within-thePastWeek"},{value:"within-thePastMonth"},{value:"within-thePastYear"},{value:"within-theNextWeek"},{value:"within-theNextMonth"},{value:"within-theNextYear"},{value:"within-theNextDays",renderInput:p},{value:"within-thePastDays",renderInput:p},{value:"notWithin-thePastWeek"},{value:"notWithin-thePastMonth"},{value:"notWithin-thePastYear"},{value:"notWithin-theNextWeek"},{value:"notWithin-theNextMonth"},{value:"notWithin-theNextYear"},{value:"notWithin-theNextDays",renderInput:p},{value:"notWithin-thePastDays",renderInput:p}]},x=function getRawTypeOperators(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Input||a.Z;return[{label:"EQUALS",value:"equal",renderInput:t},{label:"DOES NOT EQUAL",value:"notEqual",renderInput:t},{label:"CONTAINS",value:"contains",renderInput:t},{label:"DOES NOT CONTAIN",value:"notContains",renderInput:t},{label:"STARTS WITH",value:"startsWith",renderInput:t},{label:"DOES NOT START WITH",value:"notStartsWith",renderInput:t},{label:"ENDS WITH",value:"endsWith",renderInput:t},{label:"DOES NOT END WITH",value:"notEndsWith",renderInput:t},{label:"IS EMPTY",value:"isEmpty"},{label:"IS NOT EMPTY",value:"isNotEmpty"},{label:"IS NULL",value:"isNull"},{label:"IS NOT NULL",value:"isNotNull"}]},S=function getNumberTypeOperators(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.NumberInput||o.Z;return[{label:"GREATER THAN",value:">",renderInput:t},{label:"LESS THAN",value:"<",renderInput:t},{label:"GREATER OR EQUAL",value:">=",renderInput:t},{label:"LESS OR EQUAL",value:"<=",renderInput:t},{label:"EQUALS",value:"equal",renderInput:t},{label:"DOES NOT EQUAL",value:"notEqual",renderInput:t},{label:"STARTS WITH",value:"startsWith",renderInput:t},{label:"DOES NOT START WITH",value:"notStartsWith",renderInput:t},{label:"ENDS WITH",value:"endsWith",renderInput:t},{label:"DOES NOT END WITH",value:"notEndsWith",renderInput:t}]},w=E(),C=x(),D=S(),P=[{value:"AND",label:"AND"},{value:"OR",label:"OR"}],T={[r.oS.STRING]:x,[r.oS.TEXT]:x,[r.oS.FILE_REF]:x,[r.oS.BOOLEAN]:()=>m,[r.oS.INT]:S,[r.oS.DOUBLE]:S,[r.oS.AUTO_INCREMENT]:S,[r.oS.MONEY]:S,[r.oS.DECIMAL]:S,[r.oS.DATETIME]:E},k=[...C.map((e=>{var{value:t}=e;return t})),...m.map((e=>{var{value:t}=e;return t})),...D.map((e=>{var{value:t}=e;return t})),...w.map((e=>{var{value:t}=e;return t}))],I=[...C.filter((e=>{var{renderInput:t}=e;return!!t})).map((e=>{var{value:t}=e;return t})),...m.filter((e=>{var{renderInput:t}=e;return!!t})).map((e=>{var{value:t}=e;return t})),...D.filter((e=>{var{renderInput:t}=e;return!!t})).map((e=>{var{value:t}=e;return t})),...w.filter((e=>{var{renderInput:t}=e;return!!t})).map((e=>{var{value:t}=e;return t}))],j={WHERE_CLAUSE:"WHERE_CLAUSE",AGGREGATIONS:"AGGREGATIONS",GROUP_BY:"GROUP_BY",SORT_BY:"SORT_BY",REFRESH_POLICY:"REFRESH_POLICY"};j.Default={[j.WHERE_CLAUSE]:!0,[j.AGGREGATIONS]:!0,[j.GROUP_BY]:!0,[j.SORT_BY]:!0,[j.REFRESH_POLICY]:!0}},19331:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l,e:()=>useComponentsContext});var r=n(67294),a=n(94770),o=(0,r.createContext)(null),useComponentsContext=()=>(0,a.useContext)(o).components;const l=o},34410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>DataSettings});var r=n(93379),a=n.n(r),o=n(7795),l=n.n(o),s=n(90569),c=n.n(s),u=n(3565),d=n.n(u),h=n(70609),p=n.n(h),g=n(44589),b=n.n(g),m=n(58177),v={};v.styleTagTransform=b(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=p();a()(m.Z,v);m.Z&&m.Z.locals&&m.Z.locals;var y=n(67294),_=n(28121),O=n(17788),E=n(94770),x=n(91420),S=n(78527),w=n(47970),C=n(26288),D=n(19331),P=n(9087);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DataSettings(e){var{query:t,columns:n,components:r,getColumnLabel:a,dataSource:o,hideAdvanced:l}=e,{onQueryChange:s,modalClassName:c,LocalStorageManager:u,filterableColumns:d}=e,[h,p]=(0,E.useState)(!1),g=(0,E.useMemo)((()=>(0,S.vD)(r)),[r]),b=(0,E.useMemo)((()=>_objectSpread(_objectSpread({},P.AT.Default),e.options)),[e.options]),m=(0,E.persistContextValue)({components:g,LocalStorageManager:u,options:b}),{FontIcon:v}=g,T=(0,E.useCallback)((()=>p(!0)),[]),k=(0,E.useCallback)((()=>p(!1)),[]),I=(0,E.useMemo)((()=>!(0,O.h)(t,P.g5[o.type],Object.keys(P.g5[o.type]))),[t,o.type]);return y.createElement(w.Z.ButtonContainer,{isActive:!I},y.createElement(D.Z.Provider,{value:m},y.createElement(x.Z,{onClick:T,tooltip:"Set data settings"},y.createElement(v,{icon:_.gW.TOOLBAR_DATA_SETTINGS_BTN})),h&&y.createElement(C.Z,{dataSource:o,onHide:k,onQueryChange:s,columns:n,filterableColumns:d,query:t,getColumnLabel:a,className:c,hideAdvanced:l})))}DataSettings.defaultProps={query:{},columns:[],filterableColumns:[],options:P.AT.Default}},26288:(e,t,n)=>{"use strict";n.d(t,{Z:()=>DataSettingsModal,F:()=>validateConditions});var r=n(67294),a=n(94184),o=n.n(a),l=n(87827),s=n(78700),c=n(17788),u=n(94770),d=n(28121),h=n(79723),p=n(68334),g=n(19331),b=n(9087),m=n(84642),v=n(93379),y=n.n(v),_=n(7795),O=n.n(_),E=n(90569),x=n.n(E),S=n(3565),w=n.n(S),C=n(70609),D=n.n(C),P=n(44589),T=n.n(P),k=n(26291),I={};I.styleTagTransform=T(),I.setAttributes=w(),I.insert=x().bind(null,"head"),I.domAPI=O(),I.insertStyleElement=D();y()(k.Z,I);k.Z&&k.Z.locals&&k.Z.locals;var j=n(83993),M=[{value:"false",label:"None"},{value:d.MJ.RT,label:"Real Time"},{value:d.MJ.INTERVAL,label:"Interval"}],z=b.g5[d.SM.DATA_TABLE],isColumnNameEqualToAggFunctions=e=>b.kq.some((t=>{var{value:n}=t;return n===e.toLowerCase()}));var A={[d.SM.DATA_TABLE]:function DataTableSource(e){var{query:t,onQueryChange:n,columns:a}=e,{whereClause:o,aggregateFunction:l,aggregateColumn:s,sortBy:c,groupBy:h,refreshInterval:m,refreshPolicy:v}=t,{options:y,components:_}=(0,u.useContext)(g.Z),{Select:O,Input:E,SortSelect:x,NumberInput:S}=_,w=(0,u.useMemo)((()=>{var e=[];return a.forEach((t=>{isColumnNameEqualToAggFunctions(t.name)&&"RELATION_LIST"!==t.type||e.push(t.name)})),e}),[a]),C=(0,u.useMemo)((()=>{var e=[];return a.forEach((t=>{isColumnNameEqualToAggFunctions(t.name)||e.push(t.name)})),e}),[a]),D=(0,u.useMemo)((()=>{var e=C.map((e=>({value:e,label:e})));if(l&&s){var t=(0,j.s2)(l,s);e.push({value:t,label:t.replace(/_/g," ")})}return e}),[l,s,C]),P=(0,u.useCallback)((e=>{var t=e||z.whereClause;n({whereClause:t})}),[n]),T=(0,u.useCallback)((e=>{var t=null==e?void 0:e.value,r={aggregateFunction:t};t||(r.aggregateFunction=z.aggregateFunction,r.aggregateColumn=z.aggregateColumn),n(r)}),[n]),k=(0,u.useCallback)((e=>{n({aggregateColumn:e})}),[n]),I=(0,u.useCallback)((e=>{var t=e||z.groupBy;n({groupBy:t})}),[n]),A=(0,u.useCallback)((e=>{var t=e&&e.length?e:z.sortBy;n({sortBy:t})}),[n]),N=(0,u.useCallback)((e=>{var{value:t}=e,r={refreshPolicy:t,refreshInterval:m||60};"false"===t&&(r.refreshPolicy=z.refreshPolicy,r.refreshInterval=z.refreshInterval),n(r)}),[n,m]),L=(0,u.useCallback)((e=>{n({refreshInterval:e})}),[n]),R=y[b.AT.WHERE_CLAUSE],F=y[b.AT.AGGREGATIONS],B=y[b.AT.GROUP_BY],W=y[b.AT.SORT_BY],H=y[b.AT.REFRESH_POLICY];return r.createElement("div",{className:"bl-visualizations-data-settings--advanced--data-table-content"},R&&r.createElement(p.Z.Group,{label:"Where Clause"},r.createElement(E,{value:o,onChange:P,size:"small"})),F&&r.createElement("div",{className:"aggregation-options"},r.createElement(p.Z.Group,{label:"Aggregation",className:"aggregation-function-group"},r.createElement(O,{value:l,options:b.kq,onChange:T,size:"small",clearable:!0})),r.createElement(p.Z.Group,{label:"Column",className:"aggregation-column-group"},r.createElement(O,{value:s,options:w,onChange:k,disabled:!l,size:"small"}))),(B||W)&&r.createElement("div",{className:"group-and-sort-options"},B&&r.createElement(p.Z.Group,{label:"Group By",className:"group-by-field-group"},r.createElement(O,{value:h,options:C,onChange:I,clearable:!0,size:"small"})),W&&r.createElement(p.Z.Group,{label:"Sort By",className:"sort-by-field-group"},r.createElement(x,{value:Array.isArray(c)?c:[],options:D,onChange:A,size:"small"}))),H&&r.createElement("div",{className:"refresh-policy-options"},r.createElement(p.Z.Group,{label:"Refresh Policy",className:"sort-by-field-group"},r.createElement(O,{className:"refresh-type-group",value:v||"false",options:M,onChange:N,size:"small"})),v===d.MJ.INTERVAL&&r.createElement(p.Z.Group,{className:"refresh-interval-group"},r.createElement("span",{className:"left-label"},"every"),r.createElement(S,{value:m,onChange:L,size:"small"}),r.createElement("span",{className:"right-label"},"seconds"))))}};function Advanced(e){var{dataSource:t,onQueryChange:n,query:a,columns:o}=e,{LocalStorageManager:l,components:s}=(0,u.useContext)(g.Z),{CheckBox:c}=s,d=A[t.type],[h,p]=(0,u.useState)((()=>!(!l||!l.getShowDataSettingsAdvanced)&&l.getShowDataSettingsAdvanced())),b=(0,u.useCallback)((()=>{var e=!h;l&&l.setShowDataSettingsAdvanced&&l.setShowDataSettingsAdvanced(e),p(e)}),[h,l]);return d?r.createElement("div",{className:"bl-visualizations-modal-data-settings-advanced-section"},r.createElement(c,{className:"bl-data-settings-advanced-control",onChange:b,value:h,label:"Show advanced settings"}),h&&r.createElement("div",{className:"bl-visualizations-data-settings--advanced-section-content"},r.createElement(d,{columns:o,query:a,onQueryChange:n}))):null}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var validateConditions=e=>{for(var t=null,n=0;n<e.length;n++){var{columnName:r,operator:a,conditionValue:o}=e[n];if(r||n!==e.length-1){if(!b.on.includes(a)){t="Operator";break}if(b.Ds.includes(a)&&!o){t="Condition Value";break}}}if(t)return'Please fill field: "'.concat(t,'"')};function DataSettingsModal(e){var{columns:t,onHide:n,getColumnLabel:a,dataSource:v,className:y,onQueryChange:_,hideAdvanced:O}=e,{filterableColumns:E}=e,x=(0,g.e)(),{Button:S}=x,[w,C]=(0,u.useObjectState)({initialQuery:e.query,query:e.query,validated:!1,error:{}}),{query:D,validated:P,error:T,initialQuery:k}=w,{filter:I}=D;(0,u.useEffect)((()=>{var e=validateConditions(I);if(e)C({error:_objectSpread(_objectSpread({},T),{},{filter:e})});else{var t=_objectSpread({},T);delete t.filter,C({error:t})}}),[D]);var j=(0,u.useMemo)((()=>(e=>{var t=(e=>{var t=[];return e.forEach(((n,r)=>{var{columnName:a,operator:o,conditionValue:l,combinator:s}=n;if(1!==e.length||a){var c=e.length-1===r;!c||a?(s=c?null:s||"AND",t.push({columnName:a,operator:o,conditionValue:l,combinator:s})):t[r-1].combinator=null}})),t})(e.filter);return _objectSpread(_objectSpread({},e),{},{filter:t})})(D)),[D]),M=(0,u.useMemo)((()=>(0,c.h)(j,k)),[j,k]),z=(0,u.useCallback)((()=>{var e=_objectSpread(_objectSpread({},D),b.g5[v.type]);C({query:e})}),[D,v.type]),A=(0,u.useCallback)((()=>{Object.keys(T).length||(_(j),n()),C({validated:!0})}),[j,_,n,T]),N=(0,u.useCallback)((e=>C({query:_objectSpread(_objectSpread({},D),e)})),[D]),L=(0,u.useCallback)((e=>N({filter:e})),[N]),R=d.SM.Labels[v.type];return r.createElement(h.Z,{open:!0,onClose:n,className:o()("bl-visualization-modal-data-settings",y)},r.createElement(l.M,{utils:s.Z},r.createElement(h.Z.Header,{title:"Data Settings",onClose:n}),r.createElement(h.Z.Body,null,r.createElement(p.Z.Group,{label:"".concat(R," Name"),inline:!0,className:"bl-visualization-data-settings--data-source-name"},v.name),r.createElement(m.Z,{columns:E,onChange:L,conditions:I,getColumnLabel:a,error:T.filter,showError:P,components:x}),!O&&r.createElement(Advanced,{query:D,dataSource:v,onQueryChange:N,columns:t})),r.createElement(h.Z.Footer,null,r.createElement(S,{onClick:z},"RESET ALL"),r.createElement(S,{onClick:n},"CANCEL"),r.createElement(S,{onClick:A,primary:!0,disabled:!M},"SAVE"))))}},47970:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(93379),a=n.n(r),o=n(7795),l=n.n(o),s=n(90569),c=n.n(s),u=n(3565),d=n.n(u),h=n(70609),p=n.n(h),g=n(44589),b=n.n(g),m=n(69802),v={};v.styleTagTransform=b(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=p();a()(m.Z,v);m.Z&&m.Z.locals&&m.Z.locals;var y=n(67294),_=n(50066);function ProgressBar(e){var{loadingStatus:t}=e,{loading:n,progress:r}=t,a=n&&r?Math.round(100*r):0,o={width:"".concat(a,"%")};return y.createElement("div",{className:"bl-visualization-toolbar__progress-bar"},y.createElement("div",{className:"bl-visualization-toolbar__progress-bar-slider",style:o}))}function ToolbarButtonContainer(e){var{className:t,isDisabled:n,isActive:r,children:a}=e,o=(0,_.cn)(t,"bl-visualization-toolbar__btn-container",{"bl-visualization-toolbar__btn-container__disabled":n,"bl-visualization-toolbar__btn-container__active":r});return y.createElement("div",{className:o},a)}const O=(0,y.memo)(ToolbarButtonContainer);function VisualizationsToolbar(e){var{children:t,className:n,loadingStatus:r}=e;return y.createElement("div",{className:(0,_.cn)("bl-visualization-toolbar",n)},y.createElement("div",{className:"bl-visualization-toolbar__controls"},t),y.createElement(ProgressBar,{loadingStatus:r}))}VisualizationsToolbar.ButtonContainer=O;const E=VisualizationsToolbar},15885:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Tooltip});var r=n(67294),a=n(66986),o=a.Z.makeStyles({arrow:{color:"#000"},tooltip:{color:"#FFF",background:"#000",borderRadius:0,fontSize:12}});function Tooltip(e){var{open:t,onOpen:n,onClose:l,tooltip:s,children:c}=e,u=o();return r.createElement(a.Z.Tooltip,{classes:u,open:t,onOpen:n,onClose:l,title:s,placement:"top",arrow:!0},c)}Tooltip.defaultProps={tooltip:null}},78527:(e,t,n)=>{"use strict";n.d(t,{nY:()=>G,fG:()=>composeOptions,PL:()=>formatTimestampDate,vD:()=>U});var r=n(99490),a=n(91367),o=n(68319),l=n(49450),s=n(59209),c=n(79035),u=n(80306),d=n(93379),h=n.n(d),p=n(7795),g=n.n(p),b=n(90569),m=n.n(b),v=n(3565),y=n.n(v),_=n(70609),O=n.n(_),E=n(44589),x=n.n(E),S=n(49150),w={};w.styleTagTransform=x(),w.setAttributes=y(),w.insert=m().bind(null,"head"),w.domAPI=g(),w.insertStyleElement=O();h()(S.Z,w);S.Z&&S.Z.locals&&S.Z.locals;var C=n(67294),D=n(28121),P=n(94770),T=["options","value","onChange"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var k="desc",I={asc:D.gW.SORT_ARROW_UP,[k]:D.gW.SORT_ARROW_DOWN};function SortingSelect(e){var{options:t,value:n,onChange:r}=e,a=_objectWithoutProperties(e,T),o=(0,P.useMemo)((()=>{var e={};return n.forEach((t=>{e[t.value]=t.dir})),t.map((t=>({value:t.value,label:t.label,dir:e[t.value]||"desc"})))}),[t,n]),onDirClick=e=>()=>{var t=e.dir===k?"asc":k,a=n.map((n=>_objectSpread(_objectSpread({},n),{},{dir:n.value===e.value?t:n.dir})));r(a)};return C.createElement(u.Z,_extends({value:n,options:o,valuesRenderer:e=>C.createElement("div",{className:"bl-select-sorting-values"},e.map((e=>C.createElement(SelectValue,{option:e,onDirClick:onDirClick(e)})))),onChange:r,multiple:!0},a))}var SelectValue=e=>{var{option:t,onDirClick:n}=e;return C.createElement("div",{className:"bl-select-sorting-value",onClick:n},t.label," ",C.createElement(o.Z,{icon:I[t.dir]}))},j=n(94184),M=n.n(j),z=n(66986),A=n(15885),onLabelClick=e=>e.stopPropagation();function Checkbox(e){var{value:t,onChange:n,label:r,className:a,onClick:o,tooltip:l}=e,s=C.createElement(z.Z.Checkbox,{checked:!!t,classes:{root:"bl-checkbox-root"},onChange:n,onClick:o}),c=C.createElement(A.Z,{tooltip:l},s);return C.createElement("div",{className:M()(a,"bl-checkbox",{"bl-checkbox--checked":!!t})},C.createElement(z.Z.FormControlLabel,{label:r,style:{marginLeft:0},classes:{root:"bl-checkbox-label-root",label:"bl-checkbox-label"},control:l?c:s,onClick:onLabelClick}))}var N=n(59002),L={};L.styleTagTransform=x(),L.setAttributes=y(),L.insert=m().bind(null,"head"),L.domAPI=g(),L.insertStyleElement=O();h()(N.Z,L);N.Z&&N.Z.locals&&N.Z.locals;var R=n(50066);function Spinner(e){var{className:t,size:n=50}=e;return C.createElement("svg",{className:(0,R.cn)("base-spinner",t),style:{color:"#c5c5c5",margin:"auto",width:n,height:n}},C.createElement("circle",{cx:"50%",cy:"50%",r:"40%",fill:"none",stroke:"currentColor",strokeWidth:3}))}var F=n(25242),B=n(83850),W=n(55166),H=n(90255),Z=["children","className","tooltip","primary","size"];function button_extends(){return button_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},button_extends.apply(this,arguments)}function button_objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function button_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Button(e){var{children:t,className:n,tooltip:r,primary:a,size:o}=e,l=button_objectWithoutProperties(e,Z),s=l.variant||(a?"contained":"outlined"),c=C.createElement(z.Z.Button,button_extends({variant:s,size:o||"small",classes:{root:"bl-button",label:"bl-button-label",contained:"bl-button--contained",outlined:"bl-button--outlined",text:"bl-button--text",disableElevation:"bl-button--unelevated",disabled:"bl-button--disabled"},disableRipple:!0,disableElevation:!0,className:n},l),t);return r?C.createElement(A.Z,{tooltip:r},C.createElement("span",null,c)):c}var V=n(77574),K=[a.W.YEAR,a.W.MONTH,a.W.DATE];function DatePickerButton(e){var{onChange:t,value:n,className:r,icon:l}=e,s=(0,P.useCallback)((e=>C.createElement("button",{onClick:e.onClick,className:r},C.createElement("span",{ref:e.inputRef},C.createElement(o.Z,{icon:l})))),[r]);return C.createElement(V.Z,{value:n,openTo:a.W.YEAR,views:K,onChange:t,icon:!1,TextFieldComponent:s})}const Y=(0,C.memo)(DatePickerButton);function utils_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function utils_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?utils_ownKeys(Object(n),!0).forEach((function(t){utils_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):utils_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function utils_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var formatTimestampDate=(e,t)=>e?r.ou.fromMillis(e).toFormat(t):null,G=function composeOption(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return{value:e,label:t}},composeOptions=(e,t,n,r)=>e.reduce(((e,a)=>{if(t.includes(a)&&n!==a)return e;var o=r?r(a):a;return e.push(G(a,o)),e}),[]),U=function getDefaultComponents(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.DateTimePickers||{};return utils_objectSpread(utils_objectSpread({},e),{},{Button:e.Button||Button,Spinner:e.Spinner||Spinner,FontIcon:e.FontIcon||o.Z,Select:e.Select||u.Z,SortSelect:e.SortSelect||SortingSelect,Input:e.Input||l.Z,NumberInput:e.NumberInput||c.Z,CheckBox:e.CheckBox||Checkbox,Textarea:e.Textarea||s.Z,DateTimePickers:{[a.w.DATE_PICKER]:t[a.w.DATE_PICKER]||H.Z,[a.w.TIME_PICKER]:t[a.w.TIME_PICKER]||F.Z,[a.w.MONTH_PICKER]:t[a.w.MONTH_PICKER]||W.Z,[a.w.YEAR_PICKER]:t[a.w.YEAR_PICKER]||B.Z},DatePickerButton:e.DatePickerButton||Y})}},55485:(e,t,n)=>{"use strict";n.d(t,{Cd:()=>l,G$:()=>c,Kp:()=>o,L7:()=>a,X:()=>u,eE:()=>s,fP:()=>d,tf:()=>p,yP:()=>h});var r=n(28121),a={MONTH:"MONTH",TWO_WEEK:"TWO_WEEK",WEEK:"WEEK",THREE_DAY:"THREE_DAY",DAY:"DAY"};a.Labels={[a.MONTH]:"Month",[a.TWO_WEEK]:"2 week",[a.WEEK]:"Week",[a.THREE_DAY]:"3 day",[a.DAY]:"Day"},a.Options=[{value:a.MONTH,label:a.Labels[a.MONTH]},{value:a.TWO_WEEK,label:a.Labels[a.TWO_WEEK]},{value:a.WEEK,label:a.Labels[a.WEEK]},{value:a.THREE_DAY,label:a.Labels[a.THREE_DAY]},{value:a.DAY,label:a.Labels[a.DAY]}];var o=7,l=16,s={LARGE:"LARGE",MEDIUM:"MEDIUM",SMALL:"SMALL"},c={INDENT:"INDENT",STACK_SIZE:"STACK_SIZE"},u={[s.SMALL]:14,[s.MEDIUM]:20,[s.LARGE]:26},d={[a.WEEK]:a.WEEK,[a.DAY]:a.DAY,[a.THREE_DAY]:a.THREE_DAY},h={EVENT:"event"},p=[r.oS.STRING,r.oS.TEXT,r.oS.EXTENDED_STRING,r.oS.INT,r.oS.BOOLEAN,r.oS.DOUBLE,r.oS.DECIMAL,r.oS.FILE_REF,r.oS.STRING_ID]},31267:(e,t,n)=>{"use strict";n.d(t,{E6:()=>getOptimizeWhereClause,TO:()=>getLoadingRangeDates,xp:()=>isDateFieldsValid});var r=n(62760);function isDateFieldsValid(e){return e&&e.length&&e.some((e=>{var{startEventField:t}=e;return!!t}))}function getLoadingRangeDates(e){var t=r.E.getMonthsBefore(1,e),n=r.E.getMonthsAfter(1,e);return{startRangeDate:r.E.getStartDayOfStartWeekOfStartMonth(t),endRangeDate:r.E.getEndDayOfEndWeekOfEndMonth(n)}}function getOptimizeWhereClause(e,t){if(!isDateFieldsValid(t))return null;var{startRangeDate:n,endRangeDate:r}=getLoadingRangeDates(e);return t.map((e=>{var{startEventField:t,finishEventField:a}=e;return function getWhereClauseByDateFields(e,t,n,r){return t?"((".concat(e," is not null) AND (").concat(e," <= ").concat(r,") AND (").concat(t," is not null) AND (((").concat(e," < ").concat(t,") AND (").concat(t," >= ").concat(n,")) OR ((").concat(e," > ").concat(t,") AND (").concat(e," >= ").concat(t,"))))"):"(".concat(e," is not null AND ").concat(e," >= ").concat(n," AND ").concat(e," <= ").concat(r,")")}(t,a,n,r)})).join(" OR ")}},71943:(e,t,n)=>{"use strict";n.d(t,{$X:()=>o,Cq:()=>d,Yb:()=>u,hH:()=>a,xT:()=>l,zF:()=>c,zI:()=>s});var r=n(28121),a={RECTANGLE:"rectangle",POINT:"point"};a.Options=[{value:a.RECTANGLE,label:"rectangle"},{value:a.POINT,label:"point"}];var o={TIME:"time",CATEGORIES:"categories",PIE:"pie"};o.Options=[{value:o.TIME,label:"Time Line"},{value:o.CATEGORIES,label:"Categories"},{value:o.PIE,label:"Pie"}];var l={LINE:"line",BAR:"bar",AREA:"area",HORIZONTAL_BAR:"horizontalBar",DOUGHNUT:"doughnut",PIE:"pie"},s={NONE:"false",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};s.Options=[{value:s.NONE,label:"None"},{value:s.TOP,label:"Top"},{value:s.BOTTOM,label:"Bottom"},{value:s.LEFT,label:"Left"},{value:s.RIGHT,label:"Right"}];var c=[r.oS.STRING,r.oS.TEXT,r.oS.BOOLEAN,r.oS.INT,r.oS.DOUBLE,r.oS.DECIMAL,r.oS.MONEY,r.oS.DATETIME,r.oS.MULTIPLE_CHOICE,r.oS.JSON,r.oS.AUTO_INCREMENT],u=["objectId","ownerId"],d={["millisecond"]:1,["second"]:1e3,["minute"]:6e4,["hour"]:36e5,["day"]:864e5,["week"]:6048e5,["month"]:2592e6,["quarter"]:7776e6,["year"]:31536e6}},57342:(e,t,n)=>{"use strict";n.d(t,{k:()=>composeColumnCondition});var r=n(99490);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var composeColumnCondition=e=>t=>{var{operator:n,conditionValue:r,combinator:o}=t,l=(a[n]||a.default)(e.path,r,n);return o&&(l+=" ".concat(o)),l},a=_objectSpread(_objectSpread({equal:(e,t)=>"".concat(e," = '").concat(t,"'"),notEqual:(e,t)=>"".concat(e," != '").concat(t,"'"),contains:(e,t)=>"".concat(e," LIKE '%").concat(t,"%'"),notContains:(e,t)=>"".concat(e," NOT LIKE '%").concat(t,"%'"),startsWith:(e,t)=>"".concat(e," LIKE '").concat(t,"%'"),notStartsWith:(e,t)=>"".concat(e," NOT LIKE '").concat(t,"%'"),endsWith:(e,t)=>"".concat(e," LIKE '%").concat(t,"'"),notEndsWith:(e,t)=>"".concat(e," NOT LIKE '%").concat(t,"'"),isEmpty:e=>"".concat(e," = ''"),isNotEmpty:e=>"".concat(e," != ''"),isNull:e=>"".concat(e," IS NULL"),isNotNull:e=>"".concat(e," IS NOT NULL"),isTrue:e=>"".concat(e," = TRUE"),isNotTrue:e=>"".concat(e," != TRUE"),isFalse:e=>"".concat(e," = FALSE"),isNotFalse:e=>"".concat(e," != FALSE")},{"is-specificDate":(e,t)=>"".concat(e," >= '").concat(getDayStart(t),"' AND ").concat(e," <= '").concat(getDayEnd(t),"'"),"is-specificTime":(e,t)=>"".concat(e," >= '").concat(getSecondStart(t),"' AND ").concat(e," <= '").concat(getSecondEnd(t),"'"),"is-specificMonth":(e,t)=>"".concat(e," >= '").concat(getMonthStart(t),"' AND ").concat(e," <= '").concat(getMonthEnd(t),"'"),"is-specificYear":(e,t)=>"".concat(e," >= '").concat(getYearStart(t),"' AND ").concat(e," <= '").concat(getYearEnd(t),"'"),"is-today":e=>"".concat(e," >= '").concat(getTodayStart(),"' AND ").concat(e," <= '").concat(getTodayEnd(),"'"),"is-yesterday":e=>"".concat(e," >= '").concat(getYesterdayStart(),"' AND ").concat(e," <= '").concat(getYesterdayEnd(),"'"),"is-tomorrow":e=>"".concat(e," >= '").concat(getTomorrowStart(),"' AND ").concat(e," <= '").concat(getTomorrowEnd(),"'"),"isNot-specificDate":(e,t)=>"".concat(e," < '").concat(getDayStart(t),"' OR ").concat(e," > '").concat(getDayEnd(t),"'"),"isNot-specificTime":(e,t)=>"".concat(e," < '").concat(getSecondStart(t),"' OR ").concat(e," > '").concat(getSecondEnd(t),"'"),"isNot-specificMonth":(e,t)=>"".concat(e," < '").concat(getMonthStart(t),"' OR ").concat(e," > '").concat(getMonthEnd(t),"'"),"isNot-specificYear":(e,t)=>"".concat(e," < '").concat(getYearStart(t),"' OR ").concat(e," > '").concat(getYearEnd(t),"'"),"isNot-today":e=>"".concat(e," < '").concat(getTodayStart(),"' OR ").concat(e," > '").concat(getTodayEnd(),"'"),"isNot-yesterday":e=>"".concat(e," < '").concat(getYesterdayStart(),"' OR ").concat(e," > '").concat(getYesterdayEnd(),"'"),"isNot-tomorrow":e=>"".concat(e," < '").concat(getTomorrowStart(),"' OR ").concat(e," > '").concat(getTomorrowEnd(),"'"),"before-specificDate":(e,t)=>"".concat(e," < '").concat(getDayStart(t),"'"),"before-specificTime":(e,t)=>"".concat(e," < '").concat(getSecondStart(t),"'"),"before-specificMonth":(e,t)=>"".concat(e," < '").concat(getMonthStart(t),"'"),"before-specificYear":(e,t)=>"".concat(e," < '").concat(getYearStart(t),"'"),"before-today":e=>"".concat(e," < '").concat(getTodayStart(),"'"),"before-yesterday":e=>"".concat(e," < '").concat(getYesterdayStart(),"'"),"before-tomorrow":e=>"".concat(e," < '").concat(getTomorrowStart(),"'"),"after-specificDate":(e,t)=>"".concat(e," > '").concat(getDayEnd(t),"'"),"after-specificTime":(e,t)=>"".concat(e," > '").concat(getSecondEnd(t),"'"),"after-specificMonth":(e,t)=>"".concat(e," > '").concat(getMonthEnd(t),"'"),"after-specificYear":(e,t)=>"".concat(e," > '").concat(getYearEnd(t),"'"),"after-today":e=>"".concat(e," > '").concat(getTodayEnd(),"'"),"after-yesterday":e=>"".concat(e," > '").concat(getYesterdayEnd(),"'"),"after-tomorrow":e=>"".concat(e," > '").concat(getTomorrowEnd(),"'"),"atOrBefore-specificDate":(e,t)=>"".concat(e," <= '").concat(getDayEnd(t),"'"),"atOrBefore-specificTime":(e,t)=>"".concat(e," <= '").concat(getSecondEnd(t),"'"),"atOrBefore-specificMonth":(e,t)=>"".concat(e," <= '").concat(getMonthEnd(t),"'"),"atOrBefore-specificYear":(e,t)=>"".concat(e," <= '").concat(getYearEnd(t),"'"),"atOrBefore-today":e=>"".concat(e," <= '").concat(getTodayEnd(),"'"),"atOrBefore-yesterday":e=>"".concat(e," <= '").concat(getYesterdayEnd(),"'"),"atOrBefore-tomorrow":e=>"".concat(e," <= '").concat(getTomorrowEnd(),"'"),"atOrAfter-specificDate":(e,t)=>"".concat(e," >= '").concat(getDayStart(t),"'"),"atOrAfter-specificTime":(e,t)=>"".concat(e," >= '").concat(getSecondStart(t),"'"),"atOrAfter-specificMonth":(e,t)=>"".concat(e," >= '").concat(getMonthStart(t),"'"),"atOrAfter-specificYear":(e,t)=>"".concat(e," >= '").concat(getYearStart(t),"'"),"atOrAfter-today":e=>"".concat(e," >= '").concat(getTodayStart(),"'"),"atOrAfter-yesterday":e=>"".concat(e," >= '").concat(getYesterdayStart(),"'"),"atOrAfter-tomorrow":e=>"".concat(e," >= '").concat(getTomorrowStart(),"'"),"within-thePastWeek":e=>"".concat(e," >= '").concat(getWeekBefore(),"' AND ").concat(e," <= '").concat(getNow(),"'"),"within-thePastMonth":e=>"".concat(e," >= '").concat(getMonthBefore(),"' AND ").concat(e," <= '").concat(getNow(),"'"),"within-thePastYear":e=>"".concat(e," >= '").concat(getYearBefore(),"' AND ").concat(e," <= '").concat(getNow(),"'"),"within-theNextWeek":e=>"".concat(e," >= '").concat(getNow(),"' AND ").concat(e," <= '").concat(getWeekAfter(),"'"),"within-theNextMonth":e=>"".concat(e," >= '").concat(getNow(),"' AND ").concat(e," <= '").concat(getMonthAfter(),"'"),"within-theNextYear":e=>"".concat(e," >= '").concat(getNow(),"' AND ").concat(e," <= '").concat(getYearAfter(),"'"),"within-theNextDays":(e,t)=>"".concat(e," >= '").concat(getNow(),"' AND ").concat(e," <= '").concat(getDaysAfter(t),"'"),"within-thePastDays":(e,t)=>"".concat(e," <= '").concat(getNow(),"' AND ").concat(e," >= '").concat(getDaysBefore(t),"'"),"notWithin-thePastWeek":e=>"".concat(e," < '").concat(getWeekBefore(),"' OR ").concat(e," > '").concat(getNow(),"'"),"notWithin-thePastMonth":e=>"".concat(e," < '").concat(getMonthBefore(),"' OR ").concat(e," > '").concat(getNow(),"'"),"notWithin-thePastYear":e=>"".concat(e," < '").concat(getYearBefore(),"' OR ").concat(e," > '").concat(getNow(),"'"),"notWithin-theNextWeek":e=>"".concat(e," < '").concat(getNow(),"' OR ").concat(e," > '").concat(getWeekAfter(),"'"),"notWithin-theNextMonth":e=>"".concat(e," < '").concat(getNow(),"' OR ").concat(e," > '").concat(getMonthAfter(),"'"),"notWithin-theNextYear":e=>"".concat(e," < '").concat(getNow(),"' OR ").concat(e," > '").concat(getYearAfter(),"'"),"notWithin-theNextDays":(e,t)=>"".concat(e," < '").concat(getNow(),"' OR ").concat(e," > '").concat(getDaysAfter(t),"'"),"notWithin-thePastDays":(e,t)=>"".concat(e," > '").concat(getNow(),"' OR ").concat(e," < '").concat(getDaysBefore(t),"'")}),{},{default:(e,t,n)=>"".concat(e," ").concat(n," '").concat(t,"'")}),o=function getStartTimestamp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:getNow();return r.ou.fromMillis(t.valueOf()).startOf(e).valueOf()},l=function getEndTimestamp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:getNow();return r.ou.fromMillis(t.valueOf()).endOf(e).valueOf()},getYearStart=e=>o("year",e),getYearEnd=e=>l("year",e),getMonthStart=e=>o("month",e),getMonthEnd=e=>l("month",e),getDayStart=e=>o("day",e),getDayEnd=e=>l("day",e),getSecondStart=e=>o("minute",e),getSecondEnd=e=>l("minute",e),getTodayStart=()=>getDayStart(),getTodayEnd=()=>getDayEnd(),getYesterdayStart=()=>getDayStart(r.ou.now().minus({days:1})),getYesterdayEnd=()=>getDayEnd(r.ou.now().minus({days:1})),getTomorrowStart=()=>getDayStart(r.ou.now().plus({days:1})),getTomorrowEnd=()=>getDayEnd(r.ou.now().plus({days:1})),getWeekBefore=()=>r.ou.now().minus({weeks:1}).valueOf(),getMonthBefore=()=>r.ou.now().minus({months:1}).valueOf(),getYearBefore=()=>r.ou.now().minus({year:1}).valueOf(),getDaysBefore=e=>r.ou.now().minus({days:e}).valueOf(),getWeekAfter=()=>r.ou.now().plus({weeks:1}).valueOf(),getMonthAfter=()=>r.ou.now().plus({months:1}).valueOf(),getYearAfter=()=>r.ou.now().plus({years:1}).valueOf(),getDaysAfter=e=>r.ou.now().plus({days:e}).valueOf(),getNow=()=>Date.now()},83993:(e,t,n)=>{"use strict";n.d(t,{Dl:()=>normalizeColumns,I2:()=>c,IC:()=>composeQuery,Jc:()=>getWhereClause,s2:()=>getAggregateField});var r=n(24350),a=n.n(r),o=n(28121),l=n(57342),s=["columnName"];function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={DefaultQuery:{pageSize:15,offset:0,whereClause:"",filter:[],groupBy:null,sortBy:[],aggregateFunction:null,aggregateColumn:null,refreshPolicy:null,refreshInterval:null,optimizeWhereClause:""},transformQueryByColumnsIds(e,t){var n=a()(t,"name"),r={};return e.filter&&(r.filter=e.filter.map((e=>_objectSpread(_objectSpread({},e),{},{columnId:n[e.columnName].id})))),e.groupBy&&(r.groupBy=n[e.groupBy].id),e.sortBy&&(r.sortBy=e.sortBy.map((e=>_objectSpread(_objectSpread({},e),{},{value:n[e.value].id})))),e.aggregateColumn&&(r.aggregateColumn=n[e.aggregateColumn].id),_objectSpread(_objectSpread({},e),r)},getMatchedQueryWithColumns(e,t){var{filter:n,groupBy:r,sortBy:o,aggregateColumn:l}=t,s=a()(e,"id"),c=n.filter((e=>s[e.columnId])),u=o.filter((e=>s[e.value])),d=s[r]?r:null,h=s[l]?l:null;return _objectSpread(_objectSpread({},t),{},{filter:c,groupBy:d,sortBy:u,aggregateColumn:h})},queryIdsToNames(e,t){var{filter:n,groupBy:r,sortBy:o,aggregateColumn:l}=e,s=a()(t,"id"),c=n.map((e=>_objectSpread(_objectSpread({},e),{},{columnName:s[e.columnId].name}))),u=o.map((e=>_objectSpread(_objectSpread({},e),{},{value:s[e.value].name}))),d=r&&s[r].name,h=l&&s[l].name;return _objectSpread(_objectSpread({},e),{},{filter:c,groupBy:d,sortBy:u,aggregateColumn:h})},saveQueryToLocalStorage(e,t,n){var r=this.transformQueryByColumnsIds(t,n),a=e.getLocalDataSourceQuery();e.setLocalDataSourceQuery(_objectSpread(_objectSpread({},a),r))}};function getAggregateField(e,t){return"".concat(e,"_of_").concat(t).toLowerCase().replace(/\./g,"_")}var getWhereClause=(e,t,n)=>{var r=[];if(n&&r.push("(".concat(n,")")),e&&e.length){var a=e.map((e=>{var{columnName:t}=e,n=_objectWithoutProperties(e,s);return(0,l.k)({path:"`".concat(t,"`")})(n)})).join(" ");r.push("(".concat(a,")"))}return t&&r.push("(".concat(t,")")),r.join(" AND ")},composeQuery=e=>{var{pageSize:t,offset:n,whereClause:r,filter:a,groupBy:o,sortBy:l}=e,{aggregateFunction:s,aggregateColumn:c,fields:u,optimizeWhereClause:d}=e,h={offset:n,pageSize:t,props:[]};if(o&&(h.groupBy=o,h.props.push(o)),(r||a&&a.length||d)&&(h.where=getWhereClause(a,r,d)),l&&l.length){var p=l.map((e=>"`".concat(e.value,"` ").concat(e.dir)));h.sortBy=p.join(", ")}if(s&&c){var g="".concat(s,"_of_").concat(c).toLowerCase().replace(/\./g,"_");h.props.push("".concat(s,"(").concat(c,") as ").concat(g))}return Array.isArray(u)&&u.forEach((e=>{h.props.includes(e)||h.props.push(e)})),h.props.length?h.props=h.props.join(","):delete h.props,h},normalizeColumns=e=>e.map((e=>{var{readOnly:t,type:n,name:r}=e,a=t||o.VK.includes(r)||o.kH.includes(n);return _objectSpread(_objectSpread({},e),{},{readOnly:a})}))},88390:(e,t,n)=>{"use strict";n.d(t,{TI:()=>s,W:()=>composeGroupQuery,ai:()=>c});var r=n(24350),a=n.n(r),o=n(57342),l=["columnName"];function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={DefaultQuery:{offset:0,pageSize:15,sortDirection:null,sortField:null,groupBy:[],filter:[],refreshPolicy:null,refreshInterval:null},transformQueryByColumnsIds(e,t){var n=a()(t,"name"),r={};return e.groupBy&&(r.groupBy=e.groupBy.map((e=>n[e].id))),e.filter&&(r.filter=e.filter.map((e=>_objectSpread(_objectSpread({},e),{},{columnId:n[e.columnName].id})))),_objectSpread(_objectSpread({},e),r)},getMatchedQueryWithColumns(e,t){var{groupBy:n,filter:r}=t,o=a()(e,"id"),l=e.length>1?n.filter((e=>o[e])):[],s=r.filter((e=>o[e.columnId]));return _objectSpread(_objectSpread({},t),{},{groupBy:l,filter:s})},queryIdsToNames(e,t){var{groupBy:n,filter:r}=e,o=a()(t,"id"),l=n.map((e=>o[e].name)),s=r.map((e=>_objectSpread(_objectSpread({},e),{},{columnName:o[e.columnId].name})));return _objectSpread(_objectSpread({},e),{},{filter:s,groupBy:l})},saveQueryToLocalStorage(e,t,n){var r=this.transformQueryByColumnsIds(t,n),a=e.getLocalDataSourceQuery();e.setLocalDataSourceQuery(_objectSpread(_objectSpread({},a),r))}},composeGroupQuery=e=>{var{offset:t,pageSize:n,groupBy:r,groupPath:a,filter:s,sortField:c,sortDirection:u,fields:d}=e,h={offset:t,pageSize:n};return d&&(h.props=d),r&&r.length?(h.groupBy=r.join(","),h.groupDepth=r.length,h.recordsPageSize=5):h.recordsPageSize=n,a&&(h.groupPath=a),s&&s.length&&(h.where=s.map((e=>{var{columnName:t}=e,n=_objectWithoutProperties(e,l);return(0,o.k)({path:t})(n)})).join(" ")),c&&u&&!r.length&&(h.sortBy="`".concat(c,"` ").concat(u)),h},isTargetGroup=(e,t)=>e.groupBy.column===t.column&&e.groupBy.value===t.value,c=function updateDataViewGroup(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},[r,...a]=t,o=e.findIndex((e=>isTargetGroup(e,r))),l=1===t.length?_objectSpread(_objectSpread({},e[o]),n):_objectSpread(_objectSpread({},e[o]),{},{items:updateDataViewGroup(e[o].items,a,n)}),s=[...e];return s.splice(o,1,l),s}},65468:(e,t,n)=>{"use strict";n.d(t,{Z:()=>data_providers});var r=n(28121),a=n(67294),o=n(73935),l=n(17788),s=n(94770),c=n(96919),u=n(88390),d=n(78718),h=n.n(d),p=n(36699),g=n(83993);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={[r.SM.DATA_VIEW]:u.TI,[r.SM.DATA_TABLE]:g.I2},getConfigDataSource=(e,t,n)=>{var r=b[n.dataSource.type],a=n.dataSource,o=a.query;if(n.localStorageRules.query.length){var s=((e,t)=>{var n=e.getDefaultConfig(),r=t.dataSource.query,a=(0,p.P)(t);if((0,l.h)(a,n))return r;var o=e.getLocalDataSourceQuery();return _objectSpread(_objectSpread({},r),o)})(t,n);o=r.getMatchedQueryWithColumns(e,s);var c=h()(o,n.localStorageRules.query);t.setLocalDataSource({query:c})}var u=r.queryIdsToNames(o,e);return _objectSpread(_objectSpread({},a),{},{query:u})},isNextPageExist=(e,t,n)=>n-(t+e)>0,shouldReset=(e,t)=>t.some((t=>e[t])),getColumnsNames=e=>e.map((e=>e.name));function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function data_view_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function data_view_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?data_view_ownKeys(Object(n),!0).forEach((function(t){data_view_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):data_view_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function data_view_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=["groupBy","filter","sortDirection","sortField"],v={loading:!1,loaded:!1,error:null};var y=n(23493),_=n.n(y),O=["optimizeWhereClause"];function data_table_extends(){return data_table_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},data_table_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function asyncGeneratorStep(e,t,n,r,a,o,l){try{var s=e[o](l),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function data_table_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function data_table_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?data_table_ownKeys(Object(n),!0).forEach((function(t){data_table_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):data_table_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function data_table_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=["filter","sortBy"],x={loading:!1,loaded:!1,error:null};var S={[r.SM.DATA_VIEW]:function DataViewWrapper(e,t){var{columnsOverrider:n,config:d,LocalStorageManager:h}=e,{name:p}=d.dataSource,[g,b]=(0,s.useObjectState)({columns:[],items:[],totalRows:0,hasNextPage:!0,groupsParams:{},query:u.TI.DefaultQuery}),[y,_]=(0,s.useObjectState)(data_view_objectSpread(data_view_objectSpread({},v),{},{progress:null})),[O,E]=(0,s.useObjectState)(v),x=(0,s.useHelpers)({refreshIntervalId:null}),{columns:S,items:w,query:C,totalRows:D,hasNextPage:P,groupsParams:T}=g,{refreshPolicy:k,refreshInterval:I}=C,j=(0,s.useSafeAsync)();(0,s.useEffect)((()=>{E({loading:!0}),j((0,c.EH)(p)).then(loadDataViewColumnsSuccess).catch(loadDataViewColumnsFail)}),[]);var loadDataViewColumnsSuccess=e=>{var t=n?n(e):e,r=getConfigDataSource(t,h,d),a=data_view_objectSpread(data_view_objectSpread({},C),r.query);o.unstable_batchedUpdates((()=>{b({columns:t,query:a}),E({loading:!1,loaded:!0,error:null})}))},loadDataViewColumnsFail=e=>E({loading:!1,loaded:!0,error:e});(0,s.useEffect)((()=>{y.loaded&&O.loaded&&B(C)}),[k,I]);var M=(0,s.useCallback)((e=>{clearTimeout(x.refreshIntervalId),k===r.MJ.INTERVAL&&I&&(x.refreshIntervalId=setTimeout((()=>B(e)),1e3*I))}),[B,I]),z=(0,s.useCallback)((e=>{var t={};Object.keys(e).forEach((n=>{d.localStorageRules.query.includes(n)&&(t[n]=e[n])})),Object.keys(t).length&&u.TI.saveQueryToLocalStorage(h,t,S)}),[S,d,h]),A=(0,s.useCallback)(((e,t)=>{var{hasNextPage:n,items:r}=e,stateUpdater=e=>{var a=(0,l.h)(r,e.items)?r:e.items;return{hasNextPage:n,query:t,items:a}};o.unstable_batchedUpdates((()=>{b(stateUpdater),_({loading:!1,loaded:!0,error:null})}))}),[]),N=(0,s.useCallback)((e=>_({loading:!1,error:e,loaded:!0})),[]),L=(0,s.useCallback)(((e,t)=>{_({loading:!0}),j((0,c.gp)(p,t)).then((t=>{M(e),A(t,e)})).catch(N)}),[M,A,N]),R=(0,s.useCallback)(((e,t,n)=>{var{offset:r,pageSize:a}=n,s=isNextPageExist(a,r,t),stateUpdater=t=>{var r=(0,l.h)(e,t.items)?e:t.items;return{hasNextPage:s,query:n,items:r}};o.unstable_batchedUpdates((()=>{b(stateUpdater),_({loading:!1,loaded:!0,error:null})}))}),[]),F=(0,s.useCallback)(((e,t)=>{_({loading:!0}),Promise.all([j((0,c.Qq)(p,t,S)),j((0,c.O$)(p,t))]).then((t=>{var[n,r]=t;M(e),R(n,r,e)})).catch(N)}),[p,M,R,S]),B=(0,s.useCallback)(((e,t)=>{var n=getColumnsNames(S),r=t?data_view_objectSpread(data_view_objectSpread({},e),{},{offset:0}):e,a=(0,u.W)(data_view_objectSpread(data_view_objectSpread({},r),{},{fields:n}));e.groupBy.length?L(r,a):F(r,a)}),[S,L,F]),W=(0,s.useCallback)(((e,t)=>{var n=data_view_objectSpread(data_view_objectSpread({},T[e]),t),r=data_view_objectSpread(data_view_objectSpread({},T),{},{[e]:n});b({groupsParams:r})}),[T]),H=(0,s.useCallback)(((e,t,n)=>{W(e,data_view_objectSpread(data_view_objectSpread({},t),{},{loading:!1,loaded:!0,error:null})),b((e=>({items:(0,u.ai)(e.items,t.groupPath,n)})))}),[W]),Z=(0,s.useCallback)(((e,t)=>{W(e,{loading:!1,error:t,loaded:!0})}),[W]),V=(0,s.useCallback)(((e,t)=>{W(e,{loading:!0}),j((0,c.gp)(p,t)).then((n=>H(e,t,n))).catch((t=>Z(e,t)))}),[W,H,Z]),K=(0,s.useCallback)(((e,t)=>{var n=(0,u.W)(t);V(e,data_view_objectSpread(data_view_objectSpread({},t),n))}),[V]),Y=(0,s.useCallback)((e=>{z(e);var t=data_view_objectSpread(data_view_objectSpread({},C),e);b({query:t});var n=shouldReset(e,m);y.loading||B(t,n)}),[C,z,y.loading,B]),G={columns:S,items:w,query:C,loadingStatus:{records:y,columns:O},totalRows:D,hasNextPage:P,groupsParams:T,dataSourceType:r.SM.DATA_VIEW},U={onQueryChange:Y,onGroupParamsChange:K};return a.createElement(t,_extends({data:G,dataActions:U},e))},[r.SM.DATA_TABLE]:function DataTableWrapper(e,t){var{config:n,LocalStorageManager:u,columnsOverrider:d}=e,{name:h}=n.dataSource,[p,b]=(0,s.useObjectState)({columns:[],items:[],totalRows:0,hasNextPage:!0,groupsParams:{},query:g.I2.DefaultQuery}),{columns:m,items:v,query:y,totalRows:S,hasNextPage:w}=p,{refreshInterval:C,refreshPolicy:D,whereClause:P,optimizeWhereClause:T}=y,[k,I]=(0,s.useObjectState)(data_table_objectSpread(data_table_objectSpread({},x),{},{progress:null})),[j,M]=(0,s.useObjectState)(x),z=(0,s.useHelpers)((()=>({refreshIntervalId:null,rtHandlers:Backendless.Data.of(h).rt(),getQuery:null,cacheRtCallback:null})));z.getQuery=()=>p.query;var A=(0,s.useSafeAsync)();(0,s.useEffect)((()=>{M({loading:!0}),A((0,c.EH)(h)).then(onLoadDataTableColumnsSuccess).catch(onLoadDataTableColumnsFail)}),[]),(0,s.useEffect)((()=>{k.loaded&&j.loaded&&G(y)}),[D,C]),(0,s.useEffect)((()=>{var{rtHandlers:e}=z;z.cacheRtCallback&&(e.removeCreateListener(z.cacheRtCallback),e.removeUpdateListeners(z.cacheRtCallback),e.removeDeleteListeners(z.cacheRtCallback));var t=_()((()=>G(z.getQuery())),1e3);if(z.cacheRtCallback=t,D===r.MJ.RT){var n=[t],a=(0,g.Jc)(null,P,T);a&&n.unshift(a),e.addCreateListener(...n),e.addUpdateListener(...n),e.addDeleteListener(...n)}}),[D,P,T]);var onLoadDataTableColumnsSuccess=e=>{var t=(0,g.Dl)(e),r=d?d(t):t,a=getConfigDataSource(r,u,n),l=data_table_objectSpread(data_table_objectSpread({},y),a.query);o.unstable_batchedUpdates((()=>{b({columns:r,query:l}),M({loading:!1,loaded:!0,error:null})}))},onLoadDataTableColumnsFail=e=>M({loading:!1,loaded:!0,error:e}),N=(0,s.useCallback)((e=>{var t={};Object.keys(e).forEach((r=>{n.localStorageRules.query.includes(r)&&(t[r]=e[r])})),Object.keys(t).length&&g.I2.saveQueryToLocalStorage(u,t,m)}),[m,n,u]),L=(0,s.useCallback)((e=>{var{objectId:t}=e;return b((n=>{var r=n.items;return{items:r.some((e=>e.objectId===t))?r.map((n=>n.objectId===t?e:n)):[...r,e]}})),e}),[]),R=(0,s.useCallback)((e=>{throw new Error(e)}),[]),F=(0,s.useCallback)((e=>A((0,c.Do)(h,e,m)).then(L).catch(R)),[h,L,R,m]),B=(0,s.useCallback)((e=>{b((t=>({items:t.items.filter((t=>t.objectId!==e))})))}),[]),W=(0,s.useCallback)((e=>A((0,c.e7)(h,e)).then((()=>B(e)))),[h,B]),H=(0,s.useCallback)((e=>I({progress:e})),[]),Z=(0,s.useCallback)((e=>{var t=(0,g.IC)(e);return Promise.all([A((0,c.Qq)(h,t,m)),A((0,c.O$)(h,t))])}),[h,m]),V=(0,s.useCallback)(function(){var e=function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function _next(e){asyncGeneratorStep(o,r,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(o,r,a,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(e,t){var n=(0,g.IC)(e),r=yield(0,c.O$)(h,n);return r>1e3&&t&&(n=(0,g.IC)(data_table_objectSpread(data_table_objectSpread({},e),{},{optimizeWhereClause:t})),r=yield(0,c.O$)(h,n)),[yield(0,c.uz)(h,n,m,r,H),r]}));return function(t,n){return e.apply(this,arguments)}}(),[H,h,m]),K=(0,s.useCallback)(((e,t,n)=>{var{offset:r,pageSize:a}=n,s=isNextPageExist(a,r,t);X(n);var stateUpdater=r=>{var a=(0,l.h)(r.items,e)?e:r.items;return{hasNextPage:s,totalRows:t,query:n,items:a}};o.unstable_batchedUpdates((()=>{b(stateUpdater),I({loading:!1,loaded:!0,error:null,progress:null})}))}),[X]),Y=(0,s.useCallback)((e=>{I({loading:!1,loaded:!0,error:e,progress:null})}),[]),G=(0,s.useCallback)(((e,t,n)=>{var{optimizeWhereClause:r}=e,a=_objectWithoutProperties(e,O);I({loading:!0,progress:0});var o=t?data_table_objectSpread(data_table_objectSpread({},a),{},{offset:0}):a;if(0===a.pageSize)return K([],0,o);n=n||p.columns;var l=getColumnsNames(n),s=data_table_objectSpread(data_table_objectSpread({},o),{},{fields:l}),c=a.pageSize?Z:V;A(c(s,r)).then((e=>{var[t,n]=e;return K(t,n,o)})).catch(Y)}),[K,m,Z,V,Y]),U=(0,s.useCallback)((e=>{N(e);var t=data_table_objectSpread(data_table_objectSpread({},y),e);b({query:t});var n=shouldReset(e,E);k.loading||G(t,n)}),[y,N,k.loading,G]),X=(0,s.useCallback)((e=>{var{refreshInterval:t,refreshPolicy:n}=e;clearTimeout(z.refreshIntervalId),n===r.MJ.INTERVAL&&t&&(z.refreshIntervalId=setTimeout((()=>G(e)),1e3*t))}),[G]),Q={columns:m,items:v,query:y,loadingStatus:{records:k,columns:j},totalRows:S,hasNextPage:w,dataSourceType:r.SM.DATA_TABLE},J={onQueryChange:U,onRecordSave:F,onRecordDelete:W};return a.createElement(t,data_table_extends({data:Q,dataActions:J},e))}};const data_providers=e=>function DataProvider(t){return(0,S[t.config.dataSource.type])(t,e)}},62760:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});var r=n(99490),a={setTimezone(e){r.Zr.defaultZoneName=e},getNow:()=>Date.now(),getStartTimestamp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).startOf(e).valueOf()},getEndTimestamp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).endOf(e).valueOf()},getYearStart(e){return this.getStartTimestamp("year",e)},getYearEnd(e){return this.getEndTimestamp("year",e)},getMonthStart(e){return this.getStartTimestamp("month",e)},getMonthEnd(e){return this.getEndTimestamp("month",e)},getWeekStart(e){return this.getStartTimestamp("week",e)},getWeekEnd(e){return this.getEndTimestamp("week",e)},getDayStart(e){return this.getStartTimestamp("day",e)},getDayEnd(e){return this.getEndTimestamp("day",e)},getSecondStart(e){return this.getStartTimestamp("minute",e)},getSecondEnd(e){return this.getEndTimestamp("minute",e)},getTodayStart(){return this.getDayStart()},getTodayEnd(){return this.getDayEnd()},getYesterdayStart(){return this.getDayStart(r.ou.now().minus({days:1}))},getYesterdayEnd(){return this.getDayEnd(r.ou.now().minus({days:1}))},getTomorrowStart(){return this.getDayStart(r.ou.now().plus({days:1}))},getTomorrowEnd(){return this.getDayEnd(r.ou.now().plus({days:1}))},getWeekBefore:()=>r.ou.now().minus({weeks:1}).valueOf(),getMonthBefore:()=>r.ou.now().minus({months:1}).valueOf(),getMonthsBefore(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).minus({months:e}).valueOf()},getYearBefore:()=>r.ou.now().minus({year:1}).valueOf(),getDaysBefore(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).minus({days:e}).valueOf()},getWeekAfter:()=>r.ou.now().plus({weeks:1}).valueOf(),getMonthAfter:()=>r.ou.now().plus({months:1}).valueOf(),getMonthsAfter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).plus({months:e}).valueOf()},getYearAfter:()=>r.ou.now().plus({years:1}).valueOf(),getDaysAfter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).plus({days:e}).valueOf()},getMinutesAfter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).plus({minute:e}).valueOf()},getDay(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNow();return r.ou.fromMillis(e.valueOf()).day},getWeekDay(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNow();return r.ou.fromMillis(e.valueOf()).weekday},getMonth(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNow();return r.ou.fromMillis(e.valueOf()).month},getStartDayOfStartWeekOfStartMonth(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNow();return r.ou.fromMillis(e.valueOf()).startOf("month").startOf("week").valueOf()},getEndDayOfEndWeekOfEndMonth(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNow();return r.ou.fromMillis(e.valueOf()).endOf("month").endOf("week").valueOf()},getWeekEndWeekAfter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).plus({week:e}).endOf("week").valueOf()},getStartDayOfDaysAfter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).plus({days:e}).startOf("day").valueOf()},getEndDayOfDaysAfter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).plus({days:e}).endOf("day").valueOf()},getStartDayOfDaysBefore(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).minus({days:e}).startOf("day").valueOf()},getStartDayOfWeeksAfter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).plus({weeks:e}).startOf("day").valueOf()},getStartDayOfWeeksBefore(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).minus({weeks:e}).startOf("day").valueOf()},getStartDayOfMonthsAfter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).plus({months:e}).startOf("day").valueOf()},getStartDayOfMonthsBefore(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).minus({months:e}).startOf("day").valueOf()},getDiffBetween(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getNow();return r.ou.fromMillis(n.valueOf()).diff(r.ou.fromMillis(t.valueOf()),e).toObject()},getDaysDiffBetween(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return this.getDiffBetween("days",e,t).days},getMinutesDiffBetween(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return this.getDiffBetween("minute",e,t).minutes},getTimeSlotsObject(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNow();return r.ou.fromMillis(e.valueOf()).toObject()},setTimeSlotsObject(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNow();return r.ou.fromMillis(t.valueOf()).set(e).valueOf()},buildDayInfo(e){var t=r.ou.fromMillis(e),n=t.weekday;return{isWeekend:6===n||7===n,weekDay:n,date:t.day,month:t.month,isToday:this.getTodayStart()===t.startOf("day").valueOf(),endTimestamp:t.endOf("day").valueOf(),startTimestamp:e}}}},1762:(e,t,n)=>{"use strict";n.d(t,{X:()=>useFeatureToggle});var r=n(94770),a=n(28121);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function useFeatureToggle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{dataSource:n}=e;return(0,r.useMemo)((()=>{var e=_objectSpread({},t);return n.type===a.SM.DATA_VIEW&&(e.dataEditing=!1),e}),[t,n.type])}},13903:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(24350),a=n.n(r),o=n(28121),l=n(55485),s=n(62760),c=n(31267);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=["name","title","eventname","eventtitle"],d=["date","time","eventdate","eventtime","starttime","startdate","eventstarttime","eventstartdate"],h={DefaultModel:{timeScale:l.L7.MONTH,initTimestamp:s.E.getNow(),dateFields:[],labelsCustomization:{fields:[],size:l.eE.LARGE,depth:{mode:l.G$.INDENT,value:60}},labelsColors:{byFields:{apply:!0,value:[]},byCondition:{apply:!0,value:[]},byDateFields:{apply:!0,value:[]}}},getDefaultModel(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{columns:t}=e,n=t?function getDefaultStartEventColumnId(e){if(!e||!e.length)return null;for(var t=function replaceSystemColumnsToEnd(e){return[...e].sort(((e,t)=>(o.w$.includes(e.name)?1:-1)-(o.w$.includes(t.name)?1:-1)))}(e),n=[],r=function _loop(e){var r=t[e];if(t[e].type===o.oS.DATETIME&&(n.push(t[e]),d.some((e=>e===r.name.toLowerCase()))))return{v:r.id}},a=0;a<t.length;a++){var l=r(a);if("object"==typeof l)return l.v}return n[0].id}(t):null,r=n?[{startEventField:n}]:h.DefaultModel.dateFields,a=_objectSpread(_objectSpread({},h.DefaultModel.labelsCustomization),{},{fields:t?[getDefaultEventLabel(t)]:h.DefaultModel.labelsCustomization.fields});return _objectSpread(_objectSpread({},h.DefaultModel),{},{dateFields:r,labelsCustomization:a})},transformModelByColumnsIds(e,t){var{dateFields:n,labelsCustomization:r,labelsColors:o}=e,l=a()(t,"name"),s={};if(n&&(s.dateFields=n.map((e=>{var{startEventField:t,finishEventField:n}=e;return{startEventField:l[t]?l[t].id:null,finishEventField:l[n]?l[n].id:null}}))),r&&(s.labelsCustomization=_objectSpread(_objectSpread({},r),{},{fields:r.fields.map((e=>l[e].id))})),o){var c=o.byFields.value.map((e=>l[e].id)),u=o.byCondition.value.map((e=>{var t=e.conditions.map((e=>_objectSpread(_objectSpread({},e),{},{columnId:l[e.columnName].id})));return _objectSpread(_objectSpread({},e),{},{conditions:t})})),d=o.byDateFields.value.map((e=>{var t=e.fieldsBunch.split(" - ").map((e=>l[e].id)).join(" - ");return _objectSpread(_objectSpread({},e),{},{fieldsBunch:t})}));s.labelsColors={byFields:_objectSpread(_objectSpread({},o.byFields),{},{value:c}),byCondition:_objectSpread(_objectSpread({},o.byCondition),{},{value:u}),byDateFields:_objectSpread(_objectSpread({},o.byDateFields),{},{value:d})}}return _objectSpread(_objectSpread({},e),s)},getMatchedModelWithColumns(e,t){var{dateFields:n,labelsCustomization:r,labelsColors:o}=t,l=a()(e,"id"),s=_objectSpread(_objectSpread({},r),{},{fields:r.fields.filter((e=>l[e]))}),c=[];n.forEach((e=>{var{startEventField:t,finishEventField:n}=e,r={startEventField:l[t]?t:null,finishEventField:l[n]?n:null};r.startEventField&&c.push(r)}));var u={byFields:_objectSpread(_objectSpread({},o.byFields),{},{value:o.byFields.value.filter((e=>l[e]))}),byCondition:_objectSpread(_objectSpread({},o.byCondition),{},{value:o.byCondition.value.map((e=>{var t=e.conditions.filter((e=>l[e.columnId]));return _objectSpread(_objectSpread({},e),{},{conditions:t})}))}),byDateFields:_objectSpread(_objectSpread({},o.byDateFields),{},{value:o.byDateFields.value.filter((e=>{var{fieldsBunch:t}=e;return t.split(" - ").every((e=>l[e]))}))})};return _objectSpread(_objectSpread({},t),{},{labelsCustomization:s,labelsColors:u,dateFields:c})},modelIdsToNames(e,t){var{dateFields:n,labelsCustomization:r,labelsColors:o}=e,l=a()(t,"id"),s=r&&_objectSpread(_objectSpread({},r),{},{fields:r.fields.map((e=>l[e].name))}),c=n&&n.map((e=>{var{startEventField:t,finishEventField:n}=e;return{startEventField:l[t]?l[t].name:null,finishEventField:l[n]?l[n].name:null}})),u=o&&{byFields:_objectSpread(_objectSpread({},o.byFields),{},{value:o.byFields.value.map((e=>l[e].name))}),byCondition:_objectSpread(_objectSpread({},o.byCondition),{},{value:o.byCondition.value.map((e=>{var t=e.conditions.map((e=>_objectSpread(_objectSpread({},e),{},{columnName:l[e.columnId].name})));return _objectSpread(_objectSpread({},e),{},{conditions:t})}))}),byDateFields:_objectSpread(_objectSpread({},o.byDateFields),{},{value:o.byDateFields.value.map((e=>{var t=e.fieldsBunch.split(" - ").map((e=>l[e].name)).join(" - ");return _objectSpread(_objectSpread({},e),{},{fieldsBunch:t})}))})};return _objectSpread(_objectSpread({},e),{},{labelsCustomization:s||h.DefaultModel.labelsCustomization,labelsColors:u||h.DefaultModel.labelsColors,dateFields:c||h.DefaultModel.dateFields})},getQueryOnModelReady(e){var{dateFields:t,initTimestamp:n}=e;return{optimizeWhereClause:(0,c.E6)(n,t),pageSize:null}}};function getDefaultEventLabel(e){if(!e||!e.length)return null;for(var t=function getColumnsByAvailableType(e){var t={};return e.forEach((e=>{if(l.tf.includes(e.type))return t[e.type]?t[e.type].push(e):void(t[e.type]=[e])})),t}(e),n=[],r=[],a=0;a<l.tf.length;a++){var s=t[l.tf[a]];if(s)for(var c=function _loop2(e){var t=s[e];if(u.some((e=>e===t.name.toLowerCase())))return{v:t.id};o.w$.includes(t.name)?r.push(t):n.push(t)},d=0;d<s.length;d++){var h=c(d);if("object"==typeof h)return h.v}}return[...n,...r][0].id}const p=h},53947:(e,t,n)=>{"use strict";n.d(t,{Z:()=>model_provider});var r=n(67294),a=n(78718),o=n.n(a),l=n(17788),s=n(94770),c=n(28121),u=n(36699),d=n(24350),h=n.n(d);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={DefaultModel:{frozen:[],density:"md",columnsWidths:{}},getDefaultModel:()=>p.DefaultModel,transformModelByColumnsIds(e,t){var n=h()(t,"name"),r={};if(e.frozen&&(r.frozen=e.frozen.map((e=>n[e].id))),e.columnsWidths){var a={};Object.keys(e.columnsWidths).forEach((t=>{a[n[t].id]=e.columnsWidths[t]})),r.columnsWidths=a}return _objectSpread(_objectSpread({},e),r)},getMatchedModelWithColumns(e,t){var{frozen:n,columnsWidths:r}=t,a=h()(e,"id"),o=e.length>1?n.filter((e=>a[e])):[],l={};return Object.keys(r).forEach((e=>{a[e]&&(l[e]=r[e])})),_objectSpread(_objectSpread({},t),{},{frozen:o,columnsWidths:l})},modelIdsToNames(e,t){var{frozen:n,columnsWidths:r}=e,a=h()(t,"id"),o=n.map((e=>a[e].name)),l={};return Object.keys(r).forEach((e=>{l[a[e].name]=r[e]})),_objectSpread(_objectSpread({},e),{},{frozen:o,columnsWidths:l})},getQueryOnModelReady:()=>({offset:0})};const g=p;var b=n(29217),m=n(71943);function chart_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function chart_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?chart_ownKeys(Object(n),!0).forEach((function(t){chart_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):chart_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function chart_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={DefaultModel:function getDefaultModel(){var e={gridLinesWidth:1,gridLinesColor:"rgba(0, 0, 0, 0.1)",gridLinesBorderDash:[],scaleLabelString:""},t=function getDefaultSeries(){var e=b.Z.defaults.elements.point,t=b.Z.defaults.elements.line;return{yAxis:{gridLinesWidth:1,gridLinesColor:"rgba(0, 0, 0, 0.1)",gridLinesBorderDash:[],scaleLabelString:""},type:m.xT.LINE,pointStyle:e.pointStyle,pointRadius:e.radius,pointBorderWidth:e.borderWidth,pointBackgroundColor:e.backgroundColor,pointBorderColor:e.borderColor,pointRotation:e.rotation,lineBorderColor:t.borderColor,lineBorderWidth:t.borderWidth,lineBorderDash:t.borderDash}}();return{type:m.$X.TIME,titlePosition:m.zI.TOP,titleText:null,xAxis:chart_objectSpread({field:null,gridLines:{}},e),series:[t],legendPosition:m.zI.BOTTOM,legendItemsSize:16,legendItemsType:m.hH.RECTANGLE,showFilterDataSettings:!1}}(),getDefaultModel(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name?"".concat(e.name," Chart"):null;return chart_objectSpread(chart_objectSpread({},v.DefaultModel),{},{titleText:t})},transformModelByColumnsIds:e=>e,getMatchedModelWithColumns:(e,t)=>t,modelIdsToNames:e=>e,getQueryOnModelReady:()=>({pageSize:100,offset:0})};const y=v;var _=n(13903);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function model_provider_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function model_provider_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?model_provider_ownKeys(Object(n),!0).forEach((function(t){model_provider_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):model_provider_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function model_provider_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={[c.ZN.DATA_GRID]:g,[c.ZN.CHART]:y,[c.ZN.CALENDAR]:_.Z},getConfigModel=(e,t,n)=>{var{getMatchedModelWithColumns:r,modelIdsToNames:a,DefaultModel:s}=O[n.type],c=model_provider_objectSpread(model_provider_objectSpread({},s),n.model);if(n.localStorageRules.model.length){c=r(e,((e,t)=>{var n=e.getDefaultConfig(),r=t.model,a=(0,u.P)(t);if((0,l.h)(a,n))return e.setDefaultConfig(a),r;var o=e.getLocalModel();return model_provider_objectSpread(model_provider_objectSpread({},r),o)})(t,n));var d=o()(c,n.localStorageRules.model);t.setLocalModel(d)}return a(c,e)};const model_provider=e=>function Wrapper(t){var{config:n,data:a,LocalStorageManager:o,dataActions:l}=t,{loadingStatus:c,columns:u}=a,{columns:d}=c,{onQueryChange:h}=l,{DefaultModel:p,transformModelByColumnsIds:g,getQueryOnModelReady:b}=O[n.type],[m,v]=(0,s.useState)(model_provider_objectSpread(model_provider_objectSpread({},p),n.model));(0,s.useEffect)((()=>{if(d.loaded){var e=getConfigModel(u,o,n),t=b&&b(e)||{};v(e),h(t)}}),[u,d.loaded,n]);var y=(0,s.useCallback)((e=>{if(n.localStorageRules.model.length){var t={};if(Object.keys(e).forEach((r=>{n.localStorageRules.model.includes(r)&&(t[r]=e[r])})),Object.keys(t).length){var r=g(t,u);((e,t)=>{var n=e.getLocalModel();e.setLocalModel(model_provider_objectSpread(model_provider_objectSpread({},n),t))})(o,r)}}}),[n,g,o,u]),_=(0,s.useCallback)((e=>{y(e),v(model_provider_objectSpread(model_provider_objectSpread({},m),e))}),[y,m]);return r.createElement(e,_extends({model:m,onModelChange:_},t))}},46709:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualizations-accordion--root .bl-visualizations-accordion-header--expand-icon i {\n  font-size: 25px;\n}\n.bl-visualizations-accordion--root.bl-visualizations-accordion--root-error {\n  border: 1px solid #df5c54;\n}\n.bl-visualizations-accordion--root .bl-visualizations-accordion-header--root {\n  min-height: 50px;\n  height: 50px;\n}\n.bl-visualizations-accordion--root .bl-visualizations-accordion-header--root.bl-visualizations-accordion-header--expanded {\n  min-height: 50px;\n}\n.bl-visualizations-accordion--root .bl-visualizations-accordion-header--root.bl-visualizations-accordion-header--expanded .bl-visualizations-accordion-header--content {\n  margin: 12px 0;\n}\n.bl-visualizations-accordion--root .bl-visualizations-accordion-header--root .bl-visualizations-accordion-header--content {\n  height: calc(50px - 2 * 12px);\n  margin: 12px 0;\n  display: flex;\n  align-items: center;\n}\n.bl-visualizations-accordion--root .bl-visualizations-accordion-header--root .bl-visualizations-accordion-header--content-label {\n  font-size: 18px;\n  margin-right: 10px;\n}\n.bl-visualizations-accordion--root .bl-visualizations-accordion-body--root {\n  flex-direction: column;\n}\n",""]);const s=l},85306:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualizations--confirm-modal .bl-modal-content {\n  width: 560px;\n  margin-top: 60px;\n}\n.bl-visualizations--confirm-modal .bl-modal-header .bl-visualization-icon {\n  font-size: 25px;\n}\n.bl-visualizations--confirm-modal .bl-modal-header .bl-visualizations--confirm-modal-title {\n  display: flex;\n  font-size: 18px;\n  align-items: center;\n}\n.bl-visualizations--confirm-modal .bl-modal-header .bl-visualizations--confirm-modal-title i {\n  margin-right: 10px;\n}\n.bl-visualizations--confirm-modal .bl-modal-body {\n  font-size: 14px;\n}\n.bl-visualizations--confirm-modal--danger .bl-modal-header {\n  color: white;\n  background-color: #df5c54;\n}\n.bl-visualizations--confirm-modal--danger .bl-modal-header .bl-modal-header-button:before {\n  color: white;\n}\n.bl-visualizations--confirm-modal--danger .bl-modal-footer .bl-button.bl-visualizations--confirm-modal--cancel-btn {\n  color: #df5c54;\n  border-color: #df5c54;\n}\n.bl-visualizations--confirm-modal--danger .bl-modal-footer .bl-button.bl-visualizations--confirm-modal--confirm-btn {\n  color: white;\n  background-color: #df5c54;\n}\n.bl-visualizations--confirm-modal--danger .bl-modal-footer .bl-button.bl-visualizations--confirm-modal--confirm-btn:hover {\n  background-color: #d73329;\n}\n",""]);const s=l},457:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-datetime-picker-input {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n}\n.bl-datetime-picker-input .bl-datetime-picker-input-icon {\n  position: absolute;\n  color: #333;\n  top: 11px;\n  right: 10px;\n}\n.bl-datetime-picker-input input {\n  padding-right: 30px;\n}\n",""]);const s=l},90562:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualization--geo-editor .bl-modal-footer .bl-visualization--geo-editor--type-selector {\n  margin-right: auto;\n}\n.bl-visualization--geo-editor .bl-modal-content {\n  width: 90%;\n  max-width: 1000px;\n  min-width: 600px;\n}\n.bl-visualization--geo-editor--coordinates {\n  margin-bottom: 5px;\n}\n.bl-visualization--geo-editor--coordinates .add-icon-wrapper {\n  padding-right: 16px;\n}\n.bl-visualization--geo-editor--coordinates-title-container {\n  margin-bottom: 5px;\n}\n.bl-visualization--geo-editor--coordinates-title-container,\n.bl-visualization--geo-editor--coordinates-item {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 10px;\n  padding-right: 17px;\n}\n.bl-visualization--google-map-editor {\n  flex: 1 1;\n  position: relative;\n  min-height: 380px;\n  margin-top: 15px;\n}\n.bl-visualization--google-map-editor .bl-visualization--google-map {\n  position: absolute;\n}\n.bl-visualization--google-map-editor--point-info-field {\n  margin: 2px;\n  display: inline-block;\n}\n.bl-visualization--google-map-editor--point-info-field:not(:last-child) {\n  margin-right: 10px;\n}\n.bl-visualization--google-map-editor--point-info-field-label {\n  vertical-align: middle;\n  margin-right: 2px;\n}\n.bl-visualization--google-map-editor--point-info-field-value {\n  background-color: #fff;\n  color: #333;\n  border: 1px solid #ccc;\n  border-radius: 3px;\n  display: inline-block;\n  font-size: 11px;\n  font-weight: bold;\n  line-height: 1;\n  margin: 0;\n  padding: 2px 5px;\n  text-align: center;\n  text-decoration: none;\n  text-transform: uppercase;\n}\n.bl-visualization--google-map-editor--map-tool-container {\n  position: absolute;\n  left: 0;\n  z-index: 0;\n  font-family: Roboto, Arial, sans-serif;\n  margin: 10px;\n  font-size: 12px;\n}\n.bl-visualization--google-map-editor--map-tool-container button {\n  cursor: pointer;\n  height: 25px;\n  padding: 2px 5px;\n}\n",""]);const s=l},8409:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualization--json-editor .bl-textarea {\n  width: 100%;\n}\n.bl-visualization--json-editor .bl-control-field {\n  position: relative;\n  display: flex;\n}\n",""]);const s=l},59780:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualization--multi-line-editor .bl-textarea {\n  width: 100%;\n}\n",""]);const s=l},34104:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualization-icon.bl-visualization-icon--action:hover:not(.bl-visualization-icon--disabled) {\n  transform: scale(1.1);\n}\n.bl-visualization-icon.bl-visualization-icon--action {\n  cursor: pointer;\n}\n",""]);const s=l},87094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-form-group {\n  margin-bottom: 15px;\n}\n.bl-form-group.bl-form-group--inline {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.bl-form-group.bl-form-group--inline label {\n  margin-bottom: 0;\n}\n.bl-form-group label {\n  display: inline-block;\n  max-width: 100%;\n  margin-bottom: 5px;\n  font-weight: 700;\n  font-size: 14px;\n}\n.bl-form-group.bl-form-group--has-error .bl-control-label {\n  color: #df5c54;\n}\n.bl-form-group.bl-form-group--has-error .bl-help-block {\n  position: absolute;\n  color: #df5c54;\n  bottom: -15px;\n  font-size: 12px;\n}\n",""]);const s=l},27462:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualization--google-map {\n  width: 100%;\n  height: 100%;\n}\n.bl-visualization--google-map .bounds-label {\n  background: #f5f5f5;\n  opacity: 0.7;\n  padding: 1px;\n}\n.bl-visualization--google-map .bounds-label-south-east {\n  margin-bottom: 1px;\n}\n.bl-visualization--google-map .delete-menu {\n  position: absolute;\n  background: white;\n  padding: 3px;\n  color: #666;\n  font-weight: bold;\n  border: 1px solid #999;\n  font-family: sans-serif;\n  font-size: 12px;\n  box-shadow: 1px 3px 3px rgba(0, 0, 0, 0.3);\n  margin-top: -10px;\n  margin-left: 10px;\n  cursor: pointer;\n}\n.bl-visualization--google-map .delete-menu:hover {\n  background: #eee;\n}\n",""]);const s=l},21080:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualization--info-icon {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n",""]);const s=l},56754:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-overlay-loading--content {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n}\n.bl-overlay-loading--content.with-overlay {\n  filter: blur(1.5px);\n}\n.bl-overlay-loading--spinner-container,\n.bl-overlay-loading--error-container {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n",""]);const s=l},72328:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-modal-content:focus-visible {\n  outline: none;\n}\n.bl-modal-content i {\n  font-size: 18px;\n}\n.bl-modal-content i.bl-visualization-icon--disabled {\n  cursor: not-allowed !important;\n}\n.bl-modal-content .bl-modal-footer > button:not(:first-child) {\n  margin-left: 10px;\n}\n",""]);const s=l},11424:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-multiple .multiple-child-wrapper {\n  position: relative;\n  padding-right: 45px;\n  margin-bottom: 5px;\n}\n.bl-multiple .multiple-child-wrapper:last-child {\n  margin-bottom: 0;\n}\n.bl-multiple .multiple-controls {\n  display: flex;\n  gap: 5px;\n  width: 40px;\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  right: 0;\n  font-size: 18px;\n}\n.bl-multiple .multiple-controls i {\n  cursor: pointer;\n}\n.bl-multiple .multiple-controls i:hover {\n  transform: scale(1.1);\n}\n.bl-multiple.modern .multiple-child-wrapper {\n  padding-right: 0;\n}\n.bl-multiple.modern .remove-control {\n  position: absolute;\n  top: 10px;\n  right: -7px;\n  color: #999;\n  cursor: pointer;\n  font-weight: 700;\n}\n.bl-multiple.modern .add-icon-wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.bl-multiple.modern .add-icon-wrapper .add-control {\n  font-size: 20px;\n  font-weight: 700;\n  color: #5BC069;\n  cursor: pointer;\n}\n",""]);const s=l},72488:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualization--data-table-records-editor .bl-control-label {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  margin-bottom: 3px;\n}\n.bl-visualization--data-table-records-editor .bl-visualization--data-table-records-editor--column-name {\n  margin-right: 10px;\n}\n.bl-visualization--data-table-records-editor .bl-visualization--data-table-records-editor--column-type {\n  color: #c6c4c4;\n  font-size: 11px;\n  font-weight: normal;\n  margin-left: auto;\n}\n.bl-visualization--data-table-records-editor .bl-control-field {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n}\n.bl-visualization--data-table-records-editor .bl-control-field .bl-visualization-multi-line-editor-icon {\n  color: #333;\n  position: absolute;\n  right: 10px;\n  top: 11px;\n}\n.bl-visualization--data-table-records-editor .bl-control-field .bl-input--with-editor .bl-textarea-input-root {\n  padding-right: 35px;\n}\n.bl-visualization--data-table-records-editor .bl-control-field .bl-input--with-editor.bl-input input {\n  padding-right: 35px;\n}\n.bl-visualization--data-table-records-editor .bl-visualization--data-table-records-editor--color {\n  display: flex;\n}\n.bl-visualization--data-table-records-editor .bl-visualization--data-table-records-editor--color > :first-child {\n  margin-right: 10px;\n}\n.bl-visualization--data-table-records-editor .bl-visualization--data-table-records-editor--data-type-render-switcher {\n  display: flex;\n  position: absolute;\n  top: -17px;\n  margin-left: 150px;\n  color: #0CA0E5;\n  font-size: 12px;\n  cursor: pointer;\n}\n.bl-visualization--data-table-records-editor .bl-visualization--data-table-records-editor--data-type-render-switcher.bl-visualization--disabled {\n  cursor: default;\n  color: #c6c4c4;\n}\n.bl-visualization--data-table-records-editor .bl-visualization--data-table-records-editor--data-type-render-switcher span.bl-visualization--checked {\n  color: #666;\n  cursor: default;\n}\n",""]);const s=l},49150:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-select-sorting-values {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n}\n.bl-select-sorting-values .bl-select-sorting-value {\n  line-height: 14px;\n  display: flex;\n  align-items: center;\n  border: 1px solid rgba(0, 126, 255, 0.24);\n  border-radius: 2px;\n  padding: 2px 5px;\n  background-color: rgba(0, 126, 255, 0.08);\n  color: #007eff;\n  font-size: 12px;\n  height: 19px;\n}\n",""]);const s=l},59002:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".base-spinner {\n  position: relative;\n  animation: base-spinner_rotate 2s linear infinite;\n  color: white;\n}\n.base-spinner circle {\n  stroke-dasharray: 2, 400;\n  stroke-dashoffset: 0;\n  animation: base-spinner_dash 1.5s ease-in-out infinite;\n  stroke-linecap: round;\n}\n@keyframes base-spinner_rotate {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@keyframes base-spinner_dash {\n  0% {\n    stroke-dasharray: 2, 400;\n    stroke-dashoffset: 0;\n  }\n  50% {\n    stroke-dasharray: 89, 400;\n    stroke-dashoffset: -35;\n  }\n  100% {\n    stroke-dasharray: 89, 400;\n    stroke-dashoffset: -124;\n  }\n}\n",""]);const s=l},91629:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualization--tabs-menu-container {\n  border-bottom: 1px solid #e7e7e7;\n  margin-bottom: 10px;\n}\n.bl-visualization--tabs-menu-container .bl-visualization--tabs-menu-root {\n  min-height: 30px;\n}\n.bl-visualization--tabs-menu-container .bl-visualization--tab-root {\n  padding: 10px 1px 5px 1px;\n  min-height: 30px;\n  line-height: 1.42857143;\n  font-size: 13px;\n}\n.bl-visualization--tabs-menu-container .bl-visualization--tab-root:not(:last-child) {\n  margin-right: 15px;\n}\n.bl-visualization--tabs-menu-container .bl-visualization--tabs-menu-indicator {\n  background-color: #337ab7;\n}\n",""]);const s=l},26291:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content {\n  padding-left: 10px;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-select,\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-input {\n  width: 100%;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .aggregation-options {\n  display: flex;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .aggregation-options .aggregation-function-group {\n  width: 130px;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .aggregation-options .aggregation-column-group {\n  margin-left: 10px;\n  flex: 1;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .group-and-sort-options {\n  display: flex;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .group-and-sort-options > *:not(:first-child) {\n  margin-left: 10px;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .group-and-sort-options .group-by-field-group {\n  flex: 1;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .group-and-sort-options .sort-by-field-group {\n  flex: 1;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .refresh-policy-options {\n  display: flex;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .refresh-policy-options .refresh-type-group {\n  flex: 1;\n  max-width: 120px;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .refresh-policy-options .refresh-interval-group {\n  margin-left: 10px;\n  flex: 1;\n  align-self: flex-end;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .refresh-policy-options .refresh-interval-group > div {\n  display: flex;\n  align-items: center;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .refresh-policy-options .refresh-interval-group > div .bl-input {\n  width: 120px;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .refresh-policy-options .refresh-interval-group > div .left-label {\n  margin-right: 10px;\n}\n.bl-visualization-modal-data-settings .bl-visualizations-modal-data-settings-advanced-section .bl-visualizations-data-settings--advanced-section-content .bl-visualizations-data-settings--advanced--data-table-content .refresh-policy-options .refresh-interval-group > div .right-label {\n  margin-left: 10px;\n}\n",""]);const s=l},61666:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-ui-sdk-modal .bl-visualizations-data-settings-conditions {\n  padding: 0 0 10px 10px;\n}\n.bl-ui-sdk-modal .bl-visualizations-data-settings-conditions .bl-visualizations-data-settings-conditions-item {\n  display: grid;\n  grid-template-columns: minmax(70px, 1fr) minmax(70px, 2fr) minmax(70px, 4.5fr) minmax(70px, 2fr) minmax(70px, 1fr);\n  grid-gap: 10px;\n  padding-right: 17px;\n}\n.bl-ui-sdk-modal .bl-visualizations-data-settings-conditions .bl-visualizations-data-settings-conditions-item .bl-visualizations-data-settings-conditions-item__label {\n  color: #333;\n  font-weight: 600;\n  margin-top: 7px;\n  flex: 0;\n  display: flex;\n  align-items: center;\n}\n.bl-ui-sdk-modal .bl-visualizations-data-settings-conditions .bl-visualizations-data-settings-conditions-item .bl-visualization-data-settings-datetime-operator-select {\n  display: grid;\n  grid-template-columns: 1.5fr 2fr;\n  grid-gap: 10px;\n}\n.bl-ui-sdk-modal .bl-visualizations-data-settings-empty-field-alert {\n  padding-left: 10px;\n}\n",""]);const s=l},58177:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualization-modal-data-settings .bl-modal-content {\n  width: 90%;\n  max-width: 1000px;\n  min-width: 600px;\n}\n.bl-visualization-modal-data-settings .bl-visualization-data-settings--data-source-name {\n  padding-left: 10px;\n}\n.bl-visualization-modal-data-settings .Mui-error,\n.bl-visualization-modal-data-settings .bl-visualizations-text-danger {\n  color: #df5c54;\n}\n",""]);const s=l},69802:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-visualization-toolbar {\n  padding: 5px;\n  background-color: #F4F4F4;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n.bl-visualization-toolbar i {\n  font-size: 20px;\n}\n.bl-visualization-toolbar .bl-visualization-toolbar__controls {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  color: #999;\n  width: 100%;\n}\n.bl-visualization-toolbar .bl-visualization-toolbar__btn-container button {\n  color: inherit;\n  font-size: inherit;\n}\n.bl-visualization-toolbar .bl-visualization-toolbar__btn-container {\n  color: #999;\n  font-size: 14px;\n}\n.bl-visualization-toolbar .bl-visualization-toolbar__btn-container:not(.bl-visualization-toolbar__btn-container__disabled):hover {\n  color: #086d9c;\n}\n.bl-visualization-toolbar .bl-visualization-toolbar__btn-container__active {\n  color: #0CA0E5;\n}\n.bl-visualization-toolbar .bl-visualization-toolbar__btn-container__disabled {\n  color: rgba(0, 0, 0, 0.26);\n}\n.bl-visualization-toolbar .bl-visualization-toolbar__progress-bar {\n  background-color: hsl(0, 0%, 87%);\n  height: 1px;\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n}\n.bl-visualization-toolbar .bl-visualization-toolbar__progress-bar-slider {\n  background-color: #0CA0E5;\n  height: 100%;\n}\n",""]);const s=l},79728:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization--show-more-menu {\n  z-index: 999;\n}\n.bl-calendar-visualization--show-more-menu--hide {\n  opacity: 0;\n  max-height: 0;\n  max-width: 0;\n}\n.bl-calendar-visualization--grid-row-cell--show-more-menu {\n  width: 200px;\n  height: 200px;\n  background-color: #fff;\n  border-radius: 6px;\n  border: solid 2px hsla(0, 0%, 0%, 0.05);\n  overflow: hidden;\n}\n.bl-calendar-visualization--grid-row-cell--show-more-menu-container {\n  height: inherit;\n  display: flex;\n  flex-direction: column;\n}\n.bl-calendar-visualization--grid-row-cell--show-more-menu-container:focus-visible {\n  outline: none;\n}\n.bl-calendar-visualization--grid-row-cell--show-more-menu-container-header {\n  padding: 0 16px;\n}\n.bl-calendar-visualization--grid-row-cell--show-more-menu-container-header-content {\n  display: flex;\n  color: hsl(0, 0%, 30%);\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n  border-bottom: solid 2px hsla(0, 0%, 0%, 0.05);\n}\n.bl-calendar-visualization--grid-row-cell--show-more-menu-container-header-content .bl-visualization-icon {\n  color: #999;\n}\n.bl-calendar-visualization--grid-row-cell--show-more-menu-container--events {\n  flex: 1;\n  overflow: auto;\n  padding: 8px 16px;\n}\n.bl-calendar-visualization--grid-row-cell--show-more-menu-container--events .bl-calendar-visualization--event {\n  position: relative;\n  margin-bottom: 8px;\n}\n",""]);const s=l},12699:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization--all-day-events-container {\n  display: flex;\n  color: grey;\n  z-index: 800;\n}\n.bl-calendar-visualization--all-day-events--title {\n  font-size: 10px;\n  white-space: nowrap;\n  padding: 5px;\n}\n.bl-calendar-visualization--all-day-events--items-list {\n  border-spacing: 0;\n  border-collapse: collapse;\n  flex: 1;\n  margin-bottom: -1px;\n}\n.bl-calendar-visualization--all-day-events--item {\n  flex: 1;\n  text-align: center;\n  height: 100%;\n  border: 1px solid hsl(0, 0%, 95%);\n}\n.bl-calendar-visualization--all-day-events--item:last-child {\n  border-right: unset;\n}\n.bl-calendar-visualization--all-day-events--item--with-value {\n  cursor: pointer;\n}\n.bl-calendar-visualization--all-day-events--item--with-value:hover {\n  background-color: hsl(0, 0%, 95%);\n}\n",""]);const s=l},11570:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization--grid {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row {\n  display: flex;\n  flex: 1;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell {\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  justify-content: space-between;\n  flex: 1;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-right-style: solid;\n  border-right-width: 1px;\n  border-color: hsl(0, 0%, 95%);\n  padding: 3px 7px;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--timeline-mode {\n  padding: 0;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--timeline-mode:first-child {\n  border-left: 1px solid hsl(0, 0%, 95%);\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--timeline-mode:last-child {\n  border-right: unset;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--date {\n  width: fit-content;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--header {\n  display: flex;\n  max-height: 16px;\n  align-items: center;\n  justify-content: space-between;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell:hover .bl-calendar-visualization--grid-row-cell--header--add-btn {\n  visibility: visible;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--header--add-btn {\n  visibility: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  cursor: pointer;\n  width: 15px;\n  height: 15px;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--header--add-btn:hover {\n  background-color: hsl(0, 0%, 95%);\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--header--add-btn i {\n  font-size: 15px;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--all-events-hidden {\n  justify-content: flex-start;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--show-more {\n  font-size: 11px;\n  color: hsl(0, 0%, 30%);\n  opacity: 0.75;\n  cursor: pointer;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--show-more:hover {\n  opacity: 1;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--today .bl-calendar-visualization--grid-row-cell--date {\n  background-color: #0CA0E5;\n  border-radius: 3px;\n  color: #FFF;\n  margin-left: -3px;\n  padding: 0 3px;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--hidden .bl-calendar-visualization--grid-row-cell--date {\n  opacity: 50%;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--weekend {\n  background-color: hsl(0, 0%, 98%);\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--hovered {\n  background-color: #e8edff;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--current-time-line {\n  position: relative;\n  display: none;\n  background-color: red;\n  width: 100%;\n  height: 2px;\n  margin-left: -1px;\n  margin-right: -1px;\n}\n.bl-calendar-visualization--grid .bl-calendar-visualization--grid-row-cell--current-time-point {\n  width: 10px;\n  height: 10px;\n  position: absolute;\n  left: -4.5px;\n  background-color: inherit;\n  top: -4px;\n  border-radius: 50%;\n}\n.bl-calendar-visualization--event {\n  display: flex;\n  align-items: center;\n  position: absolute;\n  z-index: 2;\n  background-color: #fff;\n  color: hsl(0, 0%, 30%);\n  padding: 0 4px;\n  border: 2px solid hsla(0, 0%, 0%, 0.05);\n  border-radius: 3px;\n  cursor: pointer;\n  box-sizing: border-box;\n  transition: border-color 0.085s ease-in 0s;\n}\n.bl-calendar-visualization--event:hover {\n  border-color: hsla(0, 0%, 0%, 0.1);\n}\n.bl-calendar-visualization--event--size-1 {\n  font-size: 8px;\n}\n.bl-calendar-visualization--event--size-1 .bl-calendar-visualization--event-label-time {\n  font-size: 7px;\n}\n.bl-calendar-visualization--event--size-1 .bl-calendar-visualization--event-label-time i {\n  font-size: 8px;\n}\n.bl-calendar-visualization--event--size-1 .bl-calendar-visualization--event--continue-icon {\n  font-size: 8px;\n}\n.bl-calendar-visualization--event--size-2 {\n  font-size: 11px;\n}\n.bl-calendar-visualization--event--size-2 .bl-calendar-visualization--event-label-time {\n  font-size: 10px;\n}\n.bl-calendar-visualization--event--size-2 .bl-calendar-visualization--event-label-time i {\n  font-size: 11px;\n}\n.bl-calendar-visualization--event--size-2 .bl-calendar-visualization--event--continue-icon {\n  font-size: 11px;\n}\n.bl-calendar-visualization--event--size-3 {\n  font-size: 14px;\n}\n.bl-calendar-visualization--event--size-3 .bl-calendar-visualization--event-label-time {\n  font-size: 13px;\n}\n.bl-calendar-visualization--event--size-3 .bl-calendar-visualization--event-label-time i {\n  font-size: 15px;\n}\n.bl-calendar-visualization--event--size-3 .bl-calendar-visualization--event--continue-icon {\n  font-size: 15px;\n}\n.bl-calendar-visualization--event-resize-anchor {\n  position: absolute;\n  width: 10px;\n  right: -4px;\n  height: 100%;\n  cursor: e-resize;\n}\n.bl-calendar-visualization--event-resize-anchor--vertical {\n  width: 100%;\n  right: unset;\n  height: 10px;\n  cursor: s-resize;\n  bottom: -4px;\n}\n.bl-calendar-visualization--events-grid,\n.bl-calendar-visualization--events-grid-timeline {\n  flex: 1;\n}\n.bl-calendar-visualization--events-grid-timeline {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n}\n.bl-calendar-visualization--events-grid-timeline--show-more-out-fit-btn {\n  display: flex;\n  position: absolute;\n  width: 20px;\n  right: 0;\n  border: 2px solid hsla(0, 0%, 0%, 0.05);\n  border-radius: 3px;\n  background-color: rgba(129, 129, 129, 0.15);\n}\n.bl-calendar-visualization--events-grid-timeline--show-more-out-fit-btn:hover {\n  background-color: rgba(129, 129, 129, 0.22);\n}\n.bl-calendar-visualization--events-grid-timeline--show-more-out-fit-btn .bl-calendar-visualization--grid-row-cell--show-more {\n  height: 100%;\n}\n.bl-calendar-visualization--events-grid-timeline--show-more-out-fit-btn--small-label .bl-calendar-visualization--grid-row-cell--show-more {\n  font-size: 9px;\n}\n.bl-calendar-visualization--event--continue {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.bl-calendar-visualization--event--continue-icon {\n  font-size: 15px;\n  opacity: 70%;\n}\n.bl-calendar-visualization--event-label-container {\n  overflow: hidden;\n  max-width: 100%;\n  opacity: 90%;\n}\n.bl-calendar-visualization--event-label-container--inline {\n  display: flex;\n  align-items: center;\n}\n.bl-calendar-visualization--event-label {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.bl-calendar-visualization--event-label-time {\n  display: flex;\n  align-items: center;\n  opacity: 70%;\n  font-size: 13px;\n  line-height: 1.21;\n}\n.bl-calendar-visualization--event-label-time .bl-visualization-icon {\n  font-size: 15px;\n}\n.bl-calendar-visualization--event--continue-after {\n  margin-left: auto;\n}\n.bl-calendar-visualization--event-custom-label + .bl-calendar-visualization--event-custom-label:before {\n  content: '  ';\n  display: inline-block;\n  white-space: pre;\n  font-weight: normal;\n  text-decoration: none;\n  font-style: normal;\n}\n.bl-calendar-visualization--event--has-not-start:not(.bl-calendar-visualization--event--vertical-view ) {\n  border-left: none;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.bl-calendar-visualization--event--has-not-start.bl-calendar-visualization--event--vertical-view {\n  border-top: none;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n}\n.bl-calendar-visualization--event--has-not-finish:not(.bl-calendar-visualization--event--vertical-view ) {\n  border-right: none;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.bl-calendar-visualization--event--has-not-finish.bl-calendar-visualization--event--vertical-view {\n  border-bottom: none;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.bl-calendar-visualization--event--hidden {\n  visibility: hidden;\n}\n.bl-calendar-visualization--event--ghost {\n  opacity: 0.5;\n}\n.bl-calendar-visualization--event--vertical-view {\n  flex-direction: column;\n}\n.bl-calendar-visualization--event--vertical-view .bl-calendar-visualization--event--continue {\n  margin-left: -10px;\n}\n.bl-calendar-visualization--event--vertical-view .bl-calendar-visualization--event-label-container {\n  align-self: baseline;\n  flex: 1;\n}\n",""]);const s=l},36812:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization--navigator {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-left: 10px;\n  margin-bottom: 5px;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-title {\n  font-size: 16px;\n  padding: 10px 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: hsl(0, 0%, 30%);\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  display: flex;\n  align-items: center;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel > * {\n  margin-right: 8px;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control-offset-container {\n  display: flex;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: hsl(0, 0%, 95%);\n  color: hsl(0, 0%, 50%);\n  border: 0;\n  border-radius: 4px;\n  cursor: pointer;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control:hover {\n  filter: brightness(96%);\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control:active {\n  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.13);\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control.bl-calendar-visualization--navigator-control-today {\n  min-height: 30px;\n  padding: 0 10px;\n  text-transform: capitalize;\n  font-size: 14px;\n  line-height: 1.42857143;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control .bl-calendar-visualization--timescale-select-box {\n  color: inherit;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control .bl-calendar-visualization--timescale-select-box .bl-calendar-visualization--timescale-select-root {\n  padding-top: 5px;\n  padding-bottom: 5px;\n  color: inherit;\n  font-size: 14px;\n  align-items: center;\n  line-height: 1.42857143;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control .bl-calendar-visualization--timescale-select-box .bl-calendar-visualization--timescale-select-icon {\n  color: inherit;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control fieldset {\n  border: unset;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control.bl-calendar-visualization--navigator-control-offset {\n  min-width: 30px;\n  width: 30px;\n  height: 30px;\n  border-color: rgba(0, 0, 0, 0.1);\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control.bl-calendar-visualization--navigator-control-offset.bl-calendar-visualization--navigator-control-offset-dec {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-right-style: solid;\n  border-right-width: 1px;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control.bl-calendar-visualization--navigator-control-offset.bl-calendar-visualization--navigator-control-offset-inc {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.bl-calendar-visualization--navigator .bl-calendar-visualization--navigator-control-panel .bl-calendar-visualization--navigator-control.bl-calendar-visualization--navigator-control--date-picker {\n  min-height: 30px;\n  min-width: 30px;\n}\n",""]);const s=l},85019:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization-preview {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  overflow: hidden;\n}\n.bl-calendar-visualization-preview .bl-calendar-weeks {\n  display: flex;\n}\n.bl-calendar-visualization-preview .bl-calendar-weeks-day-container {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  margin-bottom: 3px;\n  padding-left: 8px;\n  padding-right: 3px;\n}\n.bl-calendar-visualization-preview .bl-calendar-weeks-day {\n  color: hsl(0, 0%, 30%);\n  line-height: 1.25;\n}\n.bl-calendar-visualization-preview .bl-calendar-weeks-day-date {\n  width: max-content;\n  color: hsl(0, 0%, 30%);\n  line-height: 1.25;\n  font-weight: 600;\n  font-size: 16px;\n}\n.bl-calendar-visualization-preview .bl-calendar-weeks-day-date--today {\n  background-color: #0CA0E5;\n  border-radius: 3px;\n  color: #FFF;\n  margin-left: -3px;\n  padding: 0 3px;\n}\n.bl-calendar-visualization-preview .bl-calendar-visualization--days-container {\n  display: flex;\n  flex: 1;\n  position: relative;\n  overflow: auto;\n}\n.bl-calendar-visualization-preview .bl-calendar-visualization--days-container--vertically-scrolled .bl-calendar-visualization--all-day-events-container {\n  box-shadow: 0 4px 0 0 rgba(0, 0, 0, 0.04);\n}\n.bl-calendar-visualization-preview .bl-calendar-visualization--scroll-box {\n  position: relative;\n  flex: 1;\n}\n.bl-calendar-visualization-preview .bl-calendar-visualization--scroll-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n}\n.bl-calendar-visualization-preview .bl-calendar-visualization--scroll-container .bl-calendar-visualization--scroll-content {\n  display: flex;\n  overflow: auto;\n  position: relative;\n  width: 100%;\n}\n.bl-calendar-visualization-preview .bl-calendar-visualization--timeline {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.bl-calendar-visualization-preview .bl-calendar-visualization--timeline-item {\n  position: relative;\n  z-index: 1;\n}\n.bl-calendar-visualization-preview .bl-calendar-visualization--timeline-item:first-child .bl-calendar-visualization--timeline-item-label {\n  top: 0;\n}\n.bl-calendar-visualization-preview .bl-calendar-visualization--timeline-item-label {\n  color: grey;\n  position: absolute;\n  font-size: 10px;\n  top: -5px;\n  left: 10px;\n}\n.bl-calendar-visualization-preview .bl-calendar-visualization--timeline-item-border {\n  border-top: 1px solid hsl(0, 0%, 95%);\n  margin-left: 40px;\n}\n.bl-calendar-visualization-preview .bl-calendar-visualization--cells-container {\n  overflow: hidden;\n  position: relative;\n  flex: 1;\n}\n.bl-calendar-visualization-preview .bl-overlay-loading--content {\n  display: flex;\n  flex-direction: column;\n}\n.bl-calendar-visualization-preview--with-timeline .bl-calendar-visualization--grid-row,\n.bl-calendar-visualization-preview--with-timeline .bl-calendar-weeks,\n.bl-calendar-visualization-preview--with-timeline .bl-calendar-visualization--navigator {\n  margin-left: 50px;\n}\n.bl-calendar-visualization-preview--with-timeline .bl-calendar-visualization--all-day-events--title {\n  width: 50px;\n}\n.bl-calendar-visualization-preview--with-timeline .bl-calendar-visualization--cells-container,\n.bl-calendar-visualization-preview--with-timeline .bl-calendar-visualization--timeline {\n  height: 1200px;\n}\n",""]);const s=l},16856:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization-container {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  font-weight: 500;\n  font-size: 14px;\n  background-color: #fff;\n  overflow: hidden;\n}\n.bl-calendar-visualization-container i {\n  font-size: 20px;\n}\n",""]);const s=l},62751:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization--toolbar--add-event-btn button {\n  padding: 0;\n}\n.bl-calendar-visualization--toolbar--add-event-btn i {\n  font-size: 25px;\n  font-weight: bold;\n}\n",""]);const s=l},38674:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--section:not(:last-child) {\n  margin-bottom: 15px;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--section-title {\n  display: flex;\n  margin-bottom: 5px;\n  font-weight: 700;\n  font-size: 14px;\n  align-items: center;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--section-title .bl-visualization--info-icon {\n  margin-left: 5px;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--section-title .bl-visualization--info-icon i {\n  font-size: 15px;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--section-size--select-box {\n  width: 100px;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--section-depth--controls {\n  display: flex;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--section-depth--controls > :not(:first-child) {\n  margin-left: 10px;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--section-depth--mode-box {\n  width: 120px;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--section-depth--value-box {\n  display: flex;\n  align-items: center;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--section-depth--value-box > :not(:first-child) {\n  margin-left: 10px;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--section-depth--value-number-input {\n  width: 75px;\n  max-width: 75px;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--fields-item {\n  padding-right: 17px;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--fields-item .bl-select {\n  display: block;\n  width: 100%;\n}\n.bl-calendar-visualization--customize-label-modal .bl-calendar-visualization--customize-label-modal--fields-item .bl-select .bl-select-box {\n  width: 100%;\n}\n.bl-calendar-visualization--customize-label-modal .bl-multiple.modern .remove-control {\n  top: 11px;\n  right: -7px;\n}\n",""]);const s=l},40408:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization--date-fields-modal .bl-modal-content {\n  width: 90%;\n  max-width: 1000px;\n  min-width: 600px;\n}\n.bl-calendar-visualization--date-fields-modal .bl-calendar-visualization--date-fields-item {\n  display: flex;\n  padding-right: 17px;\n}\n.bl-calendar-visualization--date-fields-modal .bl-calendar-visualization--date-fields-item .bl-form-group {\n  flex: 1;\n  margin-bottom: unset;\n}\n.bl-calendar-visualization--date-fields-modal .bl-calendar-visualization--date-fields-item .bl-form-group:not(:first-child) {\n  padding-left: 20px;\n}\n.bl-calendar-visualization--date-fields-modal .bl-calendar-visualization--date-fields-item .bl-form-group .bl-control-label {\n  min-width: max-content;\n}\n.bl-calendar-visualization--date-fields-modal .bl-calendar-visualization--date-fields-item .bl-form-group .bl-control-field {\n  width: 100%;\n}\n.bl-calendar-visualization--date-fields-modal .bl-calendar-visualization--date-fields-item .bl-select {\n  display: block;\n  width: 100%;\n}\n.bl-calendar-visualization--date-fields-modal .bl-calendar-visualization--date-fields-item .bl-select .bl-select-box {\n  width: 100%;\n}\n.bl-calendar-visualization--date-fields-modal .bl-multiple.modern .remove-control {\n  top: 10px;\n  right: -7px;\n}\n",""]);const s=l},19645:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization--labels-color-modal .bl-multiple {\n  width: 100%;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--by-condition.bl-accordion--no-content .add-icon-wrapper .bl-calendar-visualization--labels-color-modal--by-condition-add-icon.add-control {\n  margin-top: 0;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--by-condition .add-icon-wrapper .bl-calendar-visualization--labels-color-modal--by-condition-add-icon.add-control {\n  border: none;\n  background: none;\n  font-weight: normal;\n  font-size: 15px;\n  margin-top: 15px;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--by-condition--item .bl-calendar-visualization--labels-color-modal--by-condition-item-header-control {\n  color: #999;\n  margin-left: auto;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--by-condition--item .bl-visualizations-data-settings-conditions {\n  padding: 0;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--by-condition--item .bl-visualizations-data-settings-conditions-item {\n  padding-right: 30px;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--by-condition--item .bl-multiple.modern .remove-control {\n  right: 2px;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--by-condition--item .bl-visualizations-data-settings-empty-field-alert {\n  padding: 10px 0 0 0;\n}\n.bl-calendar-visualization--labels-color-modal .bl-checkbox .bl-checkbox-root {\n  padding: 5px;\n}\n",""]);const s=l},18286:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--by-date-fields {\n  width: 100%;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--by-date-fields .bl-multiple.modern .remove-control {\n  top: 10px;\n  right: 3px;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--color-label-by-date-fields-item {\n  display: flex;\n  align-items: center;\n  padding-right: 35px;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--color-label-by-date-fields-item .bl-select {\n  display: block;\n  width: 100%;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--color-label-by-date-fields-item .bl-select .bl-select-box {\n  width: 100%;\n}\n",""]);const s=l},858:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--by-field {\n  width: 100%;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--by-field .bl-multiple.modern .remove-control {\n  top: 35px;\n  right: 3px;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--color-label-by-field-item {\n  padding-right: 35px;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--color-label-by-field-item .bl-select {\n  display: block;\n  width: 100%;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--color-label-by-field-item .bl-select .bl-select-box {\n  width: 100%;\n}\n",""]);const s=l},37362:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-calendar-visualization--labels-color-modal .bl-modal-content {\n  width: 90%;\n  max-width: 1000px;\n  min-width: 600px;\n}\n.bl-calendar-visualization--labels-color-modal .Mui-error,\n.bl-calendar-visualization--labels-color-modal .bl-visualizations-text-danger {\n  color: #df5c54;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal-section {\n  position: relative;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal-section > * {\n  background-color: #f7f7f7;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal-section:not(:first-child) {\n  margin-top: 10px;\n}\n.bl-calendar-visualization--labels-color-modal .bl-visualizations-accordion-header--content > *:not(:last-child) {\n  margin-right: 10px;\n}\n.bl-calendar-visualization--labels-color-modal .bl-visualizations-accordion-header--content i {\n  color: hsl(0, 0%, 30%);\n}\n.bl-calendar-visualization--labels-color-modal .bl-visualizations-accordion-header--content-describe {\n  color: grey;\n  font-size: 13px;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--color-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  max-width: 45px;\n  margin-right: 10px;\n}\n.bl-calendar-visualization--labels-color-modal .bl-calendar-visualization--labels-color-modal--accordion-header--shadow-tooltip-box {\n  position: absolute;\n  z-index: 1;\n  height: 100%;\n  width: 30px;\n  left: 10px;\n  opacity: 0;\n}\n",""]);const s=l},952:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),l=n.n(o)()(a());l.push([e.id,".bl-ui-sdk-modal .bl-modal-footer .bl-button {\n  height: 32px;\n}\n",""]);const s=l},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function toString(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function i(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(l[c]=!0)}for(var u=0;u<e.length;u++){var d=[].concat(e[u]);r&&l[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},77412:e=>{e.exports=function arrayEach(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},44037:(e,t,n)=>{var r=n(98363),a=n(3674);e.exports=function baseAssign(e,t){return e&&r(t,a(t),e)}},63886:(e,t,n)=>{var r=n(98363),a=n(81704);e.exports=function baseAssignIn(e,t){return e&&r(t,a(t),e)}},85990:(e,t,n)=>{var r=n(46384),a=n(77412),o=n(34865),l=n(44037),s=n(63886),c=n(64626),u=n(278),d=n(18805),h=n(1911),p=n(58234),g=n(46904),b=n(64160),m=n(43824),v=n(29148),y=n(38517),_=n(1469),O=n(44144),E=n(56688),x=n(13218),S=n(72928),w=n(3674),C=n(81704),D="[object Arguments]",P="[object Function]",T="[object Object]",k={};k[D]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k[T]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k[P]=k["[object WeakMap]"]=!1,e.exports=function baseClone(e,t,n,I,j,M){var z,A=1&t,N=2&t,L=4&t;if(n&&(z=j?n(e,I,j,M):n(e)),void 0!==z)return z;if(!x(e))return e;var R=_(e);if(R){if(z=m(e),!A)return u(e,z)}else{var F=b(e),B=F==P||"[object GeneratorFunction]"==F;if(O(e))return c(e,A);if(F==T||F==D||B&&!j){if(z=N||B?{}:y(e),!A)return N?h(e,s(z,e)):d(e,l(z,e))}else{if(!k[F])return j?e:{};z=v(e,F,A)}}M||(M=new r);var W=M.get(e);if(W)return W;M.set(e,z),S(e)?e.forEach((function(r){z.add(baseClone(r,t,n,r,e,M))})):E(e)&&e.forEach((function(r,a){z.set(a,baseClone(r,t,n,a,e,M))}));var H=R?void 0:(L?N?g:p:N?C:w)(e);return a(H||e,(function(r,a){H&&(r=e[a=r]),o(z,a,baseClone(r,t,n,a,e,M))})),z}},3118:(e,t,n)=>{var r=n(13218),a=Object.create,o=function(){function object(){}return function(e){if(!r(e))return{};if(a)return a(e);object.prototype=e;var t=new object;return object.prototype=void 0,t}}();e.exports=o},25588:(e,t,n)=>{var r=n(64160),a=n(37005);e.exports=function baseIsMap(e){return a(e)&&"[object Map]"==r(e)}},29221:(e,t,n)=>{var r=n(64160),a=n(37005);e.exports=function baseIsSet(e){return a(e)&&"[object Set]"==r(e)}},10313:(e,t,n)=>{var r=n(13218),a=n(25726),o=n(33498),l=Object.prototype.hasOwnProperty;e.exports=function baseKeysIn(e){if(!r(e))return o(e);var t=a(e),n=[];for(var s in e)("constructor"!=s||!t&&l.call(e,s))&&n.push(s);return n}},14259:e=>{e.exports=function baseSlice(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++r<a;)o[r]=e[r+t];return o}},57406:(e,t,n)=>{var r=n(71811),a=n(10928),o=n(40292),l=n(40327);e.exports=function baseUnset(e,t){return t=r(t,e),null==(e=o(e,t))||delete e[l(a(t))]}},74318:(e,t,n)=>{var r=n(11149);e.exports=function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},64626:(e,t,n)=>{e=n.nmd(e);var r=n(55639),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,l=o&&o.exports===a?r.Buffer:void 0,s=l?l.allocUnsafe:void 0;e.exports=function cloneBuffer(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},57157:(e,t,n)=>{var r=n(74318);e.exports=function cloneDataView(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},93147:e=>{var t=/\w*$/;e.exports=function cloneRegExp(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},40419:(e,t,n)=>{var r=n(62705),a=r?r.prototype:void 0,o=a?a.valueOf:void 0;e.exports=function cloneSymbol(e){return o?Object(o.call(e)):{}}},77133:(e,t,n)=>{var r=n(74318);e.exports=function cloneTypedArray(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},278:e=>{e.exports=function copyArray(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},98363:(e,t,n)=>{var r=n(34865),a=n(89465);e.exports=function copyObject(e,t,n,o){var l=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],d=o?o(n[u],e[u],u,n,e):void 0;void 0===d&&(d=e[u]),l?a(n,u,d):r(n,u,d)}return n}},18805:(e,t,n)=>{var r=n(98363),a=n(99551);e.exports=function copySymbols(e,t){return r(e,a(e),t)}},1911:(e,t,n)=>{var r=n(98363),a=n(51442);e.exports=function copySymbolsIn(e,t){return r(e,a(e),t)}},60696:(e,t,n)=>{var r=n(68630);e.exports=function customOmitClone(e){return r(e)?void 0:e}},46904:(e,t,n)=>{var r=n(68866),a=n(51442),o=n(81704);e.exports=function getAllKeysIn(e){return r(e,o,a)}},85924:(e,t,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);e.exports=r},51442:(e,t,n)=>{var r=n(62488),a=n(85924),o=n(99551),l=n(70479),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=a(e);return t}:l;e.exports=s},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function initCloneArray(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},29148:(e,t,n)=>{var r=n(74318),a=n(57157),o=n(93147),l=n(40419),s=n(77133);e.exports=function initCloneByTag(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return a(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return o(e);case"[object Symbol]":return l(e)}}},38517:(e,t,n)=>{var r=n(3118),a=n(85924),o=n(25726);e.exports=function initCloneObject(e){return"function"!=typeof e.constructor||o(e)?{}:r(a(e))}},33498:e=>{e.exports=function nativeKeysIn(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},40292:(e,t,n)=>{var r=n(97786),a=n(14259);e.exports=function parent(e,t){return t.length<2?e:r(e,a(t,0,-1))}},56688:(e,t,n)=>{var r=n(25588),a=n(7518),o=n(31167),l=o&&o.isMap,s=l?a(l):r;e.exports=s},68630:(e,t,n)=>{var r=n(44239),a=n(85924),o=n(37005),l=Function.prototype,s=Object.prototype,c=l.toString,u=s.hasOwnProperty,d=c.call(Object);e.exports=function isPlainObject(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=a(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}},72928:(e,t,n)=>{var r=n(29221),a=n(7518),o=n(31167),l=o&&o.isSet,s=l?a(l):r;e.exports=s},81704:(e,t,n)=>{var r=n(14636),a=n(10313),o=n(98612);e.exports=function keysIn(e){return o(e)?r(e,!0):a(e)}},10928:e=>{e.exports=function last(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},57557:(e,t,n)=>{var r=n(29932),a=n(85990),o=n(57406),l=n(71811),s=n(98363),c=n(60696),u=n(99021),d=n(46904),h=u((function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,(function(t){return t=l(t,e),u||(u=t.length>1),t})),s(e,d(e),n),u&&(n=a(n,7,c));for(var h=t.length;h--;)o(n,t[h]);return n}));e.exports=h},73955:(e,t,n)=>{var r=n(79833),a=0;e.exports=function uniqueId(e){var t=++a;return r(e)+t}},52690:e=>{"use strict";e.exports=function equal(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,r,a;if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!equal(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if((n=(a=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=n;0!=r--;){var o=a[r];if(!equal(e[o],t[o]))return!1}return!0}return e!=e&&t!=t}},75251:(e,t,n)=>{"use strict";n(27418);var r=n(67294),a=60103;if(60107,"function"==typeof Symbol&&Symbol.for){var o=Symbol.for;a=o("react.element"),o("react.fragment")}var l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,n){var r,o={},u=null,d=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:u,ref:d,props:o,_owner:l.current}}t.jsx=q},85893:(e,t,n)=>{"use strict";e.exports=n(75251)},21607:(e,t,n)=>{"use strict";var r=n(93379),a=n.n(r),o=n(7795),l=n.n(o),s=n(90569),c=n.n(s),u=n(3565),d=n.n(u),h=n(70609),p=n.n(h),g=n(44589),b=n.n(g),m=n(457),v={};v.styleTagTransform=b(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=p();a()(m.Z,v),m.Z&&m.Z.locals&&m.Z.locals},12404:(e,t,n)=>{"use strict";var r=n(93379),a=n.n(r),o=n(7795),l=n.n(o),s=n(90569),c=n.n(s),u=n(3565),d=n.n(u),h=n(70609),p=n.n(h),g=n(44589),b=n.n(g),m=n(952),v={};v.styleTagTransform=b(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=p();a()(m.Z,v),m.Z&&m.Z.locals&&m.Z.locals},93379:e=>{"use strict";var t=[];function getIndexByIdentifier(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function modulesToDom(e,n){for(var r={},a=[],o=0;o<e.length;o++){var l=e[o],s=n.base?l[0]+n.base:l[0],c=r[s]||0,u="".concat(s," ").concat(c);r[s]=c+1;var d=getIndexByIdentifier(u),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(h);else{var p=addElementStyle(h,n);n.byIndex=o,t.splice(o,0,{identifier:u,updater:p,references:1})}a.push(u)}return a}function addElementStyle(e,t){var n=t.domAPI(t);n.update(e);return function updater(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,n){var r=modulesToDom(e=e||[],n=n||{});return function update(e){e=e||[];for(var a=0;a<r.length;a++){var o=getIndexByIdentifier(r[a]);t[o].references--}for(var l=modulesToDom(e,n),s=0;s<r.length;s++){var c=getIndexByIdentifier(r[s]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}r=l}}},90569:e=>{"use strict";var t={};e.exports=function insertBySelector(e,n){var r=function getTarget(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},70609:e=>{"use strict";e.exports=function insertStyleElement(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function setAttributesWithoutAttributes(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function domAPI(e){var t=e.insertStyleElement(e);return{update:function update(n){!function apply(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function remove(){!function removeStyleElement(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},44589:e=>{"use strict";e.exports=function styleTagTransform(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},41545:e=>{e.exports=parse,e.exports.parse=parse,e.exports.stringify=function stringify(e){"Feature"===e.type&&(e=e.geometry);function pairWKT(e){return e.join(" ")}function ringWKT(e){return e.map(pairWKT).join(", ")}function ringsWKT(e){return e.map(ringWKT).map(wrapParens).join(", ")}function wrapParens(e){return"("+e+")"}switch(e.type){case"Point":return"POINT ("+pairWKT(e.coordinates)+")";case"LineString":return"LINESTRING ("+ringWKT(e.coordinates)+")";case"Polygon":return"POLYGON ("+ringsWKT(e.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+ringWKT(e.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+function multiRingsWKT(e){return e.map(ringsWKT).map(wrapParens).join(", ")}(e.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+ringsWKT(e.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+e.geometries.map(stringify).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var t=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,n=new RegExp("^"+t.source+"(\\s"+t.source+"){1,}");function parse(e){var t=e.split(";"),r=t.pop(),a=(t.shift()||"").split("=").pop(),o=0;function $(e){var t=r.substring(o).match(e);return t?(o+=t[0].length,t[0]):null}function white(){$(/^\s*/)}function multicoords(){white();for(var e,t=0,r=[],a=[r],o=r;e=$(/^(\()/)||$(/^(\))/)||$(/^(,)/)||$(n);){if("("===e)a.push(o),o=[],a[a.length-1].push(o),t++;else if(")"===e){if(0===o.length)return null;if(!(o=a.pop()))return null;if(0===--t)break}else if(","===e)o=[],a[a.length-1].push(o);else{if(e.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(o,e.split(/\s/g).map(parseFloat))}white()}return 0!==t?null:r}function coords(){for(var e,t,r=[];t=$(n)||$(/^(,)/);)","===t?(r.push(e),e=[]):t.split(/\s/g).some(isNaN)||(e||(e=[]),Array.prototype.push.apply(e,t.split(/\s/g).map(parseFloat))),white();return e?(r.push(e),r.length?r:null):null}function root(){return function point(){if(!$(/^(point(\sz)?)/i))return null;if(white(),!$(/^(\()/))return null;var e=coords();return e?(white(),$(/^(\))/)?{type:"Point",coordinates:e[0]}:null):null}()||function linestring(){if(!$(/^(linestring(\sz)?)/i))return null;if(white(),!$(/^(\()/))return null;var e=coords();return e&&$(/^(\))/)?{type:"LineString",coordinates:e}:null}()||function polygon(){if(!$(/^(polygon(\sz)?)/i))return null;white();var e=multicoords();return e?{type:"Polygon",coordinates:e}:null}()||function multipoint(){if(!$(/^(multipoint)/i))return null;white();var e=r.substring(r.indexOf("(")+1,r.length-1).replace(/\(/g,"").replace(/\)/g,"");r="MULTIPOINT ("+e+")";var t=multicoords();return t?(white(),{type:"MultiPoint",coordinates:t}):null}()||function multilinestring(){if(!$(/^(multilinestring)/i))return null;white();var e=multicoords();return e?(white(),{type:"MultiLineString",coordinates:e}):null}()||function multipolygon(){if(!$(/^(multipolygon)/i))return null;white();var e=multicoords();return e?{type:"MultiPolygon",coordinates:e}:null}()||function geometrycollection(){var e,t=[];if(!$(/^(geometrycollection)/i))return null;if(white(),!$(/^(\()/))return null;for(;e=root();)t.push(e),white(),$(/^(,)/),white();return $(/^(\))/)?{type:"GeometryCollection",geometries:t}:null}()}return function crs(e){return e&&a.match(/\d+/)&&(e.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+a}}),e}(root())}},29217:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(25512);r.kL.register(...r.zX);const a=r.kL},25512:(e,t,n)=>{"use strict";function noop(){}n.d(t,{kL:()=>Chart,IQ:()=>V,zX:()=>ve});const r=function(){let e=0;return function(){return e++}}();function isNullOrUndef(e){return null==e}function isArray(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function isObject(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}const isNumberFinite=e=>("number"==typeof e||e instanceof Number)&&isFinite(+e);function finiteOrDefault(e,t){return isNumberFinite(e)?e:t}function valueOrDefault(e,t){return void 0===e?t:e}const toDimension=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function callback(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)}function each(e,t,n,r){let a,o,l;if(isArray(e))if(o=e.length,r)for(a=o-1;a>=0;a--)t.call(n,e[a],a);else for(a=0;a<o;a++)t.call(n,e[a],a);else if(isObject(e))for(l=Object.keys(e),o=l.length,a=0;a<o;a++)t.call(n,e[l[a]],l[a])}function _elementsEqual(e,t){let n,r,a,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(a=e[n],o=t[n],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function clone$1(e){if(isArray(e))return e.map(clone$1);if(isObject(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let a=0;for(;a<r;++a)t[n[a]]=clone$1(e[n[a]]);return t}return e}function isValidKey(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function _merger(e,t,n,r){if(!isValidKey(e))return;const a=t[e],o=n[e];isObject(a)&&isObject(o)?merge(a,o,r):t[e]=clone$1(o)}function merge(e,t,n){const r=isArray(t)?t:[t],a=r.length;if(!isObject(e))return e;const o=(n=n||{}).merger||_merger;for(let l=0;l<a;++l){if(!isObject(t=r[l]))continue;const a=Object.keys(t);for(let r=0,l=a.length;r<l;++r)o(a[r],e,t,n)}return e}function mergeIf(e,t){return merge(e,t,{merger:_mergerIf})}function _mergerIf(e,t,n){if(!isValidKey(e))return;const r=t[e],a=n[e];isObject(r)&&isObject(a)?mergeIf(r,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=clone$1(a))}const a={"":e=>e,x:e=>e.x,y:e=>e.y};function resolveObjectKey(e,t){const n=a[t]||(a[t]=function _getKeyResolver(e){const t=function _splitKey(e){const t=e.split("."),n=[];let r="";for(const e of t)r+=e,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function _capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}const defined=e=>void 0!==e,isFunction=e=>"function"==typeof e,setsEqual=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const o=Math.PI,l=2*o,s=l+o,c=Number.POSITIVE_INFINITY,u=o/180,d=o/2,h=o/4,p=2*o/3,g=Math.log10,b=Math.sign;function niceNum(e){const t=Math.round(e);e=almostEquals(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(g(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function almostEquals(e,t,n){return Math.abs(e-t)<n}function _setMinAndMaxByKey(e,t,n){let r,a,o;for(r=0,a=e.length;r<a;r++)o=e[r][n],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function toRadians(e){return e*(o/180)}function toDegrees(e){return e*(180/o)}function _decimalPlaces(e){if(!isNumberFinite(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function getAngleFromPoint(e,t){const n=t.x-e.x,r=t.y-e.y,a=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*o&&(s+=l),{angle:s,distance:a}}function distanceBetweenPoints(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function _angleDiff(e,t){return(e-t+s)%l-o}function _normalizeAngle(e){return(e%l+l)%l}function _angleBetween(e,t,n,r){const a=_normalizeAngle(e),o=_normalizeAngle(t),l=_normalizeAngle(n),s=_normalizeAngle(o-a),c=_normalizeAngle(l-a),u=_normalizeAngle(a-o),d=_normalizeAngle(a-l);return a===o||a===l||r&&o===l||s>c&&u<d}function _limitValue(e,t,n){return Math.max(t,Math.min(n,e))}function _isBetween(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function _lookup(e,t,n){n=n||(n=>e[n]<t);let r,a=e.length-1,o=0;for(;a-o>1;)r=o+a>>1,n(r)?o=r:a=r;return{lo:o,hi:a}}const _lookupByKey=(e,t,n,r)=>_lookup(e,n,r?r=>e[r][t]<=n:r=>e[r][t]<n),_rlookupByKey=(e,t,n)=>_lookup(e,n,(r=>e[r][t]>=n));const m=["push","pop","shift","splice","unshift"];function unlistenArrayEvents(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,a=r.indexOf(t);-1!==a&&r.splice(a,1),r.length>0||(m.forEach((t=>{delete e[t]})),delete e._chartjs)}function _arrayUnique(e){const t=new Set;let n,r;for(n=0,r=e.length;n<r;++n)t.add(e[n]);return t.size===r?e:Array.from(t)}const v="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function throttled(e,t,n){const r=n||(e=>Array.prototype.slice.call(e));let a=!1,o=[];return function(...n){o=r(n),a||(a=!0,v.call(window,(()=>{a=!1,e.apply(t,o)})))}}const _toLeftRightCenter=e=>"start"===e?"left":"end"===e?"right":"center",_alignStartEnd=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function _getStartAndCountOfVisiblePoints(e,t,n){const r=t.length;let a=0,o=r;if(e._sorted){const{iScale:l,_parsed:s}=e,c=l.axis,{min:u,max:d,minDefined:h,maxDefined:p}=l.getUserBounds();h&&(a=_limitValue(Math.min(_lookupByKey(s,l.axis,u).lo,n?r:_lookupByKey(t,c,l.getPixelForValue(u)).lo),0,r-1)),o=p?_limitValue(Math.max(_lookupByKey(s,l.axis,d,!0).hi+1,n?0:_lookupByKey(t,c,l.getPixelForValue(d),!0).hi+1),a,r)-a:r-a}return{start:a,count:o}}function _scaleRangesChanged(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,a={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=a,!0;const o=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,a),o}const atEdge=e=>0===e||1===e,elasticIn=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*l/n),elasticOut=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*l/n)+1,y={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*d),easeOutSine:e=>Math.sin(e*d),easeInOutSine:e=>-.5*(Math.cos(o*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>atEdge(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>atEdge(e)?e:elasticIn(e,.075,.3),easeOutElastic:e=>atEdge(e)?e:elasticOut(e,.075,.3),easeInOutElastic(e){const t=.1125;return atEdge(e)?e:e<.5?.5*elasticIn(2*e,t,.45):.5+.5*elasticOut(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-y.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*y.easeInBounce(2*e):.5*y.easeOutBounce(2*e-1)+.5};function round(e){return e+.5|0}const lim=(e,t,n)=>Math.max(Math.min(e,n),t);function p2b(e){return lim(round(2.55*e),0,255)}function n2b(e){return lim(round(255*e),0,255)}function b2n(e){return lim(round(e/2.55)/100,0,1)}function n2p(e){return lim(round(100*e),0,100)}const _={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},O=[..."0123456789ABCDEF"],h1=e=>O[15&e],h2=e=>O[(240&e)>>4]+O[15&e],eq=e=>(240&e)>>4==(15&e);function hexString(e){var t=(e=>eq(e.r)&&eq(e.g)&&eq(e.b)&&eq(e.a))(e)?h1:h2;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const E=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(e,t,n){const r=t*Math.min(n,1-n),f=(t,a=(t+e/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[f(0),f(8),f(4)]}function hsv2rgbn(e,t,n){const f=(r,a=(r+e/60)%6)=>n-n*t*Math.max(Math.min(a,4-a,1),0);return[f(5),f(3),f(1)]}function hwb2rgbn(e,t,n){const r=hsl2rgbn(e,1,.5);let a;for(t+n>1&&(a=1/(t+n),t*=a,n*=a),a=0;a<3;a++)r[a]*=1-t-n,r[a]+=t;return r}function rgb2hsl(e){const t=e.r/255,n=e.g/255,r=e.b/255,a=Math.max(t,n,r),o=Math.min(t,n,r),l=(a+o)/2;let s,c,u;return a!==o&&(u=a-o,c=l>.5?u/(2-a-o):u/(a+o),s=function hueValue(e,t,n,r,a){return e===a?(t-n)/r+(t<n?6:0):t===a?(n-e)/r+2:(e-t)/r+4}(t,n,r,u,a),s=60*s+.5),[0|s,c||0,l]}function calln(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(n2b)}function hsl2rgb(e,t,n){return calln(hsl2rgbn,e,t,n)}function hue(e){return(e%360+360)%360}function hueParse(e){const t=E.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?p2b(+t[5]):n2b(+t[5]));const a=hue(+t[2]),o=+t[3]/100,l=+t[4]/100;return n="hwb"===t[1]?function hwb2rgb(e,t,n){return calln(hwb2rgbn,e,t,n)}(a,o,l):"hsv"===t[1]?function hsv2rgb(e,t,n){return calln(hsv2rgbn,e,t,n)}(a,o,l):hsl2rgb(a,o,l),{r:n[0],g:n[1],b:n[2],a:r}}const x={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},S={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let w;function nameParse(e){w||(w=function unpack(){const e={},t=Object.keys(S),n=Object.keys(x);let r,a,o,l,s;for(r=0;r<t.length;r++){for(l=s=t[r],a=0;a<n.length;a++)o=n[a],s=s.replace(o,x[o]);o=parseInt(S[l],16),e[s]=[o>>16&255,o>>8&255,255&o]}return e}(),w.transparent=[0,0,0,0]);const t=w[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const C=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const to=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,from=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function modHSL(e,t,n){if(e){let r=rgb2hsl(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=hsl2rgb(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function clone(e,t){return e?Object.assign(t||{},e):e}function fromObject(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=n2b(e[3]))):(t=clone(e,{r:0,g:0,b:0,a:1})).a=n2b(t.a),t}function functionParse(e){return"r"===e.charAt(0)?function rgbParse(e){const t=C.exec(e);let n,r,a,o=255;if(t){if(t[7]!==n){const e=+t[7];o=t[8]?p2b(e):lim(255*e,0,255)}return n=+t[1],r=+t[3],a=+t[5],n=255&(t[2]?p2b(n):lim(n,0,255)),r=255&(t[4]?p2b(r):lim(r,0,255)),a=255&(t[6]?p2b(a):lim(a,0,255)),{r:n,g:r,b:a,a:o}}}(e):hueParse(e)}class Color{constructor(e){if(e instanceof Color)return e;const t=typeof e;let n;"object"===t?n=fromObject(e):"string"===t&&(n=function hexParse(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*_[e[1]],g:255&17*_[e[2]],b:255&17*_[e[3]],a:5===n?17*_[e[4]]:255}:7!==n&&9!==n||(t={r:_[e[1]]<<4|_[e[2]],g:_[e[3]]<<4|_[e[4]],b:_[e[5]]<<4|_[e[6]],a:9===n?_[e[7]]<<4|_[e[8]]:255})),t}(e)||nameParse(e)||functionParse(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=clone(this._rgb);return e&&(e.a=b2n(e.a)),e}set rgb(e){this._rgb=fromObject(e)}rgbString(){return this._valid?function rgbString(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${b2n(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?function hslString(e){if(!e)return;const t=rgb2hsl(e),n=t[0],r=n2p(t[1]),a=n2p(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${a}%, ${b2n(e.a)})`:`hsl(${n}, ${r}%, ${a}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let a;const o=t===a?.5:t,l=2*o-1,s=n.a-r.a,c=((l*s==-1?l:(l+s)/(1+l*s))+1)/2;a=1-c,n.r=255&c*n.r+a*r.r+.5,n.g=255&c*n.g+a*r.g+.5,n.b=255&c*n.b+a*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function interpolate(e,t,n){const r=from(b2n(e.r)),a=from(b2n(e.g)),o=from(b2n(e.b));return{r:n2b(to(r+n*(from(b2n(t.r))-r))),g:n2b(to(a+n*(from(b2n(t.g))-a))),b:n2b(to(o+n*(from(b2n(t.b))-o))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Color(this.rgb)}alpha(e){return this._rgb.a=n2b(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=round(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return modHSL(this._rgb,2,e),this}darken(e){return modHSL(this._rgb,2,-e),this}saturate(e){return modHSL(this._rgb,1,e),this}desaturate(e){return modHSL(this._rgb,1,-e),this}rotate(e){return function rotate(e,t){var n=rgb2hsl(e);n[0]=hue(n[0]+t),n=hsl2rgb(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function index_esm(e){return new Color(e)}function isPatternOrGradient(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function color(e){return isPatternOrGradient(e)?e:index_esm(e)}function getHoverColor(e){return isPatternOrGradient(e)?e:index_esm(e).saturate(.5).darken(.1).hexString()}const D=Object.create(null),P=Object.create(null);function getScope$1(e,t){if(!t)return e;const n=t.split(".");for(let t=0,r=n.length;t<r;++t){const r=n[t];e=e[r]||(e[r]=Object.create(null))}return e}function set(e,t,n){return"string"==typeof t?merge(getScope$1(e,t),n):merge(getScope$1(e,""),t)}var T=new class Defaults{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>getHoverColor(t.backgroundColor),this.hoverBorderColor=(e,t)=>getHoverColor(t.borderColor),this.hoverColor=(e,t)=>getHoverColor(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return set(this,e,t)}get(e){return getScope$1(this,e)}describe(e,t){return set(P,e,t)}override(e,t){return set(D,e,t)}route(e,t,n,r){const a=getScope$1(this,e),o=getScope$1(this,n),l="_"+t;Object.defineProperties(a,{[l]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[l],t=o[r];return isObject(e)?Object.assign({},t,e):valueOrDefault(e,t)},set(e){this[l]=e}}})}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function _measureText(e,t,n,r,a){let o=t[a];return o||(o=t[a]=e.measureText(a).width,n.push(a)),o>r&&(r=o),r}function _longestText(e,t,n,r){let a=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(a=r.data={},o=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let l=0;const s=n.length;let c,u,d,h,p;for(c=0;c<s;c++)if(h=n[c],null!=h&&!0!==isArray(h))l=_measureText(e,a,o,l,h);else if(isArray(h))for(u=0,d=h.length;u<d;u++)p=h[u],null==p||isArray(p)||(l=_measureText(e,a,o,l,p));e.restore();const g=o.length/2;if(g>n.length){for(c=0;c<g;c++)delete a[o[c]];o.splice(0,g)}return l}function _alignPixel(e,t,n){const r=e.currentDevicePixelRatio,a=0!==n?Math.max(n/2,.5):0;return Math.round((t-a)*r)/r+a}function clearCanvas(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function drawPoint(e,t,n,r){drawPointLegend(e,t,n,r,null)}function drawPointLegend(e,t,n,r,a){let s,c,g,b,m,v;const y=t.pointStyle,_=t.rotation,O=t.radius;let E=(_||0)*u;if(y&&"object"==typeof y&&(s=y.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(E),e.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),void e.restore();if(!(isNaN(O)||O<=0)){switch(e.beginPath(),y){default:a?e.ellipse(n,r,a/2,O,0,0,l):e.arc(n,r,O,0,l),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(E)*O,r-Math.cos(E)*O),E+=p,e.lineTo(n+Math.sin(E)*O,r-Math.cos(E)*O),E+=p,e.lineTo(n+Math.sin(E)*O,r-Math.cos(E)*O),e.closePath();break;case"rectRounded":m=.516*O,b=O-m,c=Math.cos(E+h)*b,g=Math.sin(E+h)*b,e.arc(n-c,r-g,m,E-o,E-d),e.arc(n+g,r-c,m,E-d,E),e.arc(n+c,r+g,m,E,E+d),e.arc(n-g,r+c,m,E+d,E+o),e.closePath();break;case"rect":if(!_){b=Math.SQRT1_2*O,v=a?a/2:b,e.rect(n-v,r-b,2*v,2*b);break}E+=h;case"rectRot":c=Math.cos(E)*O,g=Math.sin(E)*O,e.moveTo(n-c,r-g),e.lineTo(n+g,r-c),e.lineTo(n+c,r+g),e.lineTo(n-g,r+c),e.closePath();break;case"crossRot":E+=h;case"cross":c=Math.cos(E)*O,g=Math.sin(E)*O,e.moveTo(n-c,r-g),e.lineTo(n+c,r+g),e.moveTo(n+g,r-c),e.lineTo(n-g,r+c);break;case"star":c=Math.cos(E)*O,g=Math.sin(E)*O,e.moveTo(n-c,r-g),e.lineTo(n+c,r+g),e.moveTo(n+g,r-c),e.lineTo(n-g,r+c),E+=h,c=Math.cos(E)*O,g=Math.sin(E)*O,e.moveTo(n-c,r-g),e.lineTo(n+c,r+g),e.moveTo(n+g,r-c),e.lineTo(n-g,r+c);break;case"line":c=a?a/2:Math.cos(E)*O,g=Math.sin(E)*O,e.moveTo(n-c,r-g),e.lineTo(n+c,r+g);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(E)*O,r+Math.sin(E)*O)}e.fill(),t.borderWidth>0&&e.stroke()}}function _isPointInArea(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function clipArea(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function unclipArea(e){e.restore()}function _steppedLineTo(e,t,n,r,a){if(!t)return e.lineTo(n.x,n.y);if("middle"===a){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===a!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function _bezierCurveTo(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function renderText(e,t,n,r,a,o={}){const l=isArray(t)?t:[t],s=o.strokeWidth>0&&""!==o.strokeColor;let c,u;for(e.save(),e.font=a.string,function setRenderOpts(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]);isNullOrUndef(t.rotation)||e.rotate(t.rotation);t.color&&(e.fillStyle=t.color);t.textAlign&&(e.textAlign=t.textAlign);t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,o),c=0;c<l.length;++c)u=l[c],s&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),isNullOrUndef(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(u,n,r,o.maxWidth)),e.fillText(u,n,r,o.maxWidth),decorateText(e,n,r,u,o),r+=a.lineHeight;e.restore()}function decorateText(e,t,n,r,a){if(a.strikethrough||a.underline){const o=e.measureText(r),l=t-o.actualBoundingBoxLeft,s=t+o.actualBoundingBoxRight,c=n-o.actualBoundingBoxAscent,u=n+o.actualBoundingBoxDescent,d=a.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(l,d),e.lineTo(s,d),e.stroke()}}function addRoundedRectPath(e,t){const{x:n,y:r,w:a,h:l,radius:s}=t;e.arc(n+s.topLeft,r+s.topLeft,s.topLeft,-d,o,!0),e.lineTo(n,r+l-s.bottomLeft),e.arc(n+s.bottomLeft,r+l-s.bottomLeft,s.bottomLeft,o,d,!0),e.lineTo(n+a-s.bottomRight,r+l),e.arc(n+a-s.bottomRight,r+l-s.bottomRight,s.bottomRight,d,0,!0),e.lineTo(n+a,r+s.topRight),e.arc(n+a-s.topRight,r+s.topRight,s.topRight,0,-d,!0),e.lineTo(n+s.topLeft,r)}const k=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),I=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function toLineHeight(e,t){const n=(""+e).match(k);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}function _readValueToProps(e,t){const n={},r=isObject(t),a=r?Object.keys(t):t,o=isObject(e)?r?n=>valueOrDefault(e[n],e[t[n]]):t=>e[t]:()=>e;for(const e of a)n[e]=+o(e)||0;return n}function toTRBL(e){return _readValueToProps(e,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(e){return _readValueToProps(e,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(e){const t=toTRBL(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function toFont(e,t){e=e||{},t=t||T.font;let n=valueOrDefault(e.size,t.size);"string"==typeof n&&(n=parseInt(n,10));let r=valueOrDefault(e.style,t.style);r&&!(""+r).match(I)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");const a={family:valueOrDefault(e.family,t.family),lineHeight:toLineHeight(valueOrDefault(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:valueOrDefault(e.weight,t.weight),string:""};return a.string=function toFontString(e){return!e||isNullOrUndef(e.size)||isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function resolve(e,t,n,r){let a,o,l,s=!0;for(a=0,o=e.length;a<o;++a)if(l=e[a],void 0!==l&&(void 0!==t&&"function"==typeof l&&(l=l(t),s=!1),void 0!==n&&isArray(l)&&(l=l[n%l.length],s=!1),void 0!==l))return r&&!s&&(r.cacheable=!1),l}function createContext(e,t){return Object.assign(Object.create(e),t)}function _createResolver(e,t=[""],n=e,r,a=(()=>e[0])){defined(r)||(r=_resolve("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:r,_getTarget:a,override:a=>_createResolver([a,...e],t,n,r)};return new Proxy(o,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>_cached(n,r,(()=>function _resolveWithPrefixes(e,t,n,r){let a;for(const o of t)if(a=_resolve(readKey(o,e),n),defined(a))return needsSubResolver(e,a)?createSubResolver(n,r,e,a):a}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>getKeysFromAllScopes(e).includes(t),ownKeys:e=>getKeysFromAllScopes(e),set(e,t,n){const r=e._storage||(e._storage=a());return e[t]=r[t]=n,delete e._keys,!0}})}function _attachContext(e,t,n,r){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:_descriptors(e,r),setContext:t=>_attachContext(e,t,n,r),override:a=>_attachContext(e.override(a),t,n,r)};return new Proxy(a,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>_cached(e,t,(()=>function _resolveWithContext(e,t,n){const{_proxy:r,_context:a,_subProxy:o,_descriptors:l}=e;let s=r[t];isFunction(s)&&l.isScriptable(t)&&(s=function _resolveScriptable(e,t,n,r){const{_proxy:a,_context:o,_subProxy:l,_stack:s}=n;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e),t=t(o,l||r),s.delete(e),needsSubResolver(e,t)&&(t=createSubResolver(a._scopes,a,e,t));return t}(t,s,e,n));isArray(s)&&s.length&&(s=function _resolveArray(e,t,n,r){const{_proxy:a,_context:o,_subProxy:l,_descriptors:s}=n;if(defined(o.index)&&r(e))t=t[o.index%t.length];else if(isObject(t[0])){const n=t,r=a._scopes.filter((e=>e!==n));t=[];for(const c of n){const n=createSubResolver(r,a,e,c);t.push(_attachContext(n,o,l&&l[e],s))}}return t}(t,s,e,l.isIndexable));needsSubResolver(t,s)&&(s=_attachContext(s,a,o&&o[t],l));return s}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function _descriptors(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:n,indexable:r,isScriptable:isFunction(n)?n:()=>n,isIndexable:isFunction(r)?r:()=>r}}const readKey=(e,t)=>e?e+_capitalize(t):t,needsSubResolver=(e,t)=>isObject(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function _cached(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const r=n();return e[t]=r,r}function resolveFallback(e,t,n){return isFunction(e)?e(t,n):e}const getScope=(e,t)=>!0===e?t:"string"==typeof e?resolveObjectKey(t,e):void 0;function addScopes(e,t,n,r,a){for(const o of t){const t=getScope(n,o);if(t){e.add(t);const o=resolveFallback(t._fallback,n,a);if(defined(o)&&o!==n&&o!==r)return o}else if(!1===t&&defined(r)&&n!==r)return null}return!1}function createSubResolver(e,t,n,r){const a=t._rootScopes,o=resolveFallback(t._fallback,n,r),l=[...e,...a],s=new Set;s.add(r);let c=addScopesFromKey(s,l,n,o||n,r);return null!==c&&((!defined(o)||o===n||(c=addScopesFromKey(s,l,o,c,r),null!==c))&&_createResolver(Array.from(s),[""],a,o,(()=>function subGetTarget(e,t,n){const r=e._getTarget();t in r||(r[t]={});const a=r[t];if(isArray(a)&&isObject(n))return n;return a}(t,n,r))))}function addScopesFromKey(e,t,n,r,a){for(;n;)n=addScopes(e,t,n,r,a);return n}function _resolve(e,t){for(const n of t){if(!n)continue;const t=n[e];if(defined(t))return t}}function getKeysFromAllScopes(e){let t=e._keys;return t||(t=e._keys=function resolveKeysFromAllScopes(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function _parseObjectDataRadialScale(e,t,n,r){const{iScale:a}=e,{key:o="r"}=this._parsing,l=new Array(r);let s,c,u,d;for(s=0,c=r;s<c;++s)u=s+n,d=t[u],l[s]={r:a.parse(resolveObjectKey(d,o),u)};return l}const j=Number.EPSILON||1e-14,getPoint=(e,t)=>t<e.length&&!e[t].skip&&e[t],getValueAxis=e=>"x"===e?"y":"x";function splineCurve(e,t,n,r){const a=e.skip?t:e,o=t,l=n.skip?t:n,s=distanceBetweenPoints(o,a),c=distanceBetweenPoints(l,o);let u=s/(s+c),d=c/(s+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=r*u,p=r*d;return{previous:{x:o.x-h*(l.x-a.x),y:o.y-h*(l.y-a.y)},next:{x:o.x+p*(l.x-a.x),y:o.y+p*(l.y-a.y)}}}function splineCurveMonotone(e,t="x"){const n=getValueAxis(t),r=e.length,a=Array(r).fill(0),o=Array(r);let l,s,c,u=getPoint(e,0);for(l=0;l<r;++l)if(s=c,c=u,u=getPoint(e,l+1),c){if(u){const e=u[t]-c[t];a[l]=0!==e?(u[n]-c[n])/e:0}o[l]=s?u?b(a[l-1])!==b(a[l])?0:(a[l-1]+a[l])/2:a[l-1]:a[l]}!function monotoneAdjust(e,t,n){const r=e.length;let a,o,l,s,c,u=getPoint(e,0);for(let d=0;d<r-1;++d)c=u,u=getPoint(e,d+1),c&&u&&(almostEquals(t[d],0,j)?n[d]=n[d+1]=0:(a=n[d]/t[d],o=n[d+1]/t[d],s=Math.pow(a,2)+Math.pow(o,2),s<=9||(l=3/Math.sqrt(s),n[d]=a*l*t[d],n[d+1]=o*l*t[d])))}(e,a,o),function monotoneCompute(e,t,n="x"){const r=getValueAxis(n),a=e.length;let o,l,s,c=getPoint(e,0);for(let u=0;u<a;++u){if(l=s,s=c,c=getPoint(e,u+1),!s)continue;const a=s[n],d=s[r];l&&(o=(a-l[n])/3,s[`cp1${n}`]=a-o,s[`cp1${r}`]=d-o*t[u]),c&&(o=(c[n]-a)/3,s[`cp2${n}`]=a+o,s[`cp2${r}`]=d+o*t[u])}}(e,o,t)}function capControlPoint(e,t,n){return Math.max(Math.min(e,n),t)}function _updateBezierControlPoints(e,t,n,r,a){let o,l,s,c;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)splineCurveMonotone(e,a);else{let n=r?e[e.length-1]:e[0];for(o=0,l=e.length;o<l;++o)s=e[o],c=splineCurve(n,s,e[Math.min(o+1,l-(r?0:1))%l],t.tension),s.cp1x=c.previous.x,s.cp1y=c.previous.y,s.cp2x=c.next.x,s.cp2y=c.next.y,n=s}t.capBezierPoints&&function capBezierPoints(e,t){let n,r,a,o,l,s=_isPointInArea(e[0],t);for(n=0,r=e.length;n<r;++n)l=o,o=s,s=n<r-1&&_isPointInArea(e[n+1],t),o&&(a=e[n],l&&(a.cp1x=capControlPoint(a.cp1x,t.left,t.right),a.cp1y=capControlPoint(a.cp1y,t.top,t.bottom)),s&&(a.cp2x=capControlPoint(a.cp2x,t.left,t.right),a.cp2y=capControlPoint(a.cp2y,t.top,t.bottom)))}(e,n)}function _isDomSupported(){return"undefined"!=typeof window&&"undefined"!=typeof document}function _getParentNode(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function parseMaxStyle(e,t,n){let r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const getComputedStyle=e=>window.getComputedStyle(e,null);const M=["top","right","bottom","left"];function getPositionedStyle(e,t,n){const r={};n=n?"-"+n:"";for(let a=0;a<4;a++){const o=M[a];r[o]=parseFloat(e[t+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function getRelativePosition(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,a=getComputedStyle(n),o="border-box"===a.boxSizing,l=getPositionedStyle(a,"padding"),s=getPositionedStyle(a,"border","width"),{x:c,y:u,box:d}=function getCanvasPosition(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:a,offsetY:o}=r;let l,s,c=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(a,o,e.target))l=a,s=o;else{const e=t.getBoundingClientRect();l=r.clientX-e.left,s=r.clientY-e.top,c=!0}return{x:l,y:s,box:c}}(e,n),h=l.left+(d&&s.left),p=l.top+(d&&s.top);let{width:g,height:b}=t;return o&&(g-=l.width+s.width,b-=l.height+s.height),{x:Math.round((c-h)/g*n.width/r),y:Math.round((u-p)/b*n.height/r)}}const round1=e=>Math.round(10*e)/10;function getMaximumSize(e,t,n,r){const a=getComputedStyle(e),o=getPositionedStyle(a,"margin"),l=parseMaxStyle(a.maxWidth,e,"clientWidth")||c,s=parseMaxStyle(a.maxHeight,e,"clientHeight")||c,u=function getContainerSize(e,t,n){let r,a;if(void 0===t||void 0===n){const o=_getParentNode(e);if(o){const e=o.getBoundingClientRect(),l=getComputedStyle(o),s=getPositionedStyle(l,"border","width"),c=getPositionedStyle(l,"padding");t=e.width-c.width-s.width,n=e.height-c.height-s.height,r=parseMaxStyle(l.maxWidth,o,"clientWidth"),a=parseMaxStyle(l.maxHeight,o,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||c,maxHeight:a||c}}(e,t,n);let{width:d,height:h}=u;if("content-box"===a.boxSizing){const e=getPositionedStyle(a,"border","width"),t=getPositionedStyle(a,"padding");d-=t.width+e.width,h-=t.height+e.height}return d=Math.max(0,d-o.width),h=Math.max(0,r?Math.floor(d/r):h-o.height),d=round1(Math.min(d,l,u.maxWidth)),h=round1(Math.min(h,s,u.maxHeight)),d&&!h&&(h=round1(d/2)),{width:d,height:h}}function retinaScale(e,t,n){const r=t||1,a=Math.floor(e.height*r),o=Math.floor(e.width*r);e.height=a/r,e.width=o/r;const l=e.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${e.height}px`,l.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||l.height!==a||l.width!==o)&&(e.currentDevicePixelRatio=r,l.height=a,l.width=o,e.ctx.setTransform(r,0,0,r,0,0),!0)}const z=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function readUsedSize(e,t){const n=function getStyle(e,t){return getComputedStyle(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function _pointInLine(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function _steppedInterpolation(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function _bezierInterpolation(e,t,n,r){const a={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},l=_pointInLine(e,a,n),s=_pointInLine(a,o,n),c=_pointInLine(o,t,n),u=_pointInLine(l,s,n),d=_pointInLine(s,c,n);return _pointInLine(u,d,n)}const A=new Map;function formatNumber(e,t,n){return function getNumberFormat(e,t){t=t||{};const n=e+JSON.stringify(t);let r=A.get(n);return r||(r=new Intl.NumberFormat(e,t),A.set(n,r)),r}(t,n).format(e)}function getRtlAdapter(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function overrideTextDirection(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function restoreTextDirection(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function propertyFn(e){return"angle"===e?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(e,t)=>e-t,normalize:e=>e}}function normalizeSegment({start:e,end:t,count:n,loop:r,style:a}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n==0,style:a}}function _boundSegment(e,t,n){if(!n)return[e];const{property:r,start:a,end:o}=n,l=t.length,{compare:s,between:c,normalize:u}=propertyFn(r),{start:d,end:h,loop:p,style:g}=function getSegment(e,t,n){const{property:r,start:a,end:o}=n,{between:l,normalize:s}=propertyFn(r),c=t.length;let u,d,{start:h,end:p,loop:g}=e;if(g){for(h+=c,p+=c,u=0,d=c;u<d&&l(s(t[h%c][r]),a,o);++u)h--,p--;h%=c,p%=c}return p<h&&(p+=c),{start:h,end:p,loop:g,style:e.style}}(e,t,n),b=[];let m,v,y,_=!1,O=null;const shouldStart=()=>_||c(a,y,m)&&0!==s(a,y),shouldStop=()=>!_||0===s(o,m)||c(o,y,m);for(let e=d,n=d;e<=h;++e)v=t[e%l],v.skip||(m=u(v[r]),m!==y&&(_=c(m,a,o),null===O&&shouldStart()&&(O=0===s(m,a)?e:n),null!==O&&shouldStop()&&(b.push(normalizeSegment({start:O,end:e,loop:p,count:l,style:g})),O=null),n=e,y=m));return null!==O&&b.push(normalizeSegment({start:O,end:h,loop:p,count:l,style:g})),b}function _boundSegments(e,t){const n=[],r=e.segments;for(let a=0;a<r.length;a++){const o=_boundSegment(r[a],e.points,t);o.length&&n.push(...o)}return n}function splitByStyles(e,t,n,r){return r&&r.setContext&&n?function doSplitByStyles(e,t,n,r){const a=e._chart.getContext(),o=readStyle(e.options),{_datasetIndex:l,options:{spanGaps:s}}=e,c=n.length,u=[];let d=o,h=t[0].start,p=h;function addStyle(e,t,r,a){const o=s?-1:1;if(e!==t){for(e+=c;n[e%c].skip;)e-=o;for(;n[t%c].skip;)t+=o;e%c!=t%c&&(u.push({start:e%c,end:t%c,loop:r,style:a}),d=a,h=t%c)}}for(const e of t){h=s?h:e.start;let t,o=n[h%c];for(p=h+1;p<=e.end;p++){const s=n[p%c];t=readStyle(r.setContext(createContext(a,{type:"segment",p0:o,p1:s,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:l}))),styleChanged(t,d)&&addStyle(h,p-1,e.loop,d),o=s,d=t}h<p-1&&addStyle(h,p-1,e.loop,d)}return u}(e,t,n,r):t}function readStyle(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function styleChanged(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var N=new class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const a=t.listeners[r],o=t.duration;a.forEach((r=>r({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=v.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(e=Date.now()){let t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const a=n.items;let o,l=a.length-1,s=!1;for(;l>=0;--l)o=a[l],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(e),s=!0):(a[l]=a[a.length-1],a.pop());s&&(r.draw(),this._notify(r,n,e,"progress")),a.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=a.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const L="transparent",R={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=color(e||L),a=r.valid&&color(t||L);return a&&a.valid?a.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class Animation{constructor(e,t,n,r){const a=t[n];r=resolve([e.to,r,a,e.from]);const o=resolve([e.from,a,r]);this._active=!0,this._fn=e.fn||R[e.type||typeof o],this._easing=y[e.easing]||y.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],a=n-this._start,o=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=resolve([e.to,t,r,e.from]),this._from=resolve([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,a=this._from,o=this._loop,l=this._to;let s;if(this._active=a!==l&&(o||t<n),!this._active)return this._target[r]=l,void this._notify(!0);t<0?this._target[r]=a:(s=t/n%2,s=o&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[r]=this._fn(a,l,s))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let e=0;e<n.length;e++)n[e][t]()}}T.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const F=Object.keys(T.animation);T.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),T.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),T.describe("animations",{_fallback:"animation"}),T.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}});class Animations{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!isObject(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach((n=>{const r=e[n];if(!isObject(r))return;const a={};for(const e of F)a[e]=r[e];(isArray(r.properties)&&r.properties||[n]).forEach((e=>{e!==n&&t.has(e)||t.set(e,a)}))}))}_animateOptions(e,t){const n=t.options,r=function resolveTargetOptions(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const a=this._createAnimations(r,n);return n.$shared&&function awaitAll(e,t){const n=[],r=Object.keys(t);for(let t=0;t<r.length;t++){const a=e[r[t]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),a}_createAnimations(e,t){const n=this._properties,r=[],a=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let s;for(s=o.length-1;s>=0;--s){const c=o[s];if("$"===c.charAt(0))continue;if("options"===c){r.push(...this._animateOptions(e,t));continue}const u=t[c];let d=a[c];const h=n.get(c);if(d){if(h&&d.active()){d.update(h,u,l);continue}d.cancel()}h&&h.duration?(a[c]=d=new Animation(h,e,c,u),r.push(d)):e[c]=u}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(N.add(this._chart,n),!0):void 0}}function scaleClip(e,t){const n=e&&e.options||{},r=n.reverse,a=void 0===n.min?t:0,o=void 0===n.max?t:0;return{start:r?o:a,end:r?a:o}}function getSortedDatasetIndices(e,t){const n=[],r=e._getSortedDatasetMetas(t);let a,o;for(a=0,o=r.length;a<o;++a)n.push(r[a].index);return n}function applyStack(e,t,n,r={}){const a=e.keys,o="single"===r.mode;let l,s,c,u;if(null!==t){for(l=0,s=a.length;l<s;++l){if(c=+a[l],c===n){if(r.all)continue;break}u=e.values[c],isNumberFinite(u)&&(o||0===t||b(t)===b(u))&&(t+=u)}return t}}function isStacked(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function getOrCreateStack(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function getLastIndexInStack(e,t,n,r){for(const a of t.getMatchingVisibleMetas(r).reverse()){const t=e[a.index];if(n&&t>0||!n&&t<0)return a.index}return null}function updateStacks(e,t){const{chart:n,_cachedMeta:r}=e,a=n._stacks||(n._stacks={}),{iScale:o,vScale:l,index:s}=r,c=o.axis,u=l.axis,d=function getStackKey(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(o,l,r),h=t.length;let p;for(let e=0;e<h;++e){const n=t[e],{[c]:o,[u]:h}=n;p=(n._stacks||(n._stacks={}))[u]=getOrCreateStack(a,d,o),p[s]=h,p._top=getLastIndexInStack(p,l,!0,r.type),p._bottom=getLastIndexInStack(p,l,!1,r.type)}}function getFirstScaleId(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function clearStacks(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n]}}}const isDirectUpdateMode=e=>"reset"===e||"none"===e,cloneIfNotShared=(e,t)=>t?e:Object.assign({},e);class DatasetController{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=isStacked(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&clearStacks(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),chooseId=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,r=t.xAxisID=valueOrDefault(n.xAxisID,getFirstScaleId(e,"x")),a=t.yAxisID=valueOrDefault(n.yAxisID,getFirstScaleId(e,"y")),o=t.rAxisID=valueOrDefault(n.rAxisID,getFirstScaleId(e,"r")),l=t.indexAxis,s=t.iAxisID=chooseId(l,r,a,o),c=t.vAxisID=chooseId(l,a,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(s),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),e._stacked&&clearStacks(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(isObject(t))this._data=function convertObjectDataToArray(e){const t=Object.keys(e),n=new Array(t.length);let r,a,o;for(r=0,a=t.length;r<a;++r)o=t[r],n[r]={x:o,y:e[o]};return n}(t);else if(n!==t){if(n){unlistenArrayEvents(n,this);const e=this._cachedMeta;clearStacks(e),e._parsed=[]}t&&Object.isExtensible(t)&&function listenArrayEvents(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),m.forEach((t=>{const n="_onData"+_capitalize(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...t){const a=r.apply(this,t);return e._chartjs.listeners.forEach((e=>{"function"==typeof e[n]&&e[n](...t)})),a}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const a=t._stacked;t._stacked=isStacked(t.vScale,t),t.stack!==n.stack&&(r=!0,clearStacks(t),t.stack=n.stack),this._resyncElements(e),(r||a!==t._stacked)&&updateStacks(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:a,_stacked:o}=n,l=a.axis;let s,c,u,d=0===e&&t===r.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,u=r;else{u=isArray(r[e])?this.parseArrayData(n,r,e,t):isObject(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const isNotInOrderComparedToPrev=()=>null===c[l]||h&&c[l]<h[l];for(s=0;s<t;++s)n._parsed[s+e]=c=u[s],d&&(isNotInOrderComparedToPrev()&&(d=!1),h=c);n._sorted=d}o&&updateStacks(this,u)}parsePrimitiveData(e,t,n,r){const{iScale:a,vScale:o}=e,l=a.axis,s=o.axis,c=a.getLabels(),u=a===o,d=new Array(r);let h,p,g;for(h=0,p=r;h<p;++h)g=h+n,d[h]={[l]:u||a.parse(c[g],g),[s]:o.parse(t[g],g)};return d}parseArrayData(e,t,n,r){const{xScale:a,yScale:o}=e,l=new Array(r);let s,c,u,d;for(s=0,c=r;s<c;++s)u=s+n,d=t[u],l[s]={x:a.parse(d[0],u),y:o.parse(d[1],u)};return l}parseObjectData(e,t,n,r){const{xScale:a,yScale:o}=e,{xAxisKey:l="x",yAxisKey:s="y"}=this._parsing,c=new Array(r);let u,d,h,p;for(u=0,d=r;u<d;++u)h=u+n,p=t[h],c[u]={x:a.parse(resolveObjectKey(p,l),h),y:o.parse(resolveObjectKey(p,s),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,a=this._cachedMeta,o=t[e.axis];return applyStack({keys:getSortedDatasetIndices(r,!0),values:t._stacks[e.axis]},o,a.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const a=n[t.axis];let o=null===a?NaN:a;const l=r&&n._stacks[t.axis];r&&l&&(r.values=l,o=applyStack(r,a,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,a=n._sorted&&e===n.iScale,o=r.length,l=this._getOtherScale(e),s=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:getSortedDatasetIndices(n,!0),values:null})(t,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=function getUserBounds(e){const{min:t,max:n,minDefined:r,maxDefined:a}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}(l);let h,p;function _skip(){p=r[h];const t=p[l.axis];return!isNumberFinite(p[e.axis])||u>t||d<t}for(h=0;h<o&&(_skip()||(this.updateRangeFromParsed(c,e,p,s),!a));++h);if(a)for(h=o-1;h>=0;--h)if(!_skip()){this.updateRangeFromParsed(c,e,p,s);break}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,a,o;for(r=0,a=t.length;r<a;++r)o=t[r][e.axis],isNumberFinite(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function toClip(e){let t,n,r,a;return isObject(e)?(t=e.top,n=e.right,r=e.bottom,a=e.left):t=n=r=a=e,{top:t,right:n,bottom:r,left:a,disabled:!1===e}}(valueOrDefault(this.options.clip,function defaultClip(e,t,n){if(!1===n)return!1;const r=scaleClip(e,n),a=scaleClip(t,n);return{top:a.end,right:r.end,bottom:a.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],a=t.chartArea,o=[],l=this._drawStart||0,s=this._drawCount||r.length-l,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,a,l,s),u=l;u<l+s;++u){const t=r[u];t.hidden||(t.active&&c?o.push(t):t.draw(e,a))}for(u=0;u<o.length;++u)o[u].draw(e,a)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];a=t.$context||(t.$context=function createDataContext(e,t,n){return createContext(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),a.parsed=this.getParsed(e),a.raw=r.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=function createDatasetContext(e,t){return createContext(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=n,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const r="active"===t,a=this._cachedDataOpts,o=e+"-"+t,l=a[o],s=this.enableOptionSharing&&defined(n);if(l)return cloneIfNotShared(l,s);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),p=Object.keys(T.elements[e]),g=c.resolveNamedOptions(h,p,(()=>this.getContext(n,r)),d);return g.$shared&&(g.$shared=s,a[o]=Object.freeze(cloneIfNotShared(g,s))),g}_resolveAnimations(e,t,n){const r=this.chart,a=this._cachedDataOpts,o=`animation-${t}`,l=a[o];if(l)return l;let s;if(!1!==r.options.animation){const r=this.chart.config,a=r.datasetAnimationScopeKeys(this._type,t),o=r.getOptionScopes(this.getDataset(),a);s=r.createResolver(o,this.getContext(e,n,t))}const c=new Animations(r,s&&s.animations);return s&&s._cacheable&&(a[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||isDirectUpdateMode(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,a=this.getSharedOptions(n),o=this.includeOptions(t,a)||a!==r;return this.updateSharedOptions(a,t,n),{sharedOptions:a,includeOptions:o}}updateElement(e,t,n,r){isDirectUpdateMode(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!isDirectUpdateMode(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const a=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[e,t,n]of this._syncList)this[e](t,n);this._syncList=[];const r=n.length,a=t.length,o=Math.min(a,r);o&&this.parse(0,o),a>r?this._insertElements(r,a-r,e):a<r&&this._removeElements(a,r-a)}_insertElements(e,t,n=!0){const r=this._cachedMeta,a=r.data,o=e+t;let l;const move=e=>{for(e.length+=t,l=e.length-1;l>=o;l--)e[l]=e[l-t]};for(move(a),l=e;l<o;++l)a[l]=new this.dataElementType;this._parsing&&move(r._parsed),this.parse(e,t),n&&this.updateElements(a,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&clearStacks(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function computeMinSampleSize(e){const t=e.iScale,n=function getAllScaleValues(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,a=n.length;t<a;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=_arrayUnique(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,a,o,l,s=t._length;const updateMinAndPrev=()=>{32767!==o&&-32768!==o&&(defined(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(r=0,a=n.length;r<a;++r)o=t.getPixelForValue(n[r]),updateMinAndPrev();for(l=void 0,r=0,a=t.ticks.length;r<a;++r)o=t.getPixelForTick(r),updateMinAndPrev();return s}function parseValue(e,t,n,r){return isArray(e)?function parseFloatBar(e,t,n,r){const a=n.parse(e[0],r),o=n.parse(e[1],r),l=Math.min(a,o),s=Math.max(a,o);let c=l,u=s;Math.abs(l)>Math.abs(s)&&(c=s,u=l),t[n.axis]=u,t._custom={barStart:c,barEnd:u,start:a,end:o,min:l,max:s}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function parseArrayOrPrimitive(e,t,n,r){const a=e.iScale,o=e.vScale,l=a.getLabels(),s=a===o,c=[];let u,d,h,p;for(u=n,d=n+r;u<d;++u)p=t[u],h={},h[a.axis]=s||a.parse(l[u],u),c.push(parseValue(p,h,o,u));return c}function isFloatBar(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function setBorderSkipped(e,t,n,r){let a=t.borderSkipped;const o={};if(!a)return void(e.borderSkipped=o);if(!0===a)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:l,end:s,reverse:c,top:u,bottom:d}=function borderProps(e){let t,n,r,a,o;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(a="end",o="start"):(a="start",o="end"),{start:n,end:r,reverse:t,top:a,bottom:o}}(e);"middle"===a&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?a=u:(n._bottom||0)===r?a=d:(o[parseEdge(d,l,s,c)]=!0,a=u)),o[parseEdge(a,l,s,c)]=!0,e.borderSkipped=o}function parseEdge(e,t,n,r){return e=r?startEnd(e=function swap(e,t,n){return e===t?n:e===n?t:e}(e,t,n),n,t):startEnd(e,t,n)}function startEnd(e,t,n){return"start"===e?t:"end"===e?n:e}function setInflateAmount(e,{inflateAmount:t},n){e.inflateAmount="auto"===t?1===n?.33:0:t}DatasetController.defaults={},DatasetController.prototype.datasetElementType=null,DatasetController.prototype.dataElementType=null;class BarController extends DatasetController{parsePrimitiveData(e,t,n,r){return parseArrayOrPrimitive(e,t,n,r)}parseArrayData(e,t,n,r){return parseArrayOrPrimitive(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:a,vScale:o}=e,{xAxisKey:l="x",yAxisKey:s="y"}=this._parsing,c="x"===a.axis?l:s,u="x"===o.axis?l:s,d=[];let h,p,g,b;for(h=n,p=n+r;h<p;++h)b=t[h],g={},g[a.axis]=a.parse(resolveObjectKey(b,c),h),d.push(parseValue(resolveObjectKey(b,u),g,o,h));return d}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const a=n._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,a=this.getParsed(e),o=a._custom,l=isFloatBar(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+n.getLabelForValue(a[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const a="reset"===r,{index:o,_cachedMeta:{vScale:l}}=this,s=l.getBasePixel(),c=l.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(t,r);for(let p=t;p<t+n;p++){const t=this.getParsed(p),n=a||isNullOrUndef(t[l.axis])?{base:s,head:s}:this._calculateBarValuePixels(p),g=this._calculateBarIndexPixels(p,u),b=(t._stacks||{})[l.axis],m={horizontal:c,base:n.base,enableBorderRadius:!b||isFloatBar(t._custom)||o===b._top||o===b._bottom,x:c?n.head:g.center,y:c?g.center:n.head,height:c?g.size:Math.abs(n.size),width:c?Math.abs(n.size):g.size};h&&(m.options=d||this.resolveDataElementOptions(p,e[p].active?"active":r));const v=m.options||e[p].options;setBorderSkipped(m,v,b,o),setInflateAmount(m,v,u.ratio),this.updateElement(e[p],p,m,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),a=n.options.stacked,o=[],skipNull=e=>{const n=e.controller.getParsed(t),r=n&&n[e.vScale.axis];if(isNullOrUndef(r)||isNaN(r))return!0};for(const n of r)if((void 0===t||!skipNull(n))&&((!1===a||-1===o.indexOf(n.stack)||void 0===a&&void 0===n.stack)&&o.push(n.stack),n.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),a=void 0!==t?r.indexOf(t):-1;return-1===a?r.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let a,o;for(a=0,o=t.data.length;a<o;++a)r.push(n.getPixelForValue(this.getParsed(a)[n.axis],a));const l=e.barThickness;return{min:l||computeMinSampleSize(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n},options:{base:r,minBarLength:a}}=this,o=r||0,l=this.getParsed(e),s=l._custom,c=isFloatBar(s);let u,d,h=l[t.axis],p=0,g=n?this.applyStack(t,l,n):h;g!==h&&(p=g-h,g=h),c&&(h=s.barStart,g=s.barEnd-s.barStart,0!==h&&b(h)!==b(s.barEnd)&&(p=0),p+=h);const m=isNullOrUndef(r)||c?p:r;let v=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(p+g):v,d=u-v,Math.abs(d)<a){d=function barSign(e,t,n){return 0!==e?b(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,o)*a,h===o&&(v-=d/2);const e=t.getPixelForDecimal(0),n=t.getPixelForDecimal(1),r=Math.min(e,n),l=Math.max(e,n);v=Math.max(Math.min(v,l),r),u=v+d}if(v===t.getPixelForValue(o)){const e=b(d)*t.getLineWidthForValue(o)/2;v+=e,d-=e}return{size:d,base:v,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,a=r.skipNull,o=valueOrDefault(r.maxBarThickness,1/0);let l,s;if(t.grouped){const n=a?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function computeFlexCategoryTraits(e,t,n,r){const a=t.pixels,o=a[e];let l=e>0?a[e-1]:null,s=e<a.length-1?a[e+1]:null;const c=n.categoryPercentage;null===l&&(l=o-(null===s?t.end-t.start:s-o)),null===s&&(s=o+o-l);const u=o-(o-Math.min(l,s))/2*c;return{chunk:Math.abs(s-l)/2*c/r,ratio:n.barPercentage,start:u}}(e,t,r,n):function computeFitCategoryTraits(e,t,n,r){const a=n.barThickness;let o,l;return isNullOrUndef(a)?(o=t.min*n.categoryPercentage,l=n.barPercentage):(o=a*r,l=1),{chunk:o/r,ratio:l,start:t.pixels[e]-o/2}}(e,t,r,n),u=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0);l=c.start+c.chunk*u+c.chunk/2,s=Math.min(o,c.chunk*c.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),s=Math.min(o,t.min*t.ratio);return{base:l-s/2,head:l+s/2,center:l,size:s}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let a=0;for(;a<r;++a)null!==this.getParsed(a)[t.axis]&&n[a].draw(this._ctx)}}BarController.id="bar",BarController.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},BarController.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class BubbleController extends DatasetController{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const a=super.parsePrimitiveData(e,t,n,r);for(let e=0;e<a.length;e++)a[e]._custom=this.resolveDataElementOptions(e+n).radius;return a}parseArrayData(e,t,n,r){const a=super.parseArrayData(e,t,n,r);for(let e=0;e<a.length;e++){const r=t[n+e];a[e]._custom=valueOrDefault(r[2],this.resolveDataElementOptions(e+n).radius)}return a}parseObjectData(e,t,n,r){const a=super.parseObjectData(e,t,n,r);for(let e=0;e<a.length;e++){const r=t[n+e];a[e]._custom=valueOrDefault(r&&r.r&&+r.r,this.resolveDataElementOptions(e+n).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,{xScale:n,yScale:r}=t,a=this.getParsed(e),o=n.getLabelForValue(a.x),l=r.getLabelForValue(a.y),s=a._custom;return{label:t.label,value:"("+o+", "+l+(s?", "+s:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const a="reset"===r,{iScale:o,vScale:l}=this._cachedMeta,{sharedOptions:s,includeOptions:c}=this._getSharedOptions(t,r),u=o.axis,d=l.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!a&&this.getParsed(h),p={},g=p[u]=a?o.getPixelForDecimal(.5):o.getPixelForValue(n[u]),b=p[d]=a?l.getBasePixel():l.getPixelForValue(n[d]);p.skip=isNaN(g)||isNaN(b),c&&(p.options=s||this.resolveDataElementOptions(h,t.active?"active":r),a&&(p.options.radius=0)),this.updateElement(t,h,p,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const a=r.radius;return"active"!==t&&(r.radius=0),r.radius+=valueOrDefault(n&&n._custom,a),r}}BubbleController.id="bubble",BubbleController.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},BubbleController.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class DoughnutController extends DatasetController{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let a,o,getter=e=>+n[e];if(isObject(n[e])){const{key:e="value"}=this._parsing;getter=t=>+resolveObjectKey(n[t],e)}for(a=e,o=e+t;a<o;++a)r._parsed[a]=getter(a)}}_getRotation(){return toRadians(this.options.rotation-90)}_getCircumference(){return toRadians(this.options.circumference)}_getRotationExtents(){let e=l,t=-l;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const r=this.chart.getDatasetMeta(n).controller,a=r._getRotation(),o=r._getCircumference();e=Math.min(e,a),t=Math.max(t,a+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,a=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,c=Math.max((Math.min(n.width,n.height)-s)/2,0),u=Math.min((h=this.options.cutout,p=c,"string"==typeof h&&h.endsWith("%")?parseFloat(h)/100:h/p),1);var h,p;const g=this._getRingWeight(this.index),{circumference:b,rotation:m}=this._getRotationExtents(),{ratioX:v,ratioY:y,offsetX:_,offsetY:O}=function getRatioAndOffset(e,t,n){let r=1,a=1,s=0,c=0;if(t<l){const l=e,u=l+t,h=Math.cos(l),p=Math.sin(l),g=Math.cos(u),b=Math.sin(u),calcMax=(e,t,r)=>_angleBetween(e,l,u,!0)?1:Math.max(t,t*n,r,r*n),calcMin=(e,t,r)=>_angleBetween(e,l,u,!0)?-1:Math.min(t,t*n,r,r*n),m=calcMax(0,h,g),v=calcMax(d,p,b),y=calcMin(o,h,g),_=calcMin(o+d,p,b);r=(m-y)/2,a=(v-_)/2,s=-(m+y)/2,c=-(v+_)/2}return{ratioX:r,ratioY:a,offsetX:s,offsetY:c}}(m,b,u),E=(n.width-s)/v,x=(n.height-s)/y,S=Math.max(Math.min(E,x)/2,0),w=toDimension(this.options.radius,S),C=(w-Math.max(w*u,0))/this._getVisibleDatasetWeightTotal();this.offsetX=_*w,this.offsetY=O*w,r.total=this.calculateTotal(),this.outerRadius=w-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*g,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,a=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*a/l)}updateElements(e,t,n,r){const a="reset"===r,o=this.chart,l=o.chartArea,s=o.options.animation,c=(l.left+l.right)/2,u=(l.top+l.bottom)/2,d=a&&s.animateScale,h=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:g,includeOptions:b}=this._getSharedOptions(t,r);let m,v=this._getRotation();for(m=0;m<t;++m)v+=this._circumference(m,a);for(m=t;m<t+n;++m){const t=this._circumference(m,a),n=e[m],o={x:c+this.offsetX,y:u+this.offsetY,startAngle:v,endAngle:v+t,circumference:t,outerRadius:p,innerRadius:h};b&&(o.options=g||this.resolveDataElementOptions(m,n.active?"active":r)),v+=t,this.updateElement(n,m,o,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const a=e._parsed[n];null===a||isNaN(a)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(a))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?l*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=formatNumber(t._parsed[e],n.options.locale);return{label:r[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,a,o,l,s;if(!e)for(r=0,a=n.data.datasets.length;r<a;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),e=o.data,l=o.controller;break}if(!e)return 0;for(r=0,a=e.length;r<a;++r)s=l.resolveDataElementOptions(r),"inner"!==s.borderAlign&&(t=Math.max(t,s.borderWidth||0,s.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(valueOrDefault(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}DoughnutController.id="doughnut",DoughnutController.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},DoughnutController.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},DoughnutController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map(((t,r)=>{const a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let t=e.label;const n=": "+e.formattedValue;return isArray(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}};class LineController extends DatasetController{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:a}=t,o=this.chart._animationsDisabled;let{start:l,count:s}=_getStartAndCountOfVisiblePoints(t,r,o);this._drawStart=l,this._drawCount=s,_scaleRangesChanged(t)&&(l=0,s=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},e),this.updateElements(r,l,s,e)}updateElements(e,t,n,r){const a="reset"===r,{iScale:o,vScale:l,_stacked:s,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,r),h=o.axis,p=l.axis,{spanGaps:g,segment:b}=this.options,m=isNumber(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||a||"none"===r;let y=t>0&&this.getParsed(t-1);for(let g=t;g<t+n;++g){const t=e[g],n=this.getParsed(g),_=v?t:{},O=isNullOrUndef(n[p]),E=_[h]=o.getPixelForValue(n[h],g),x=_[p]=a||O?l.getBasePixel():l.getPixelForValue(s?this.applyStack(l,n,s):n[p],g);_.skip=isNaN(E)||isNaN(x)||O,_.stop=g>0&&Math.abs(n[h]-y[h])>m,b&&(_.parsed=n,_.raw=c.data[g]),d&&(_.options=u||this.resolveDataElementOptions(g,t.active?"active":r)),v||this.updateElement(t,g,_,r),y=n}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const a=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,a,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}LineController.id="line",LineController.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},LineController.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class PolarAreaController extends DatasetController{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=formatNumber(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:a}}parseObjectData(e,t,n,r){return _parseObjectDataRadialScale.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(r/2,0),o=(a-Math.max(n.cutoutPercentage?a/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,n,r){const a="reset"===r,l=this.chart,s=l.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,h=c.getIndexAngle(0)-.5*o;let p,g=h;const b=360/this.countVisibleElements();for(p=0;p<t;++p)g+=this._computeAngle(p,r,b);for(p=t;p<t+n;p++){const t=e[p];let n=g,o=g+this._computeAngle(p,r,b),m=l.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;g=o,a&&(s.animateScale&&(m=0),s.animateRotate&&(n=o=h));const v={x:u,y:d,innerRadius:0,outerRadius:m,startAngle:n,endAngle:o,options:this.resolveDataElementOptions(p,t.active?"active":r)};this.updateElement(t,p,v,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?toRadians(this.resolveDataElementOptions(e,t).angle||n):0}}PolarAreaController.id="polarArea",PolarAreaController.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},PolarAreaController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map(((t,r)=>{const a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class PieController extends DoughnutController{}PieController.id="pie",PieController.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class RadarController extends DatasetController{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return _parseObjectDataRadialScale.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],a=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const o={_loop:!0,_fullLoop:a.length===r.length,options:t};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const a=this._cachedMeta.rScale,o="reset"===r;for(let l=t;l<t+n;l++){const t=e[l],n=this.resolveDataElementOptions(l,t.active?"active":r),s=a.getPointPositionForValue(l,this.getParsed(l).r),c=o?a.xCenter:s.x,u=o?a.yCenter:s.y,d={x:c,y:u,angle:s.angle,skip:isNaN(c)||isNaN(u),options:n};this.updateElement(t,l,d,r)}}}RadarController.id="radar",RadarController.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},RadarController.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Element{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}Element.defaults={},Element.defaultRoutes=void 0;const B={values:e=>isArray(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let a,o=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(a="scientific"),o=function calculateDelta(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const l=g(Math.abs(o)),s=Math.max(Math.min(-1*Math.floor(l),20),0),c={notation:a,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(c,this.options.ticks.format),formatNumber(e,r,c)},logarithmic(e,t,n){if(0===e)return"0";const r=e/Math.pow(10,Math.floor(g(e)));return 1===r||2===r||5===r?B.numeric.call(this,e,t,n):""}};var W={formatters:B};function autoSkip(e,t){const n=e.options.ticks,r=n.maxTicksLimit||function determineMaxTicks(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),a=e._maxLength/n;return Math.floor(Math.min(r,a))}(e),a=n.major.enabled?function getMajorIndices(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],o=a.length,l=a[0],s=a[o-1],c=[];if(o>r)return function skipMajors(e,t,n,r){let a,o=0,l=n[0];for(r=Math.ceil(r),a=0;a<e.length;a++)a===l&&(t.push(e[a]),o++,l=n[o*r])}(t,c,a,o/r),c;const u=function calculateSpacing(e,t,n){const r=function getEvenSpacing(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),a=t.length/n;if(!r)return Math.max(a,1);const o=function _factorize(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r==0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let e=0,t=o.length-1;e<t;e++){const t=o[e];if(t>a)return t}return Math.max(a,1)}(a,t,r);if(o>0){let e,n;const r=o>1?Math.round((s-l)/(o-1)):null;for(skip(t,c,u,isNullOrUndef(r)?0:l-r,l),e=0,n=o-1;e<n;e++)skip(t,c,u,a[e],a[e+1]);return skip(t,c,u,s,isNullOrUndef(r)?t.length:s+r),c}return skip(t,c,u),c}function skip(e,t,n,r,a){const o=valueOrDefault(r,0),l=Math.min(valueOrDefault(a,e.length),e.length);let s,c,u,d=0;for(n=Math.ceil(n),a&&(s=a-r,n=s/Math.floor(s/n)),u=o;u<0;)d++,u=Math.round(o+d*n);for(c=Math.max(o,0);c<l;c++)c===u&&(t.push(e[c]),d++,u=Math.round(o+d*n))}T.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:W.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),T.route("scale.ticks","color","","color"),T.route("scale.grid","color","","borderColor"),T.route("scale.grid","borderColor","","borderColor"),T.route("scale.title","color","","color"),T.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e}),T.describe("scales",{_fallback:"scale"}),T.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e});const offsetFromEdge=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n;function sample(e,t){const n=[],r=e.length/t,a=e.length;let o=0;for(;o<a;o+=r)n.push(e[Math.floor(o)]);return n}function getPixelForGridLine(e,t,n){const r=e.ticks.length,a=Math.min(t,r-1),o=e._startPixel,l=e._endPixel,s=1e-6;let c,u=e.getPixelForTick(a);if(!(n&&(c=1===r?Math.max(u-o,l-u):0===t?(e.getPixelForTick(1)-u)/2:(u-e.getPixelForTick(a-1))/2,u+=a<t?c:-c,u<o-s||u>l+s)))return u}function getTickMarkLength(e){return e.drawTicks?e.tickLength:0}function getTitleHeight(e,t){if(!e.display)return 0;const n=toFont(e.font,t),r=toPadding(e.padding);return(isArray(e.text)?e.text.length:1)*n.lineHeight+r.height}function titleAlign(e,t,n){let r=_toLeftRightCenter(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class Scale extends Element{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=finiteOrDefault(e,Number.POSITIVE_INFINITY),t=finiteOrDefault(t,Number.NEGATIVE_INFINITY),n=finiteOrDefault(n,Number.POSITIVE_INFINITY),r=finiteOrDefault(r,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(e,n),max:finiteOrDefault(t,r),minDefined:isNumberFinite(e),maxDefined:isNumberFinite(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:a,maxDefined:o}=this.getUserBounds();if(a&&o)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let s=0,c=l.length;s<c;++s)t=l[s].controller.getMinMax(this,e),a||(n=Math.min(n,t.min)),o||(r=Math.max(r,t.max));return n=o&&n>r?r:n,r=a&&n>r?n:r,{min:finiteOrDefault(n,finiteOrDefault(r,n)),max:finiteOrDefault(r,finiteOrDefault(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:a,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function _addGrace(e,t,n){const{min:r,max:a}=e,o=toDimension(t,(a-r)/2),keepZero=(e,t)=>n&&0===e?0:e+t;return{min:keepZero(r,-Math.abs(o)),max:keepZero(a,o)}}(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=l<this.ticks.length;this._convertTicksToLabels(s?sample(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),callback(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,a;for(n=0,r=e.length;n<r;n++)a=e[n],a.label=callback(t.callback,[a.value,n,e],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=this.ticks.length,r=t.minRotation||0,a=t.maxRotation;let o,l,s,c=r;if(!this._isVisible()||!t.display||r>=a||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=_limitValue(this.chart.width-d,0,this.maxWidth);o=e.offset?this.maxWidth/n:p/(n-1),d+6>o&&(o=p/(n-(e.offset?.5:1)),l=this.maxHeight-getTickMarkLength(e.grid)-t.padding-getTitleHeight(e.title,this.chart.options.font),s=Math.sqrt(d*d+h*h),c=toDegrees(Math.min(Math.asin(_limitValue((u.highest.height+6)/o,-1,1)),Math.asin(_limitValue(l/s,-1,1))-Math.asin(_limitValue(h/s,-1,1)))),c=Math.max(r,Math.min(a,c))),this.labelRotation=c}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:a}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const o=getTitleHeight(r,t.options.font);if(l?(e.width=this.maxWidth,e.height=getTickMarkLength(a)+o):(e.height=this.maxHeight,e.width=getTickMarkLength(a)+o),n.display&&this.ticks.length){const{first:t,last:r,widest:a,highest:o}=this._getLabelSizes(),s=2*n.padding,c=toRadians(this.labelRotation),u=Math.cos(c),d=Math.sin(c);if(l){const t=n.mirror?0:d*a.width+u*o.height;e.height=Math.min(this.maxHeight,e.height+t+s)}else{const t=n.mirror?0:u*a.width+d*o.height;e.width=Math.min(this.maxWidth,e.width+t+s)}this._calculatePadding(t,r,d,u)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:a,padding:o},position:l}=this.options,s=0!==this.labelRotation,c="top"!==l&&"x"===this.axis;if(this.isHorizontal()){const l=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,h=0;s?c?(d=r*e.width,h=n*t.height):(d=n*e.height,h=r*t.width):"start"===a?h=t.width:"end"===a?d=e.width:"inner"!==a&&(d=e.width/2,h=t.width/2),this.paddingLeft=Math.max((d-l+o)*this.width/(this.width-l),0),this.paddingRight=Math.max((h-u+o)*this.width/(this.width-u),0)}else{let n=t.height/2,r=e.height/2;"start"===a?(n=0,r=e.height):"end"===a&&(n=t.height,r=0),this.paddingTop=n+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)isNullOrUndef(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=sample(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(e,t){const{ctx:n,_longestTextCache:r}=this,a=[],o=[];let l,s,c,u,d,h,p,g,b,m,v,y=0,_=0;for(l=0;l<t;++l){if(u=e[l].label,d=this._resolveTickFontOptions(l),n.font=h=d.string,p=r[h]=r[h]||{data:{},gc:[]},g=d.lineHeight,b=m=0,isNullOrUndef(u)||isArray(u)){if(isArray(u))for(s=0,c=u.length;s<c;++s)v=u[s],isNullOrUndef(v)||isArray(v)||(b=_measureText(n,p.data,p.gc,b,v),m+=g)}else b=_measureText(n,p.data,p.gc,b,u),m=g;a.push(b),o.push(m),y=Math.max(b,y),_=Math.max(m,_)}!function garbageCollect(e,t){each(e,(e=>{const n=e.gc,r=n.length/2;let a;if(r>t){for(a=0;a<r;++a)delete e.data[n[a]];n.splice(0,r)}}))}(r,t);const O=a.indexOf(y),E=o.indexOf(_),valueAt=e=>({width:a[e]||0,height:o[e]||0});return{first:valueAt(0),last:valueAt(t-1),widest:valueAt(O),highest:valueAt(E),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function _int16Range(e){return _limitValue(e,-32768,32767)}(this._alignToPixels?_alignPixel(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function createTickContext(e,t,n){return createContext(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function createScaleContext(e,t){return createContext(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=toRadians(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,l=a?a.widest.width+o:0,s=a?a.highest.height+o:0;return this.isHorizontal()?s*n>l*r?l/n:s/r:s*r<l*n?s/n:l/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:a,position:o}=r,l=a.offset,s=this.isHorizontal(),c=this.ticks.length+(l?1:0),u=getTickMarkLength(a),d=[],h=a.setContext(this.getContext()),p=h.drawBorder?h.borderWidth:0,g=p/2,alignBorderValue=function(e){return _alignPixel(n,e,p)};let b,m,v,y,_,O,E,x,S,w,C,D;if("top"===o)b=alignBorderValue(this.bottom),O=this.bottom-u,x=b-g,w=alignBorderValue(e.top)+g,D=e.bottom;else if("bottom"===o)b=alignBorderValue(this.top),w=e.top,D=alignBorderValue(e.bottom)-g,O=b+g,x=this.top+u;else if("left"===o)b=alignBorderValue(this.right),_=this.right-u,E=b-g,S=alignBorderValue(e.left)+g,C=e.right;else if("right"===o)b=alignBorderValue(this.left),S=e.left,C=alignBorderValue(e.right)-g,_=b+g,E=this.left+u;else if("x"===t){if("center"===o)b=alignBorderValue((e.top+e.bottom)/2+.5);else if(isObject(o)){const e=Object.keys(o)[0],t=o[e];b=alignBorderValue(this.chart.scales[e].getPixelForValue(t))}w=e.top,D=e.bottom,O=b+g,x=O+u}else if("y"===t){if("center"===o)b=alignBorderValue((e.left+e.right)/2);else if(isObject(o)){const e=Object.keys(o)[0],t=o[e];b=alignBorderValue(this.chart.scales[e].getPixelForValue(t))}_=b-g,E=_-u,S=e.left,C=e.right}const P=valueOrDefault(r.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/P));for(m=0;m<c;m+=T){const e=a.setContext(this.getContext(m)),t=e.lineWidth,r=e.color,o=e.borderDash||[],c=e.borderDashOffset,u=e.tickWidth,h=e.tickColor,p=e.tickBorderDash||[],g=e.tickBorderDashOffset;v=getPixelForGridLine(this,m,l),void 0!==v&&(y=_alignPixel(n,v,t),s?_=E=S=C=y:O=x=w=D=y,d.push({tx1:_,ty1:O,tx2:E,ty2:x,x1:S,y1:w,x2:C,y2:D,width:t,color:r,borderDash:o,borderDashOffset:c,tickWidth:u,tickColor:h,tickBorderDash:p,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=b,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:a}=n,o=this.isHorizontal(),l=this.ticks,{align:s,crossAlign:c,padding:u,mirror:d}=a,h=getTickMarkLength(n.grid),p=h+u,g=d?-u:p,b=-toRadians(this.labelRotation),m=[];let v,y,_,O,E,x,S,w,C,D,P,T,k="middle";if("top"===r)x=this.bottom-g,S=this._getXAxisLabelAlignment();else if("bottom"===r)x=this.top+g,S=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(h);S=e.textAlign,E=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(h);S=e.textAlign,E=e.x}else if("x"===t){if("center"===r)x=(e.top+e.bottom)/2+p;else if(isObject(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)+p}S=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)E=(e.left+e.right)/2-p;else if(isObject(r)){const e=Object.keys(r)[0],t=r[e];E=this.chart.scales[e].getPixelForValue(t)}S=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===s?k="top":"end"===s&&(k="bottom"));const I=this._getLabelSizes();for(v=0,y=l.length;v<y;++v){_=l[v],O=_.label;const e=a.setContext(this.getContext(v));w=this.getPixelForTick(v)+a.labelOffset,C=this._resolveTickFontOptions(v),D=C.lineHeight,P=isArray(O)?O.length:1;const t=P/2,n=e.color,s=e.textStrokeColor,u=e.textStrokeWidth;let h,p=S;if(o?(E=w,"inner"===S&&(p=v===y-1?this.options.reverse?"left":"right":0===v?this.options.reverse?"right":"left":"center"),T="top"===r?"near"===c||0!==b?-P*D+D/2:"center"===c?-I.highest.height/2-t*D+D:-I.highest.height+D/2:"near"===c||0!==b?D/2:"center"===c?I.highest.height/2-t*D:I.highest.height-P*D,d&&(T*=-1)):(x=w,T=(1-P)*D/2),e.showLabelBackdrop){const t=toPadding(e.backdropPadding),n=I.heights[v],r=I.widths[v];let a=x+T-t.top,o=E-t.left;switch(k){case"middle":a-=n/2;break;case"bottom":a-=n}switch(S){case"center":o-=r/2;break;case"right":o-=r}h={left:o,top:a,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({rotation:b,label:O,font:C,color:n,strokeColor:s,strokeWidth:u,textOffset:T,textAlign:p,textBaseline:k,translation:[E,x],backdrop:h})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-toRadians(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:a}}=this.options,o=e+a,l=this._getLabelSizes().widest.width;let s,c;return"left"===t?r?(c=this.right+a,"near"===n?s="left":"center"===n?(s="center",c+=l/2):(s="right",c+=l)):(c=this.right-o,"near"===n?s="right":"center"===n?(s="center",c-=l/2):(s="left",c=this.left)):"right"===t?r?(c=this.left+a,"near"===n?s="right":"center"===n?(s="center",c-=l/2):(s="left",c-=l)):(c=this.left+o,"near"===n?s="left":"center"===n?(s="center",c+=l/2):(s="right",c=this.right)):s="right",{textAlign:s,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:a,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,a,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,o;const drawLine=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(a=0,o=r.length;a<o;++a){const e=r[a];t.drawOnChartArea&&drawLine({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&drawLine({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:n}}=this,r=n.setContext(this.getContext()),a=n.drawBorder?r.borderWidth:0;if(!a)return;const o=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let s,c,u,d;this.isHorizontal()?(s=_alignPixel(e,this.left,a)-a/2,c=_alignPixel(e,this.right,o)+o/2,u=d=l):(u=_alignPixel(e,this.top,a)-a/2,d=_alignPixel(e,this.bottom,o)+o/2,s=c=l),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(s,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&clipArea(t,n);const r=this._labelItems||(this._labelItems=this._computeLabelItems(e));let a,o;for(a=0,o=r.length;a<o;++a){const e=r[a],n=e.font,o=e.label;e.backdrop&&(t.fillStyle=e.backdrop.color,t.fillRect(e.backdrop.left,e.backdrop.top,e.backdrop.width,e.backdrop.height)),renderText(t,o,0,e.textOffset,n,e)}n&&unclipArea(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const a=toFont(n.font),o=toPadding(n.padding),l=n.align;let s=a.lineHeight/2;"bottom"===t||"center"===t||isObject(t)?(s+=o.bottom,isArray(n.text)&&(s+=a.lineHeight*(n.text.length-1))):s+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:p}=function titleArgs(e,t,n,r){const{top:a,left:o,bottom:l,right:s,chart:c}=e,{chartArea:u,scales:h}=c;let p,g,b,m=0;const v=l-a,y=s-o;if(e.isHorizontal()){if(g=_alignStartEnd(r,o,s),isObject(n)){const e=Object.keys(n)[0],r=n[e];b=h[e].getPixelForValue(r)+v-t}else b="center"===n?(u.bottom+u.top)/2+v-t:offsetFromEdge(e,n,t);p=s-o}else{if(isObject(n)){const e=Object.keys(n)[0],r=n[e];g=h[e].getPixelForValue(r)-y+t}else g="center"===n?(u.left+u.right)/2-y+t:offsetFromEdge(e,n,t);b=_alignStartEnd(r,l,a),m="left"===n?-d:d}return{titleX:g,titleY:b,maxWidth:p,rotation:m}}(this,s,t,l);renderText(e,n.text,0,0,a,{color:n.color,maxWidth:h,rotation:p,textAlign:titleAlign(l,t,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=valueOrDefault(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===Scale.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let a,o;for(a=0,o=t.length;a<o;++a){const o=t[a];o[n]!==this.id||e&&o.type!==e||r.push(o)}return r}_resolveTickFontOptions(e){return toFont(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class TypedRegistry{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function isIChartComponent(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,a=e.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in r||(r[a]=e,function registerDefaults(e,t,n){const r=merge(Object.create(null),[n?T.get(n):{},T.get(t),e.defaults]);T.set(t,r),e.defaultRoutes&&function routeDefaults(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),a=r.pop(),o=[e].concat(r).join("."),l=t[n].split("."),s=l.pop(),c=l.join(".");T.route(o,a,c,s)}))}(t,e.defaultRoutes);e.descriptors&&T.describe(t,e.descriptors)}(e,o,n),this.override&&T.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in T[r]&&(delete T[r][n],this.override&&delete D[n])}}var H=new class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):each(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=_capitalize(e);callback(n["before"+r],[],n),t[e](n),callback(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}};class ScatterController extends DatasetController{update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:a,count:o}=_getStartAndCountOfVisiblePoints(t,n,r);if(this._drawStart=a,this._drawCount=o,_scaleRangesChanged(t)&&(a=0,o=n.length),this.options.showLine){const{dataset:a,_dataset:o}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!o._decimated,a.points=n;const l=this.resolveDatasetElementOptions(e);l.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:l},e)}this.updateElements(n,a,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=H.getElement("line")),super.addElements()}updateElements(e,t,n,r){const a="reset"===r,{iScale:o,vScale:l,_stacked:s,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(u),h=this.includeOptions(r,d),p=o.axis,g=l.axis,{spanGaps:b,segment:m}=this.options,v=isNumber(b)?b:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||a||"none"===r;let _=t>0&&this.getParsed(t-1);for(let u=t;u<t+n;++u){const t=e[u],n=this.getParsed(u),b=y?t:{},O=isNullOrUndef(n[g]),E=b[p]=o.getPixelForValue(n[p],u),x=b[g]=a||O?l.getBasePixel():l.getPixelForValue(s?this.applyStack(l,n,s):n[g],u);b.skip=isNaN(E)||isNaN(x)||O,b.stop=u>0&&Math.abs(n[p]-_[p])>v,m&&(b.parsed=n,b.raw=c.data[u]),h&&(b.options=d||this.resolveDataElementOptions(u,t.active?"active":r)),y||this.updateElement(t,u,b,r),_=n}this.updateSharedOptions(d,r,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const a=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,a,o)/2}}ScatterController.id="scatter",ScatterController.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},ScatterController.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var Z=Object.freeze({__proto__:null,BarController,BubbleController,DoughnutController,LineController,PolarAreaController,PieController,RadarController,ScatterController});function chart_abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapter{constructor(e){this.options=e||{}}init(e){}formats(){return chart_abstract()}parse(e,t){return chart_abstract()}format(e,t){return chart_abstract()}add(e,t,n){return chart_abstract()}diff(e,t,n){return chart_abstract()}startOf(e,t,n){return chart_abstract()}endOf(e,t){return chart_abstract()}}DateAdapter.override=function(e){Object.assign(DateAdapter.prototype,e)};var V={_date:DateAdapter};function binarySearch(e,t,n,r){const{controller:a,data:o,_sorted:l}=e,s=a._cachedMeta.iScale;if(s&&t===s.axis&&"r"!==t&&l&&o.length){const e=s._reversePixels?_rlookupByKey:_lookupByKey;if(!r)return e(o,t,n);if(a._sharedOptions){const r=o[0],a="function"==typeof r.getRange&&r.getRange(t);if(a){const r=e(o,t,n-a),l=e(o,t,n+a);return{lo:r.lo,hi:l.hi}}}}return{lo:0,hi:o.length-1}}function evaluateInteractionItems(e,t,n,r,a){const o=e.getSortedVisibleDatasetMetas(),l=n[t];for(let e=0,n=o.length;e<n;++e){const{index:n,data:s}=o[e],{lo:c,hi:u}=binarySearch(o[e],t,l,a);for(let e=c;e<=u;++e){const t=s[e];t.skip||r(t,n,e)}}}function getIntersectItems(e,t,n,r,a){const o=[];if(!a&&!e.isPointInArea(t))return o;return evaluateInteractionItems(e,n,t,(function(n,l,s){(a||_isPointInArea(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&o.push({element:n,datasetIndex:l,index:s})}),!0),o}function getNearestCartesianItems(e,t,n,r,a,o){let l=[];const s=function getDistanceMetricForAxis(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const a=t?Math.abs(e.x-r.x):0,o=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}(n);let c=Number.POSITIVE_INFINITY;return evaluateInteractionItems(e,n,t,(function evaluationFunc(n,u,d){const h=n.inRange(t.x,t.y,a);if(r&&!h)return;const p=n.getCenterPoint(a);if(!(!!o||e.isPointInArea(p))&&!h)return;const g=s(t,p);g<c?(l=[{element:n,datasetIndex:u,index:d}],c=g):g===c&&l.push({element:n,datasetIndex:u,index:d})})),l}function getNearestItems(e,t,n,r,a,o){return o||e.isPointInArea(t)?"r"!==n||r?getNearestCartesianItems(e,t,n,r,a,o):function getNearestRadialItems(e,t,n,r){let a=[];return evaluateInteractionItems(e,n,t,(function evaluationFunc(e,n,o){const{startAngle:l,endAngle:s}=e.getProps(["startAngle","endAngle"],r),{angle:c}=getAngleFromPoint(e,{x:t.x,y:t.y});_angleBetween(c,l,s)&&a.push({element:e,datasetIndex:n,index:o})})),a}(e,t,n,a):[]}function getAxisItems(e,t,n,r,a){const o=[],l="x"===n?"inXRange":"inYRange";let s=!1;return evaluateInteractionItems(e,n,t,((e,r,c)=>{e[l](t[n],a)&&(o.push({element:e,datasetIndex:r,index:c}),s=s||e.inRange(t.x,t.y,a))})),r&&!s?[]:o}var K={evaluateInteractionItems,modes:{index(e,t,n,r){const a=getRelativePosition(t,e),o=n.axis||"x",l=n.includeInvisible||!1,s=n.intersect?getIntersectItems(e,a,o,r,l):getNearestItems(e,a,o,!1,r,l),c=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=s[0].index,n=e.data[t];n&&!n.skip&&c.push({element:n,datasetIndex:e.index,index:t})})),c):[]},dataset(e,t,n,r){const a=getRelativePosition(t,e),o=n.axis||"xy",l=n.includeInvisible||!1;let s=n.intersect?getIntersectItems(e,a,o,r,l):getNearestItems(e,a,o,!1,r,l);if(s.length>0){const t=s[0].datasetIndex,n=e.getDatasetMeta(t).data;s=[];for(let e=0;e<n.length;++e)s.push({element:n[e],datasetIndex:t,index:e})}return s},point:(e,t,n,r)=>getIntersectItems(e,getRelativePosition(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const a=getRelativePosition(t,e),o=n.axis||"xy",l=n.includeInvisible||!1;return getNearestItems(e,a,o,n.intersect,r,l)},x:(e,t,n,r)=>getAxisItems(e,getRelativePosition(t,e),"x",n.intersect,r),y:(e,t,n,r)=>getAxisItems(e,getRelativePosition(t,e),"y",n.intersect,r)}};const Y=["left","top","right","bottom"];function filterByPosition(e,t){return e.filter((e=>e.pos===t))}function filterDynamicPositionByAxis(e,t){return e.filter((e=>-1===Y.indexOf(e.pos)&&e.box.axis===t))}function sortByWeight(e,t){return e.sort(((e,n)=>{const r=t?n:e,a=t?e:n;return r.weight===a.weight?r.index-a.index:r.weight-a.weight}))}function setLayoutDims(e,t){const n=function buildStacks(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:a}=n;if(!e||!Y.includes(r))continue;const o=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:a}=t;let o,l,s;for(o=0,l=e.length;o<l;++o){s=e[o];const{fullSize:l}=s.box,c=n[s.stack],u=c&&s.stackWeight/c.weight;s.horizontal?(s.width=u?u*r:l&&t.availableWidth,s.height=a):(s.width=r,s.height=u?u*a:l&&t.availableHeight)}return n}function getCombinedMax(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function updateMaxPadding(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function updateDims(e,t,n,r){const{pos:a,box:o}=n,l=e.maxPadding;if(!isObject(a)){n.size&&(e[a]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?o.height:o.width),n.size=t.size/t.count,e[a]+=n.size}o.getPadding&&updateMaxPadding(l,o.getPadding());const s=Math.max(0,t.outerWidth-getCombinedMax(l,e,"left","right")),c=Math.max(0,t.outerHeight-getCombinedMax(l,e,"top","bottom")),u=s!==e.w,d=c!==e.h;return e.w=s,e.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function getMargins(e,t){const n=t.maxPadding;function marginForPositions(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return marginForPositions(e?["left","right"]:["top","bottom"])}function fitBoxes(e,t,n,r){const a=[];let o,l,s,c,u,d;for(o=0,l=e.length,u=0;o<l;++o){s=e[o],c=s.box,c.update(s.width||t.w,s.height||t.h,getMargins(s.horizontal,t));const{same:l,other:h}=updateDims(t,n,s,r);u|=l&&a.length,d=d||h,c.fullSize||a.push(s)}return u&&fitBoxes(a,t,n,r)||d}function setBoxDims(e,t,n,r,a){e.top=n,e.left=t,e.right=t+r,e.bottom=n+a,e.width=r,e.height=a}function placeBoxes(e,t,n,r){const a=n.padding;let{x:o,y:l}=t;for(const s of e){const e=s.box,c=r[s.stack]||{count:1,placed:0,weight:1},u=s.stackWeight/c.weight||1;if(s.horizontal){const r=t.w*u,o=c.size||e.height;defined(c.start)&&(l=c.start),e.fullSize?setBoxDims(e,a.left,l,n.outerWidth-a.right-a.left,o):setBoxDims(e,t.left+c.placed,l,r,o),c.start=l,c.placed+=r,l=e.bottom}else{const r=t.h*u,l=c.size||e.width;defined(c.start)&&(o=c.start),e.fullSize?setBoxDims(e,o,a.top,l,n.outerHeight-a.bottom-a.top):setBoxDims(e,o,t.top+c.placed,l,r),c.start=o,c.placed+=r,o=e.right}}t.x=o,t.y=l}T.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var G={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const a=toPadding(e.options.layout.padding),o=Math.max(t-a.width,0),l=Math.max(n-a.height,0),s=function buildLayoutBoxes(e){const t=function wrapBoxes(e){const t=[];let n,r,a,o,l,s;for(n=0,r=(e||[]).length;n<r;++n)a=e[n],({position:o,options:{stack:l,stackWeight:s=1}}=a),t.push({index:n,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:l&&o+l,stackWeight:s});return t}(e),n=sortByWeight(t.filter((e=>e.box.fullSize)),!0),r=sortByWeight(filterByPosition(t,"left"),!0),a=sortByWeight(filterByPosition(t,"right")),o=sortByWeight(filterByPosition(t,"top"),!0),l=sortByWeight(filterByPosition(t,"bottom")),s=filterDynamicPositionByAxis(t,"x"),c=filterDynamicPositionByAxis(t,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:a.concat(c).concat(l).concat(s),chartArea:filterByPosition(t,"chartArea"),vertical:r.concat(a).concat(c),horizontal:o.concat(l).concat(s)}}(e.boxes),c=s.vertical,u=s.horizontal;each(e.boxes,(e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()}));const d=c.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:a,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/d,hBoxMaxHeight:l/2}),p=Object.assign({},a);updateMaxPadding(p,toPadding(r));const g=Object.assign({maxPadding:p,w:o,h:l,x:a.left,y:a.top},a),b=setLayoutDims(c.concat(u),h);fitBoxes(s.fullSize,g,h,b),fitBoxes(c,g,h,b),fitBoxes(u,g,h,b)&&fitBoxes(c,g,h,b),function handleMaxPadding(e){const t=e.maxPadding;function updatePos(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=updatePos("top"),e.x+=updatePos("left"),updatePos("right"),updatePos("bottom")}(g),placeBoxes(s.leftAndTop,g,h,b),g.x+=g.w,g.y+=g.h,placeBoxes(s.rightAndBottom,g,h,b),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},each(s.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})}))}};class BasePlatform{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class BasicPlatform extends BasePlatform{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const U={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=e=>null===e||""===e;const X=!!z&&{passive:!0};function removeListener(e,t,n){e.canvas.removeEventListener(t,n,X)}function nodeListContains(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function createAttachObserver(e,t,n){const r=e.canvas,a=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||nodeListContains(n.addedNodes,r),t=t&&!nodeListContains(n.removedNodes,r);t&&n()}));return a.observe(document,{childList:!0,subtree:!0}),a}function createDetachObserver(e,t,n){const r=e.canvas,a=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||nodeListContains(n.removedNodes,r),t=t&&!nodeListContains(n.addedNodes,r);t&&n()}));return a.observe(document,{childList:!0,subtree:!0}),a}const Q=new Map;let J=0;function onWindowResize(){const e=window.devicePixelRatio;e!==J&&(J=e,Q.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function createResizeObserver(e,t,n){const r=e.canvas,a=r&&_getParentNode(r);if(!a)return;const o=throttled(((e,t)=>{const r=a.clientWidth;n(e,t),r<a.clientWidth&&n()}),window),l=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||o(n,r)}));return l.observe(a),function listenDevicePixelRatioChanges(e,t){Q.size||window.addEventListener("resize",onWindowResize),Q.set(e,t)}(e,o),l}function releaseObserver(e,t,n){n&&n.disconnect(),"resize"===t&&function unlistenDevicePixelRatioChanges(e){Q.delete(e),Q.size||window.removeEventListener("resize",onWindowResize)}(e)}function createProxyAndListen(e,t,n){const r=e.canvas,a=throttled((t=>{null!==e.ctx&&n(function fromNativeEvent(e,t){const n=U[e.type]||e.type,{x:r,y:a}=getRelativePosition(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==a?a:null}}(t,e))}),e,(e=>{const t=e[0];return[t,t.offsetX,t.offsetY]}));return function addListener(e,t,n){e.addEventListener(t,n,X)}(r,t,a),a}class DomPlatform extends BasePlatform{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function initCanvas(e,t){const n=e.style,r=e.getAttribute("height"),a=e.getAttribute("width");if(e.$chartjs={initial:{height:r,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",isNullOrEmpty(a)){const t=readUsedSize(e,"width");void 0!==t&&(e.width=t)}if(isNullOrEmpty(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=readUsedSize(e,"height");void 0!==t&&(e.height=t)}return e}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t.$chartjs)return!1;const n=t.$chartjs.initial;["height","width"].forEach((e=>{const r=n[e];isNullOrUndef(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t.$chartjs,!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),a={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[t]||createProxyAndListen;r[t]=a(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[t]||removeListener)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return getMaximumSize(e,t,n,r)}isAttached(e){const t=_getParentNode(e);return!(!t||!t.isConnected)}}class PluginService{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(a,e,t,n);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,n,r){r=r||{};for(const a of e){const e=a.plugin;if(!1===callback(e[n],[t,r,a.options],e)&&r.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=valueOrDefault(n.options&&n.options.plugins,{}),a=function allPlugins(e){const t={},n=[],r=Object.keys(H.plugins.items);for(let e=0;e<r.length;e++)n.push(H.getPlugin(r[e]));const a=e.plugins||[];for(let e=0;e<a.length;e++){const r=a[e];-1===n.indexOf(r)&&(n.push(r),t[r.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function createDescriptors(e,{plugins:t,localIds:n},r,a){const o=[],l=e.getContext();for(const s of t){const t=s.id,c=getOpts(r[t],a);null!==c&&o.push({plugin:s,options:pluginOpts(e.config,{plugin:s,local:n[t]},c,l)})}return o}(e,a,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,diff=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(diff(t,n),e,"stop"),this._notify(diff(n,t),e,"start")}}function getOpts(e,t){return t||!1!==e?!0===e?{}:e:null}function pluginOpts(e,{plugin:t,local:n},r,a){const o=e.pluginScopeKeys(t),l=e.getOptionScopes(r,o);return n&&t.defaults&&l.push(t.defaults),e.createResolver(l,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(e,t){const n=T.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function determineAxis(e,t){return"x"===e||"y"===e?e:t.axis||function axisFromPosition(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}(t.position)||e.charAt(0).toLowerCase()}function initOptions(e){const t=e.options||(e.options={});t.plugins=valueOrDefault(t.plugins,{}),t.scales=function mergeScaleConfig(e,t){const n=D[e.type]||{scales:{}},r=t.scales||{},a=getIndexAxis(e.type,t),o=Object.create(null),l=Object.create(null);return Object.keys(r).forEach((e=>{const t=r[e];if(!isObject(t))return console.error(`Invalid scale configuration for scale: ${e}`);if(t._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const s=determineAxis(e,t),c=function getDefaultScaleIDFromAxis(e,t){return e===t?"_index_":"_value_"}(s,a),u=n.scales||{};o[s]=o[s]||e,l[e]=mergeIf(Object.create(null),[{axis:s},t,u[s],u[c]])})),e.data.datasets.forEach((n=>{const a=n.type||e.type,s=n.indexAxis||getIndexAxis(a,t),c=(D[a]||{}).scales||{};Object.keys(c).forEach((e=>{const t=function getAxisFromDefaultScaleID(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,s),a=n[t+"AxisID"]||o[t]||t;l[a]=l[a]||Object.create(null),mergeIf(l[a],[{axis:t},r[a],c[e]])}))})),Object.keys(l).forEach((e=>{const t=l[e];mergeIf(t,[T.scales[t.type],T.scale])})),l}(e,t)}function initData(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const ee=new Map,te=new Set;function cachedKeys(e,t){let n=ee.get(e);return n||(n=t(),ee.set(e,n),te.add(n)),n}const addIfFound=(e,t,n)=>{const r=resolveObjectKey(t,n);void 0!==r&&e.add(r)};class Config{constructor(e){this._config=function initConfig(e){return(e=e||{}).data=initData(e.data),initOptions(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=initData(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),initOptions(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return cachedKeys(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return cachedKeys(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return cachedKeys(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return cachedKeys(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:a}=this,o=this._cachedScopes(e,n),l=o.get(t);if(l)return l;const s=new Set;t.forEach((t=>{e&&(s.add(e),t.forEach((t=>addIfFound(s,e,t)))),t.forEach((e=>addIfFound(s,r,e))),t.forEach((e=>addIfFound(s,D[a]||{},e))),t.forEach((e=>addIfFound(s,T,e))),t.forEach((e=>addIfFound(s,P,e)))}));const c=Array.from(s);return 0===c.length&&c.push(Object.create(null)),te.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,D[t]||{},T.datasets[t]||{},{type:t},T,P]}resolveNamedOptions(e,t,n,r=[""]){const a={$shared:!0},{resolver:o,subPrefixes:l}=getResolver(this._resolverCache,e,r);let s=o;if(function needContext(e,t){const{isScriptable:n,isIndexable:r}=_descriptors(e);for(const a of t){const t=n(a),o=r(a),l=(o||t)&&e[a];if(t&&(isFunction(l)||hasFunction(l))||o&&isArray(l))return!0}return!1}(o,t)){a.$shared=!1;s=_attachContext(o,n=isFunction(n)?n():n,this.createResolver(e,n,l))}for(const e of t)a[e]=s[e];return a}createResolver(e,t,n=[""],r){const{resolver:a}=getResolver(this._resolverCache,e,n);return isObject(t)?_attachContext(a,t,void 0,r):a}}function getResolver(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const a=n.join();let o=r.get(a);if(!o){o={resolver:_createResolver(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(a,o)}return o}const hasFunction=e=>isObject(e)&&Object.getOwnPropertyNames(e).reduce(((t,n)=>t||isFunction(e[n])),!1);const ne=["top","bottom","left","right","chartArea"];function positionIsHorizontal(e,t){return"top"===e||"bottom"===e||-1===ne.indexOf(e)&&"x"===t}function compare2Level(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function onAnimationsComplete(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),callback(n&&n.onComplete,[e],t)}function onAnimationProgress(e){const t=e.chart,n=t.options.animation;callback(n&&n.onProgress,[e],t)}function getCanvas(e){return _isDomSupported()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const re={},getChart=e=>{const t=getCanvas(e);return Object.values(re).filter((e=>e.canvas===t)).pop()};function moveNumericKeys(e,t,n){const r=Object.keys(e);for(const a of r){const r=+a;if(r>=t){const o=e[a];delete e[a],(n>0||r>t)&&(e[r+n]=o)}}}class Chart{constructor(e,t){const n=this.config=new Config(t),a=getCanvas(e),o=getChart(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function _detectPlatform(e){return!_isDomSupported()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?BasicPlatform:DomPlatform}(a)),this.platform.updateConfig(n);const s=this.platform.acquireContext(a,l.aspectRatio),c=s&&s.canvas,u=c&&c.height,d=c&&c.width;this.id=r(),this.ctx=s,this.canvas=c,this.width=d,this.height=u,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function debounce(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),l.resizeDelay||0),this._dataChanges=[],re[this.id]=this,s&&c?(N.listen(this,"complete",onAnimationsComplete),N.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:a}=this;return isNullOrUndef(e)?t&&a?a:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return N.stop(this),this}resize(e,t){N.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,a),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,retinaScale(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),callback(n.onResize,[this,o],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){each(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let a=[];t&&(a=a.concat(Object.keys(t).map((e=>{const n=t[e],r=determineAxis(e,n),a="r"===r,o="x"===r;return{options:n,dposition:a?"chartArea":o?"bottom":"left",dtype:a?"radialLinear":o?"category":"linear"}})))),each(a,(t=>{const a=t.options,o=a.id,l=determineAxis(o,a),s=valueOrDefault(a.type,t.dtype);void 0!==a.position&&positionIsHorizontal(a.position,l)===positionIsHorizontal(t.dposition)||(a.position=t.dposition),r[o]=!0;let c=null;if(o in n&&n[o].type===s)c=n[o];else{c=new(H.getScale(s))({id:o,type:s,ctx:this.ctx,chart:this}),n[c.id]=c}c.init(a,e)})),each(r,((e,t)=>{e||delete n[t]})),each(n,(e=>{G.configure(this,e,e.options),G.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let a=this.getDatasetMeta(n);const o=r.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=o,a.indexAxis=r.indexAxis||getIndexAxis(o,this.options),a.order=r.order||0,a.index=n,a.label=""+r.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const t=H.getController(o),{datasetElementType:r,dataElementType:l}=T.datasets[o];Object.assign(t.prototype,{dataElementType:H.getElement(l),datasetElementType:r&&H.getElement(r)}),a.controller=new t(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){each(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let e=0,t=this.data.datasets.length;e<t;e++){const{controller:t}=this.getDatasetMeta(e),n=!r&&-1===a.indexOf(t);t.buildOrUpdateElements(n),o=Math.max(+t.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||each(a,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(compare2Level("z","_idx"));const{_active:l,_lastEvent:s}=this;s?this._eventHandler(s,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){each(this.scales,(e=>{G.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);setsEqual(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:a}of t){moveNumericKeys(e,r,"_removeElements"===n?-a:a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,makeSet=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),n=makeSet(0);for(let e=1;e<t;e++)if(!setsEqual(n,makeSet(e)))return;return Array.from(n).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;G.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],each(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,isFunction(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(N.has(this)?this.attached&&!N.running(this)&&N.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,a;for(r=0,a=t.length;r<a;++r){const a=t[r];e&&!a.visible||n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,a=this.chartArea,o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&clipArea(t,{left:!1===n.left?0:a.left-n.left,right:!1===n.right?this.width:a.right+n.right,top:!1===n.top?0:a.top-n.top,bottom:!1===n.bottom?this.height:a.bottom+n.bottom}),e.controller.draw(),r&&unclipArea(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return _isPointInArea(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const a=K.modes[t];return"function"==typeof a?a(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"==typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",a=this.getDatasetMeta(e),o=a.controller._resolveAnimations(void 0,r);defined(t)?(a.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(a,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),N.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),clearCanvas(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete re[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,_add=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},listener=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};each(this.options.events,(e=>_add(e,listener)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,_add=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},_remove=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},listener=(e,t)=>{this.canvas&&this.resize(e,t)};let n;const attached=()=>{_remove("attach",attached),this.attached=!0,this.resize(),_add("resize",listener),_add("detach",n)};n=()=>{this.attached=!1,_remove("resize",listener),this._stop(),this._resize(0,0),_add("attach",attached)},t.isAttached(this.canvas)?attached():n()}unbindEvents(){each(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},each(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let a,o,l,s;for("dataset"===t&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),l=0,s=e.length;l<s;++l){o=e[l];const t=o&&this.getDatasetMeta(o.datasetIndex).controller;t&&t[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((({datasetIndex:e,index:t})=>{const n=this.getDatasetMeta(e);if(!n)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:n.data[t],index:t}}));!_elementsEqual(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}_updateHoverStyles(e,t,n){const r=this.options.hover,diff=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),a=diff(t,e),o=n?e:diff(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},eventFilter=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,eventFilter))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,eventFilter),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:a}=this,o=t,l=this._getActiveElements(e,r,n,o),s=function _isClickEvent(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),c=function determineLastEvent(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,s);n&&(this._lastEvent=null,callback(a.onHover,[e,l,this],this),s&&callback(a.onClick,[e,l,this],this));const u=!_elementsEqual(l,r);return(u||t)&&(this._active=l,this._updateHoverStyles(l,r,t)),this._lastEvent=c,u}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}}const invalidatePlugins=()=>each(Chart.instances,(e=>e._plugins.invalidate())),ae=!0;function clipArc(e,t,n){const{startAngle:r,pixelMargin:a,x:o,y:l,outerRadius:s,innerRadius:c}=t;let u=a/s;e.beginPath(),e.arc(o,l,s,r-u,n+u),c>a?(u=a/c,e.arc(o,l,c,n+u,r-u,!0)):e.arc(o,l,a,n+d,r-d),e.closePath(),e.clip()}function parseBorderRadius$1(e,t,n,r){const a=function toRadiusCorners(e){return _readValueToProps(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),o=(n-t)/2,l=Math.min(o,r*t/2),computeOuterLimit=e=>{const t=(n-Math.min(o,e))*r/2;return _limitValue(e,0,Math.min(o,t))};return{outerStart:computeOuterLimit(a.outerStart),outerEnd:computeOuterLimit(a.outerEnd),innerStart:_limitValue(a.innerStart,0,l),innerEnd:_limitValue(a.innerEnd,0,l)}}function rThetaToXY(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function pathArc(e,t,n,r,a,l){const{x:s,y:c,startAngle:u,pixelMargin:h,innerRadius:p}=t,g=Math.max(t.outerRadius+r+n-h,0),b=p>0?p+r+n+h:0;let m=0;const v=a-u;if(r){const e=((p>0?p-r:0)+(g>0?g-r:0))/2;m=(v-(0!==e?v*e/(e+r):v))/2}const y=(v-Math.max(.001,v*g-n/o)/g)/2,_=u+y+m,O=a-y-m,{outerStart:E,outerEnd:x,innerStart:S,innerEnd:w}=parseBorderRadius$1(t,b,g,O-_),C=g-E,D=g-x,P=_+E/C,T=O-x/D,k=b+S,I=b+w,j=_+S/k,M=O-w/I;if(e.beginPath(),l){if(e.arc(s,c,g,P,T),x>0){const t=rThetaToXY(D,T,s,c);e.arc(t.x,t.y,x,T,O+d)}const t=rThetaToXY(I,O,s,c);if(e.lineTo(t.x,t.y),w>0){const t=rThetaToXY(I,M,s,c);e.arc(t.x,t.y,w,O+d,M+Math.PI)}if(e.arc(s,c,b,O-w/b,_+S/b,!0),S>0){const t=rThetaToXY(k,j,s,c);e.arc(t.x,t.y,S,j+Math.PI,_-d)}const n=rThetaToXY(C,_,s,c);if(e.lineTo(n.x,n.y),E>0){const t=rThetaToXY(C,P,s,c);e.arc(t.x,t.y,E,_-d,P)}}else{e.moveTo(s,c);const t=Math.cos(P)*g+s,n=Math.sin(P)*g+c;e.lineTo(t,n);const r=Math.cos(T)*g+s,a=Math.sin(T)*g+c;e.lineTo(r,a)}e.closePath()}function drawBorder(e,t,n,r,a,o){const{options:s}=t,{borderWidth:c,borderJoinStyle:u}=s,d="inner"===s.borderAlign;c&&(d?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel"),t.fullCircles&&function drawFullCircleBorders(e,t,n){const{x:r,y:a,startAngle:o,pixelMargin:s,fullCircles:c}=t,u=Math.max(t.outerRadius-s,0),d=t.innerRadius+s;let h;for(n&&clipArc(e,t,o+l),e.beginPath(),e.arc(r,a,d,o+l,o,!0),h=0;h<c;++h)e.stroke();for(e.beginPath(),e.arc(r,a,u,o,o+l),h=0;h<c;++h)e.stroke()}(e,t,d),d&&clipArc(e,t,a),pathArc(e,t,n,r,a,o),e.stroke())}Object.defineProperties(Chart,{defaults:{enumerable:ae,value:T},instances:{enumerable:ae,value:re},overrides:{enumerable:ae,value:D},registry:{enumerable:ae,value:H},version:{enumerable:ae,value:"3.9.1"},getChart:{enumerable:ae,value:getChart},register:{enumerable:ae,value:(...e)=>{H.add(...e),invalidatePlugins()}},unregister:{enumerable:ae,value:(...e)=>{H.remove(...e),invalidatePlugins()}}});class ArcElement extends Element{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:a,distance:o}=getAngleFromPoint(r,{x:e,y:t}),{startAngle:s,endAngle:c,innerRadius:u,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),p=this.options.spacing/2,g=valueOrDefault(h,c-s)>=l||_angleBetween(a,s,c),b=_isBetween(o,u+p,d+p);return g&&b}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:s,spacing:c}=this.options,u=(r+a)/2,d=(o+l+c+s)/2;return{x:t+Math.cos(u)*d,y:n+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/2,a=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>l?Math.floor(n/l):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();let c=0;if(r){c=r/2;const t=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(t)*c,Math.sin(t)*c),this.circumference>=o&&(c=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const u=function drawArc(e,t,n,r,a){const{fullCircles:o,startAngle:s,circumference:c}=t;let u=t.endAngle;if(o){pathArc(e,t,n,r,s+l,a);for(let t=0;t<o;++t)e.fill();isNaN(c)||(u=s+c%l,c%l==0&&(u+=l))}return pathArc(e,t,n,r,u,a),e.fill(),u}(e,this,c,a,s);drawBorder(e,this,c,a,u,s),e.restore()}}function setStyle(e,t,n=t){e.lineCap=valueOrDefault(n.borderCapStyle,t.borderCapStyle),e.setLineDash(valueOrDefault(n.borderDash,t.borderDash)),e.lineDashOffset=valueOrDefault(n.borderDashOffset,t.borderDashOffset),e.lineJoin=valueOrDefault(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=valueOrDefault(n.borderWidth,t.borderWidth),e.strokeStyle=valueOrDefault(n.borderColor,t.borderColor)}function lineTo(e,t,n){e.lineTo(n.x,n.y)}function pathVars(e,t,n={}){const r=e.length,{start:a=0,end:o=r-1}=n,{start:l,end:s}=t,c=Math.max(a,l),u=Math.min(o,s),d=a<l&&o<l||a>s&&o>s;return{count:r,start:c,loop:t.loop,ilen:u<c&&!d?r+u-c:u-c}}function pathSegment(e,t,n,r){const{points:a,options:o}=t,{count:l,start:s,loop:c,ilen:u}=pathVars(a,n,r),d=function getLineMethod(e){return e.stepped?_steppedLineTo:e.tension||"monotone"===e.cubicInterpolationMode?_bezierCurveTo:lineTo}(o);let h,p,g,{move:b=!0,reverse:m}=r||{};for(h=0;h<=u;++h)p=a[(s+(m?u-h:h))%l],p.skip||(b?(e.moveTo(p.x,p.y),b=!1):d(e,g,p,m,o.stepped),g=p);return c&&(p=a[(s+(m?u:0))%l],d(e,g,p,m,o.stepped)),!!c}function fastPathSegment(e,t,n,r){const a=t.points,{count:o,start:l,ilen:s}=pathVars(a,n,r),{move:c=!0,reverse:u}=r||{};let d,h,p,g,b,m,v=0,y=0;const pointIndex=e=>(l+(u?s-e:e))%o,drawX=()=>{g!==b&&(e.lineTo(v,b),e.lineTo(v,g),e.lineTo(v,m))};for(c&&(h=a[pointIndex(0)],e.moveTo(h.x,h.y)),d=0;d<=s;++d){if(h=a[pointIndex(d)],h.skip)continue;const t=h.x,n=h.y,r=0|t;r===p?(n<g?g=n:n>b&&(b=n),v=(y*v+t)/++y):(drawX(),e.lineTo(t,n),p=r,y=0,g=b=n),m=n}drawX()}function _getSegmentMethod(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!(e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||n)?fastPathSegment:pathSegment}ArcElement.id="arc",ArcElement.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},ArcElement.defaultRoutes={backgroundColor:"backgroundColor"};const ie="function"==typeof Path2D;function draw(e,t,n,r){ie&&!t.options.segment?function strokePathWithCache(e,t,n,r){let a=t._path;a||(a=t._path=new Path2D,t.path(a,n,r)&&a.closePath()),setStyle(e,t.options),e.stroke(a)}(e,t,n,r):function strokePathDirect(e,t,n,r){const{segments:a,options:o}=t,l=_getSegmentMethod(t);for(const s of a)setStyle(e,o,s.style),e.beginPath(),l(e,t,s,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class LineElement extends Element{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function _computeSegments(e,t){const n=e.points,r=e.options.spanGaps,a=n.length;if(!a)return[];const o=!!e._loop,{start:l,end:s}=function findStartAndEnd(e,t,n,r){let a=0,o=t-1;if(n&&!r)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,n&&(o+=a);o>a&&e[o%t].skip;)o--;return o%=t,{start:a,end:o}}(n,a,o,r);return splitByStyles(e,!0===r?[{start:l,end:s,loop:o}]:function solidSegments(e,t,n,r){const a=e.length,o=[];let l,s=t,c=e[t];for(l=t+1;l<=n;++l){const n=e[l%a];n.skip||n.stop?c.skip||(r=!1,o.push({start:t%a,end:(l-1)%a,loop:r}),t=s=n.stop?l:null):(s=l,c.skip&&(t=l)),c=n}return null!==s&&o.push({start:t%a,end:s%a,loop:r}),o}(n,l,s<l?s+a:s,!!e._fullLoop&&0===l&&s===a-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],a=this.points,o=_boundSegments(this,{property:t,start:r,end:r});if(!o.length)return;const l=[],s=function _getInterpolationMethod(e){return e.stepped?_steppedInterpolation:e.tension||"monotone"===e.cubicInterpolationMode?_bezierInterpolation:_pointInLine}(n);let c,u;for(c=0,u=o.length;c<u;++c){const{start:u,end:d}=o[c],h=a[u],p=a[d];if(h===p){l.push(h);continue}const g=s(h,p,Math.abs((r-h[t])/(p[t]-h[t])),n.stepped);g[t]=e[t],l.push(g)}return 1===l.length?l[0]:l}pathSegment(e,t,n){return _getSegmentMethod(this)(e,this,t,n)}path(e,t,n){const r=this.segments,a=_getSegmentMethod(this);let o=this._loop;t=t||0,n=n||this.points.length-t;for(const l of r)o&=a(e,this,l,{start:t,end:t+n-1});return!!o}draw(e,t,n,r){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),draw(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function inRange$1(e,t,n,r){const a=e.options,{[n]:o}=e.getProps([n],r);return Math.abs(t-o)<a.radius+a.hitRadius}LineElement.id="line",LineElement.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},LineElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},LineElement.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};class PointElement extends Element{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:a,y:o}=this.getProps(["x","y"],n);return Math.pow(e-a,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return inRange$1(this,e,"x",t)}inYRange(e,t){return inRange$1(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!_isPointInArea(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,drawPoint(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function getBarBounds(e,t){const{x:n,y:r,base:a,width:o,height:l}=e.getProps(["x","y","base","width","height"],t);let s,c,u,d,h;return e.horizontal?(h=l/2,s=Math.min(n,a),c=Math.max(n,a),u=r-h,d=r+h):(h=o/2,s=n-h,c=n+h,u=Math.min(r,a),d=Math.max(r,a)),{left:s,top:u,right:c,bottom:d}}function skipOrLimit(e,t,n,r){return e?0:_limitValue(t,n,r)}function boundingRects(e){const t=getBarBounds(e),n=t.right-t.left,r=t.bottom-t.top,a=function parseBorderWidth(e,t,n){const r=e.options.borderWidth,a=e.borderSkipped,o=toTRBL(r);return{t:skipOrLimit(a.top,o.top,0,n),r:skipOrLimit(a.right,o.right,0,t),b:skipOrLimit(a.bottom,o.bottom,0,n),l:skipOrLimit(a.left,o.left,0,t)}}(e,n/2,r/2),o=function parseBorderRadius(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,o=toTRBLCorners(a),l=Math.min(t,n),s=e.borderSkipped,c=r||isObject(a);return{topLeft:skipOrLimit(!c||s.top||s.left,o.topLeft,0,l),topRight:skipOrLimit(!c||s.top||s.right,o.topRight,0,l),bottomLeft:skipOrLimit(!c||s.bottom||s.left,o.bottomLeft,0,l),bottomRight:skipOrLimit(!c||s.bottom||s.right,o.bottomRight,0,l)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:o},inner:{x:t.left+a.l,y:t.top+a.t,w:n-a.l-a.r,h:r-a.t-a.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,o.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(a.b,a.r))}}}}function inRange(e,t,n,r){const a=null===t,o=null===n,l=e&&!(a&&o)&&getBarBounds(e,r);return l&&(a||_isBetween(t,l.left,l.right))&&(o||_isBetween(n,l.top,l.bottom))}function addNormalRectPath(e,t){e.rect(t.x,t.y,t.w,t.h)}function inflateRect(e,t,n={}){const r=e.x!==n.x?-t:0,a=e.y!==n.y?-t:0,o=(e.x+e.w!==n.x+n.w?t:0)-r,l=(e.y+e.h!==n.y+n.h?t:0)-a;return{x:e.x+r,y:e.y+a,w:e.w+o,h:e.h+l,radius:e.radius}}PointElement.id="point",PointElement.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},PointElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class BarElement extends Element{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:a,outer:o}=boundingRects(this),l=function hasRadius(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}(o.radius)?addRoundedRectPath:addNormalRectPath;e.save(),o.w===a.w&&o.h===a.h||(e.beginPath(),l(e,inflateRect(o,t,a)),e.clip(),l(e,inflateRect(a,-t,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,inflateRect(a,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return inRange(this,e,t,n)}inXRange(e,t){return inRange(this,e,null,t)}inYRange(e,t){return inRange(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+r)/2:t,y:a?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}BarElement.id="bar",BarElement.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},BarElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var oe=Object.freeze({__proto__:null,ArcElement,LineElement,PointElement,BarElement});function cleanDecimatedDataset(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{value:t})}}function cleanDecimatedData(e){e.data.datasets.forEach((e=>{cleanDecimatedDataset(e)}))}var le={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void cleanDecimatedData(e);const r=e.width;e.data.datasets.forEach(((t,a)=>{const{_data:o,indexAxis:l}=t,s=e.getDatasetMeta(a),c=o||t.data;if("y"===resolve([l,e.options.indexAxis]))return;if(!s.controller.supportsDecimation)return;const u=e.scales[s.xAxisID];if("linear"!==u.type&&"time"!==u.type)return;if(e.options.parsing)return;let{start:d,count:h}=function getStartAndCountOfVisiblePointsSimplified(e,t){const n=t.length;let r,a=0;const{iScale:o}=e,{min:l,max:s,minDefined:c,maxDefined:u}=o.getUserBounds();return c&&(a=_limitValue(_lookupByKey(t,o.axis,l).lo,0,n-1)),r=u?_limitValue(_lookupByKey(t,o.axis,s).hi+1,a,n)-a:n-a,{start:a,count:r}}(s,c);if(h<=(n.threshold||4*r))return void cleanDecimatedDataset(t);let p;switch(isNullOrUndef(o)&&(t._data=c,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":p=function lttbDecimation(e,t,n,r,a){const o=a.samples||r;if(o>=n)return e.slice(t,t+n);const l=[],s=(n-2)/(o-2);let c=0;const u=t+n-1;let d,h,p,g,b,m=t;for(l[c++]=e[m],d=0;d<o-2;d++){let r,a=0,o=0;const u=Math.floor((d+1)*s)+1+t,v=Math.min(Math.floor((d+2)*s)+1,n)+t,y=v-u;for(r=u;r<v;r++)a+=e[r].x,o+=e[r].y;a/=y,o/=y;const _=Math.floor(d*s)+1+t,O=Math.min(Math.floor((d+1)*s)+1,n)+t,{x:E,y:x}=e[m];for(p=g=-1,r=_;r<O;r++)g=.5*Math.abs((E-a)*(e[r].y-x)-(E-e[r].x)*(o-x)),g>p&&(p=g,h=e[r],b=r);l[c++]=h,m=b}return l[c++]=e[u],l}(c,d,h,r,n);break;case"min-max":p=function minMaxDecimation(e,t,n,r){let a,o,l,s,c,u,d,h,p,g,b=0,m=0;const v=[],y=t+n-1,_=e[t].x,O=e[y].x-_;for(a=t;a<t+n;++a){o=e[a],l=(o.x-_)/O*r,s=o.y;const t=0|l;if(t===c)s<p?(p=s,u=a):s>g&&(g=s,d=a),b=(m*b+o.x)/++m;else{const n=a-1;if(!isNullOrUndef(u)&&!isNullOrUndef(d)){const t=Math.min(u,d),r=Math.max(u,d);t!==h&&t!==n&&v.push({...e[t],x:b}),r!==h&&r!==n&&v.push({...e[r],x:b})}a>0&&n!==h&&v.push(e[n]),v.push(o),c=t,m=0,p=g=s,u=d=h=a}}return v}(c,d,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}t._decimated=p}))},destroy(e){cleanDecimatedData(e)}};function _getBounds(e,t,n,r){if(r)return;let a=t[e],o=n[e];return"angle"===e&&(a=_normalizeAngle(a),o=_normalizeAngle(o)),{property:e,start:a,end:o}}function _findSegmentEnd(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function _getEdge(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function _createBoundaryLine(e,t){let n=[],r=!1;return isArray(e)?(r=!0,n=e):n=function _pointsFromSegments(e,t){const{x:n=null,y:r=null}=e||{},a=t.points,o=[];return t.segments.forEach((({start:e,end:t})=>{t=_findSegmentEnd(e,t,a);const l=a[e],s=a[t];null!==r?(o.push({x:l.x,y:r}),o.push({x:s.x,y:r})):null!==n&&(o.push({x:n,y:l.y}),o.push({x:n,y:s.y}))})),o}(e,t),n.length?new LineElement({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function _shouldApplyFill(e){return e&&!1!==e.fill}function _resolveTarget(e,t,n){let r=e[t].fill;const a=[t];let o;if(!n)return r;for(;!1!==r&&-1===a.indexOf(r);){if(!isNumberFinite(r))return r;if(o=e[r],!o)return!1;if(o.visible)return r;a.push(r),r=o.fill}return!1}function _decodeFill(e,t,n){const r=function parseFillOption(e){const t=e.options,n=t.fill;let r=valueOrDefault(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(isObject(r))return!isNaN(r.value)&&r;let a=parseFloat(r);return isNumberFinite(a)&&Math.floor(a)===a?function decodeTargetIndex(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,a,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function addPointsBelow(e,t,n){const r=[];for(let a=0;a<n.length;a++){const o=n[a],{first:l,last:s,point:c}=findPoint(o,t,"x");if(!(!c||l&&s))if(l)r.unshift(c);else if(e.push(c),!s)break}e.push(...r)}function findPoint(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const a=r[n],o=e.segments,l=e.points;let s=!1,c=!1;for(let e=0;e<o.length;e++){const t=o[e],r=l[t.start][n],u=l[t.end][n];if(_isBetween(a,r,u)){s=a===r,c=a===u;break}}return{first:s,last:c,point:r}}class simpleArc{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:a,radius:o}=this;return t=t||{start:0,end:l},e.arc(r,a,o,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,a=e.angle;return{x:t+Math.cos(a)*r,y:n+Math.sin(a)*r,angle:a}}}function _getTarget(e){const{chart:t,fill:n,line:r}=e;if(isNumberFinite(n))return function getLineByIndex(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}(t,n);if("stack"===n)return function _buildStackLine(e){const{scale:t,index:n,line:r}=e,a=[],o=r.segments,l=r.points,s=function getLinesBelow(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let e=0;e<r.length;e++){const a=r[e];if(a.index===t)break;a.hidden||n.unshift(a.dataset)}return n}(t,n);s.push(_createBoundaryLine({x:null,y:t.bottom},r));for(let e=0;e<o.length;e++){const t=o[e];for(let e=t.start;e<=t.end;e++)addPointsBelow(a,l[e],s)}return new LineElement({points:a,options:{}})}(e);if("shape"===n)return!0;const a=function computeBoundary(e){if((e.scale||{}).getPointPositionForValue)return function computeCircularBoundary(e){const{scale:t,fill:n}=e,r=t.options,a=t.getLabels().length,o=r.reverse?t.max:t.min,l=function _getTargetValue(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:isObject(e)?e.value:t.getBaseValue(),r}(n,t,o),s=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,o);return new simpleArc({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(l)})}for(let e=0;e<a;++e)s.push(t.getPointPositionForValue(e,l));return s}(e);return function computeLinearBoundary(e){const{scale:t={},fill:n}=e,r=function _getTargetPixel(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:isObject(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(isNumberFinite(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return a instanceof simpleArc?a:_createBoundaryLine(a,r)}function _drawfill(e,t,n){const r=_getTarget(t),{line:a,scale:o,axis:l}=t,s=a.options,c=s.fill,u=s.backgroundColor,{above:d=u,below:h=u}=c||{};r&&a.points.length&&(clipArea(e,n),function doFill(e,t){const{line:n,target:r,above:a,below:o,area:l,scale:s}=t,c=n._loop?"angle":t.axis;e.save(),"x"===c&&o!==a&&(clipVertical(e,r,l.top),fill(e,{line:n,target:r,color:a,scale:s,property:c}),e.restore(),e.save(),clipVertical(e,r,l.bottom));fill(e,{line:n,target:r,color:o,scale:s,property:c}),e.restore()}(e,{line:a,target:r,above:d,below:h,area:n,scale:o,axis:l}),unclipArea(e))}function clipVertical(e,t,n){const{segments:r,points:a}=t;let o=!0,l=!1;e.beginPath();for(const s of r){const{start:r,end:c}=s,u=a[r],d=a[_findSegmentEnd(r,c,a)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(u.x,n),e.lineTo(u.x,u.y)),l=!!t.pathSegment(e,s,{move:l}),l?e.closePath():e.lineTo(d.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function fill(e,t){const{line:n,target:r,property:a,color:o,scale:l}=t,s=function _segments(e,t,n){const r=e.segments,a=e.points,o=t.points,l=[];for(const e of r){let{start:r,end:s}=e;s=_findSegmentEnd(r,s,a);const c=_getBounds(n,a[r],a[s],e.loop);if(!t.segments){l.push({source:e,target:c,start:a[r],end:a[s]});continue}const u=_boundSegments(t,c);for(const t of u){const r=_getBounds(n,o[t.start],o[t.end],t.loop),s=_boundSegment(e,a,r);for(const e of s)l.push({source:e,target:t,start:{[n]:_getEdge(c,r,"start",Math.max)},end:{[n]:_getEdge(c,r,"end",Math.min)}})}}return l}(n,r,a);for(const{source:t,target:c,start:u,end:d}of s){const{style:{backgroundColor:s=o}={}}=t,h=!0!==r;e.save(),e.fillStyle=s,clipBounds(e,l,h&&_getBounds(a,u,d)),e.beginPath();const p=!!n.pathSegment(e,t);let g;if(h){p?e.closePath():interpolatedLineTo(e,r,d,a);const t=!!r.pathSegment(e,c,{move:p,reverse:!0});g=p&&t,g||interpolatedLineTo(e,r,u,a)}e.closePath(),e.fill(g?"evenodd":"nonzero"),e.restore()}}function clipBounds(e,t,n){const{top:r,bottom:a}=t.chart.chartArea,{property:o,start:l,end:s}=n||{};"x"===o&&(e.beginPath(),e.rect(l,r,s-l,a-r),e.clip())}function interpolatedLineTo(e,t,n,r){const a=t.interpolate(n,r);a&&e.lineTo(a.x,a.y)}var se={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,a=[];let o,l,s,c;for(l=0;l<r;++l)o=e.getDatasetMeta(l),s=o.dataset,c=null,s&&s.options&&s instanceof LineElement&&(c={visible:e.isDatasetVisible(l),index:l,fill:_decodeFill(s,l,r),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:s}),o.$filler=c,a.push(c);for(l=0;l<r;++l)c=a[l],c&&!1!==c.fill&&(c.fill=_resolveTarget(a,l,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,a=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let t=a.length-1;t>=0;--t){const n=a[t].$filler;n&&(n.line.updateControlPoints(o,n.axis),r&&n.fill&&_drawfill(e.ctx,n,o))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let t=r.length-1;t>=0;--t){const n=r[t].$filler;_shouldApplyFill(n)&&_drawfill(e.ctx,n,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;_shouldApplyFill(r)&&"beforeDatasetDraw"===n.drawTime&&_drawfill(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const getBoxSize=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class Legend extends Element{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=callback(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=toFont(n.font),a=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:s}=getBoxSize(n,a);let c,u;t.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,a,l,s)+10):(u=this.maxHeight,c=this._fitCols(o,a,l,s)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:a,maxWidth:o,options:{labels:{padding:l}}}=this,s=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+l;let d=e;a.textAlign="left",a.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach(((e,g)=>{const b=n+t/2+a.measureText(e.text).width;(0===g||c[c.length-1]+b+2*l>o)&&(d+=u,c[c.length-(g>0?0:1)]=0,p+=u,h++),s[g]={left:0,top:p,row:h,width:b,height:r},c[c.length-1]+=b+l})),d}_fitCols(e,t,n,r){const{ctx:a,maxHeight:o,options:{labels:{padding:l}}}=this,s=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=l,h=0,p=0,g=0,b=0;return this.legendItems.forEach(((e,o)=>{const m=n+t/2+a.measureText(e.text).width;o>0&&p+r+2*l>u&&(d+=h+l,c.push({width:h,height:p}),g+=h+l,b++,h=p=0),s[o]={left:g,top:p,col:b,width:m,height:r},h=Math.max(h,m),p+=r+l})),d+=h,c.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:a}}=this,o=getRtlAdapter(a,this.left,this.width);if(this.isHorizontal()){let a=0,l=_alignStartEnd(n,this.left+r,this.right-this.lineWidths[a]);for(const s of t)a!==s.row&&(a=s.row,l=_alignStartEnd(n,this.left+r,this.right-this.lineWidths[a])),s.top+=this.top+e+r,s.left=o.leftForLtr(o.x(l),s.width),l+=s.width+r}else{let a=0,l=_alignStartEnd(n,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const s of t)s.col!==a&&(a=s.col,l=_alignStartEnd(n,this.top+e+r,this.bottom-this.columnSizes[a].height)),s.top=l,s.left+=this.left+r,s.left=o.leftForLtr(o.x(s.left),s.width),l+=s.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;clipArea(e,this),this._draw(),unclipArea(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:a,labels:o}=e,l=T.color,s=getRtlAdapter(e.rtl,this.left,this.width),c=toFont(o.font),{color:u,padding:d}=o,h=c.size,p=h/2;let g;this.drawTitle(),r.textAlign=s.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:b,boxHeight:m,itemHeight:v}=getBoxSize(o,h),y=this.isHorizontal(),_=this._computeTitleHeight();g=y?{x:_alignStartEnd(a,this.left+d,this.right-n[0]),y:this.top+d+_,line:0}:{x:this.left+d,y:_alignStartEnd(a,this.top+_+d,this.bottom-t[0].height),line:0},overrideTextDirection(this.ctx,e.textDirection);const O=v+d;this.legendItems.forEach(((E,x)=>{r.strokeStyle=E.fontColor||u,r.fillStyle=E.fontColor||u;const S=r.measureText(E.text).width,w=s.textAlign(E.textAlign||(E.textAlign=o.textAlign)),C=b+p+S;let D=g.x,P=g.y;s.setWidth(this.width),y?x>0&&D+C+d>this.right&&(P=g.y+=O,g.line++,D=g.x=_alignStartEnd(a,this.left+d,this.right-n[g.line])):x>0&&P+O>this.bottom&&(D=g.x=D+t[g.line].width+d,g.line++,P=g.y=_alignStartEnd(a,this.top+_+d,this.bottom-t[g.line].height));!function(e,t,n){if(isNaN(b)||b<=0||isNaN(m)||m<0)return;r.save();const a=valueOrDefault(n.lineWidth,1);if(r.fillStyle=valueOrDefault(n.fillStyle,l),r.lineCap=valueOrDefault(n.lineCap,"butt"),r.lineDashOffset=valueOrDefault(n.lineDashOffset,0),r.lineJoin=valueOrDefault(n.lineJoin,"miter"),r.lineWidth=a,r.strokeStyle=valueOrDefault(n.strokeStyle,l),r.setLineDash(valueOrDefault(n.lineDash,[])),o.usePointStyle){const l={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:a},c=s.xPlus(e,b/2);drawPointLegend(r,l,c,t+p,o.pointStyleWidth&&b)}else{const o=t+Math.max((h-m)/2,0),l=s.leftForLtr(e,b),c=toTRBLCorners(n.borderRadius);r.beginPath(),Object.values(c).some((e=>0!==e))?addRoundedRectPath(r,{x:l,y:o,w:b,h:m,radius:c}):r.rect(l,o,b,m),r.fill(),0!==a&&r.stroke()}r.restore()}(s.x(D),P,E),D=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(w,D+b+p,y?D+C:this.right,e.rtl),function(e,t,n){renderText(r,n.text,e,t+v/2,c,{strikethrough:n.hidden,textAlign:s.textAlign(n.textAlign)})}(s.x(D),P,E),y?g.x+=C+d:g.y+=O})),restoreTextDirection(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=toFont(t.font),r=toPadding(t.padding);if(!t.display)return;const a=getRtlAdapter(e.rtl,this.left,this.width),o=this.ctx,l=t.position,s=n.size/2,c=r.top+s;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=_alignStartEnd(e.align,d,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);u=c+_alignStartEnd(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const p=_alignStartEnd(l,d,d+h);o.textAlign=a.textAlign(_toLeftRightCenter(l)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,renderText(o,t.text,p,u,n)}_computeTitleHeight(){const e=this.options.title,t=toFont(e.font),n=toPadding(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,a;if(_isBetween(e,this.left,this.right)&&_isBetween(t,this.top,this.bottom))for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(r=a[n],_isBetween(e,r.left,r.left+r.width)&&_isBetween(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function isListened(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const o=this._hoveredItem,l=(a=n,null!==(r=o)&&null!==a&&r.datasetIndex===a.datasetIndex&&r.index===a.index);o&&!l&&callback(t.onLeave,[e,o,this],this),this._hoveredItem=n,n&&!l&&callback(t.onHover,[e,n,this],this)}else n&&callback(t.onClick,[e,n,this],this);var r,a}}var ce={id:"legend",_element:Legend,start(e,t,n){const r=e.legend=new Legend({ctx:e.ctx,options:n,chart:e});G.configure(e,r,n),G.addBox(e,r)},stop(e){G.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;G.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,a=n.chart;a.isDatasetVisible(r)?(a.hide(r),t.hidden=!0):(a.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:a,color:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),s=toPadding(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(s.width+s.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:a||l.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Title extends Element{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=isArray(n.text)?n.text.length:1;this._padding=toPadding(n.padding);const a=r*toFont(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:a,options:l}=this,s=l.align;let c,u,d,h=0;return this.isHorizontal()?(u=_alignStartEnd(s,n,a),d=t+e,c=a-n):("left"===l.position?(u=n+e,d=_alignStartEnd(s,r,t),h=-.5*o):(u=a-e,d=_alignStartEnd(s,t,r),h=.5*o),c=r-t),{titleX:u,titleY:d,maxWidth:c,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=toFont(t.font),r=n.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:s}=this._drawArgs(r);renderText(e,t.text,0,0,n,{color:t.color,maxWidth:l,rotation:s,textAlign:_toLeftRightCenter(t.align),textBaseline:"middle",translation:[a,o]})}}var ue={id:"title",_element:Title,start(e,t,n){!function createTitle(e,t){const n=new Title({ctx:e.ctx,options:t,chart:e});G.configure(e,n,t),G.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;G.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;G.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const de=new WeakMap;var he={id:"subtitle",start(e,t,n){const r=new Title({ctx:e.ctx,options:n,chart:e});G.configure(e,r,n),G.addBox(e,r),de.set(e,r)},stop(e){G.removeBox(e,de.get(e)),de.delete(e)},beforeUpdate(e,t,n){const r=de.get(e);G.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const pe={average(e){if(!e.length)return!1;let t,n,r=0,a=0,o=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r+=e.x,a+=e.y,++o}}return{x:r/o,y:a/o}},nearest(e,t){if(!e.length)return!1;let n,r,a,o=t.x,l=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=distanceBetweenPoints(t,r.getCenterPoint());e<s&&(s=e,a=r)}}if(a){const e=a.tooltipPosition();o=e.x,l=e.y}return{x:o,y:l}}};function pushOrConcat(e,t){return t&&(isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function splitNewlines(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function createTooltipItem(e,t){const{element:n,datasetIndex:r,index:a}=t,o=e.getDatasetMeta(r).controller,{label:l,value:s}=o.getLabelAndValue(a);return{chart:e,label:l,parsed:o.getParsed(a),raw:e.data.datasets[r].data[a],formattedValue:s,dataset:o.getDataset(),dataIndex:a,datasetIndex:r,element:n}}function getTooltipSize(e,t){const n=e.chart.ctx,{body:r,footer:a,title:o}=e,{boxWidth:l,boxHeight:s}=t,c=toFont(t.bodyFont),u=toFont(t.titleFont),d=toFont(t.footerFont),h=o.length,p=a.length,g=r.length,b=toPadding(t.padding);let m=b.height,v=0,y=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(m+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){m+=g*(t.displayColors?Math.max(s,c.lineHeight):c.lineHeight)+(y-g)*c.lineHeight+(y-1)*t.bodySpacing}p&&(m+=t.footerMarginTop+p*d.lineHeight+(p-1)*t.footerSpacing);let _=0;const maxLineWidth=function(e){v=Math.max(v,n.measureText(e).width+_)};return n.save(),n.font=u.string,each(e.title,maxLineWidth),n.font=c.string,each(e.beforeBody.concat(e.afterBody),maxLineWidth),_=t.displayColors?l+2+t.boxPadding:0,each(r,(e=>{each(e.before,maxLineWidth),each(e.lines,maxLineWidth),each(e.after,maxLineWidth)})),_=0,n.font=d.string,each(e.footer,maxLineWidth),n.restore(),v+=b.width,{width:v,height:m}}function determineXAlign(e,t,n,r){const{x:a,width:o}=n,{width:l,chartArea:{left:s,right:c}}=e;let u="center";return"center"===r?u=a<=(s+c)/2?"left":"right":a<=o/2?u="left":a>=l-o/2&&(u="right"),function doesNotFitWithAlign(e,t,n,r){const{x:a,width:o}=r,l=n.caretSize+n.caretPadding;return"left"===e&&a+o+l>t.width||"right"===e&&a-o-l<0||void 0}(u,e,t,n)&&(u="center"),u}function determineAlignment(e,t,n){const r=n.yAlign||t.yAlign||function determineYAlign(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||determineXAlign(e,t,n,r),yAlign:r}}function getBackgroundPoint(e,t,n,r){const{caretSize:a,caretPadding:o,cornerRadius:l}=e,{xAlign:s,yAlign:c}=n,u=a+o,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:g}=toTRBLCorners(l);let b=function alignX(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,s);const m=function alignY(e,t,n){let{y:r,height:a}=e;return"top"===t?r+=n:r-="bottom"===t?a+n:a/2,r}(t,c,u);return"center"===c?"left"===s?b+=u:"right"===s&&(b-=u):"left"===s?b-=Math.max(d,p)+a:"right"===s&&(b+=Math.max(h,g)+a),{x:_limitValue(b,0,r.width-t.width),y:_limitValue(m,0,r.height-t.height)}}function getAlignedX(e,t,n){const r=toPadding(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function getBeforeAfterBodyLines(e){return pushOrConcat([],splitNewlines(e))}function overrideCallbacks(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}class Tooltip extends Element{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,a=new Animations(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=function createTooltipContext(e,t,n){return createContext(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:n}=t,r=n.beforeTitle.apply(this,[e]),a=n.title.apply(this,[e]),o=n.afterTitle.apply(this,[e]);let l=[];return l=pushOrConcat(l,splitNewlines(r)),l=pushOrConcat(l,splitNewlines(a)),l=pushOrConcat(l,splitNewlines(o)),l}getBeforeBody(e,t){return getBeforeAfterBodyLines(t.callbacks.beforeBody.apply(this,[e]))}getBody(e,t){const{callbacks:n}=t,r=[];return each(e,(e=>{const t={before:[],lines:[],after:[]},a=overrideCallbacks(n,e);pushOrConcat(t.before,splitNewlines(a.beforeLabel.call(this,e))),pushOrConcat(t.lines,a.label.call(this,e)),pushOrConcat(t.after,splitNewlines(a.afterLabel.call(this,e))),r.push(t)})),r}getAfterBody(e,t){return getBeforeAfterBodyLines(t.callbacks.afterBody.apply(this,[e]))}getFooter(e,t){const{callbacks:n}=t,r=n.beforeFooter.apply(this,[e]),a=n.footer.apply(this,[e]),o=n.afterFooter.apply(this,[e]);let l=[];return l=pushOrConcat(l,splitNewlines(r)),l=pushOrConcat(l,splitNewlines(a)),l=pushOrConcat(l,splitNewlines(o)),l}_createItems(e){const t=this._active,n=this.chart.data,r=[],a=[],o=[];let l,s,c=[];for(l=0,s=t.length;l<s;++l)c.push(createTooltipItem(this.chart,t[l]));return e.filter&&(c=c.filter(((t,r,a)=>e.filter(t,r,a,n)))),e.itemSort&&(c=c.sort(((t,r)=>e.itemSort(t,r,n)))),each(c,(t=>{const n=overrideCallbacks(e.callbacks,t);r.push(n.labelColor.call(this,t)),a.push(n.labelPointStyle.call(this,t)),o.push(n.labelTextColor.call(this,t))})),this.labelColors=r,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=c,c}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let a,o=[];if(r.length){const e=pe[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const t=this._size=getTooltipSize(this,n),l=Object.assign({},e,t),s=determineAlignment(this.chart,n,l),c=getBackgroundPoint(n,l,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,a={opacity:1,x:c.x,y:c.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const a=this.getCaretPosition(e,n,r);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:a}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:s,topRight:c,bottomLeft:u,bottomRight:d}=toTRBLCorners(l),{x:h,y:p}=e,{width:g,height:b}=t;let m,v,y,_,O,E;return"center"===a?(O=p+b/2,"left"===r?(m=h,v=m-o,_=O+o,E=O-o):(m=h+g,v=m+o,_=O-o,E=O+o),y=m):(v="left"===r?h+Math.max(s,u)+o:"right"===r?h+g-Math.max(c,d)-o:this.caretX,"top"===a?(_=p,O=_-o,m=v-o,y=v+o):(_=p+b,O=_+o,m=v+o,y=v-o),E=_),{x1:m,x2:v,x3:y,y1:_,y2:O,y3:E}}drawTitle(e,t,n){const r=this.title,a=r.length;let o,l,s;if(a){const c=getRtlAdapter(n.rtl,this.x,this.width);for(e.x=getAlignedX(this,n.titleAlign,n),t.textAlign=c.textAlign(n.titleAlign),t.textBaseline="middle",o=toFont(n.titleFont),l=n.titleSpacing,t.fillStyle=n.titleColor,t.font=o.string,s=0;s<a;++s)t.fillText(r[s],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,s+1===a&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,t,n,r,a){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:s,boxWidth:c,boxPadding:u}=a,d=toFont(a.bodyFont),h=getAlignedX(this,"left",a),p=r.x(h),g=s<d.lineHeight?(d.lineHeight-s)/2:0,b=t.y+g;if(a.usePointStyle){const t={radius:Math.min(c,s)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},n=r.leftForLtr(p,c)+c/2,u=b+s/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,drawPoint(e,t,n,u),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,drawPoint(e,t,n,u)}else{e.lineWidth=isObject(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const t=r.leftForLtr(p,c-u),n=r.leftForLtr(r.xPlus(p,1),c-u-2),l=toTRBLCorners(o.borderRadius);Object.values(l).some((e=>0!==e))?(e.beginPath(),e.fillStyle=a.multiKeyBackground,addRoundedRectPath(e,{x:t,y:b,w:c,h:s,radius:l}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),addRoundedRectPath(e,{x:n,y:b+1,w:c-2,h:s-2,radius:l}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(t,b,c,s),e.strokeRect(t,b,c,s),e.fillStyle=o.backgroundColor,e.fillRect(n,b+1,c-2,s-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:a,bodyAlign:o,displayColors:l,boxHeight:s,boxWidth:c,boxPadding:u}=n,d=toFont(n.bodyFont);let h=d.lineHeight,p=0;const g=getRtlAdapter(n.rtl,this.x,this.width),fillLineOfText=function(n){t.fillText(n,g.x(e.x+p),e.y+h/2),e.y+=h+a},b=g.textAlign(o);let m,v,y,_,O,E,x;for(t.textAlign=o,t.textBaseline="middle",t.font=d.string,e.x=getAlignedX(this,b,n),t.fillStyle=n.bodyColor,each(this.beforeBody,fillLineOfText),p=l&&"right"!==b?"center"===o?c/2+u:c+2+u:0,_=0,E=r.length;_<E;++_){for(m=r[_],v=this.labelTextColors[_],t.fillStyle=v,each(m.before,fillLineOfText),y=m.lines,l&&y.length&&(this._drawColorBox(t,e,_,g,n),h=Math.max(d.lineHeight,s)),O=0,x=y.length;O<x;++O)fillLineOfText(y[O]),h=d.lineHeight;each(m.after,fillLineOfText)}p=0,h=d.lineHeight,each(this.afterBody,fillLineOfText),e.y-=a}drawFooter(e,t,n){const r=this.footer,a=r.length;let o,l;if(a){const s=getRtlAdapter(n.rtl,this.x,this.width);for(e.x=getAlignedX(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",o=toFont(n.footerFont),t.fillStyle=n.footerColor,t.font=o.string,l=0;l<a;++l)t.fillText(r[l],s.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:a,yAlign:o}=this,{x:l,y:s}=e,{width:c,height:u}=n,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:g}=toTRBLCorners(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(l+d,s),"top"===o&&this.drawCaret(e,t,n,r),t.lineTo(l+c-h,s),t.quadraticCurveTo(l+c,s,l+c,s+h),"center"===o&&"right"===a&&this.drawCaret(e,t,n,r),t.lineTo(l+c,s+u-g),t.quadraticCurveTo(l+c,s+u,l+c-g,s+u),"bottom"===o&&this.drawCaret(e,t,n,r),t.lineTo(l+p,s+u),t.quadraticCurveTo(l,s+u,l,s+u-p),"center"===o&&"left"===a&&this.drawCaret(e,t,n,r),t.lineTo(l,s+d),t.quadraticCurveTo(l,s,l+d,s),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,a=n&&n.y;if(r||a){const n=pe[e.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=getTooltipSize(this,e),l=Object.assign({},n,this._size),s=determineAlignment(t,e,l),c=getBackgroundPoint(e,l,s,t);r._to===c.x&&a._to===c.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=toPadding(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,r,t),overrideTextDirection(e,t.textDirection),a.y+=o.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),restoreTextDirection(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((({datasetIndex:e,index:t})=>{const n=this.chart.getDatasetMeta(e);if(!n)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:n.data[t],index:t}})),a=!_elementsEqual(n,r),o=this._positionChanged(r,t);(a||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,a=this._active||[],o=this._getActiveElements(e,a,t,n),l=this._positionChanged(o,e),s=t||!_elementsEqual(o,a)||l;return s&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}_getActiveElements(e,t,n,r){const a=this.options;if("mouseout"===e.type)return[];if(!r)return t;const o=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:n,caretY:r,options:a}=this,o=pe[a.position].call(this,e,t);return!1!==o&&(n!==o.x||r!==o.y)}}Tooltip.positioners=pe;var ge={id:"tooltip",_element:Tooltip,positioners:pe,afterInit(e,t,n){n&&(e.tooltip=new Tooltip({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",n))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:noop,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:noop,beforeBody:noop,beforeLabel:noop,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return isNullOrUndef(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:noop,afterBody:noop,beforeFooter:noop,footer:noop,afterFooter:noop}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},fe=Object.freeze({__proto__:null,Decimation:le,Filler:se,Legend:ce,SubTitle:he,Title:ue,Tooltip:ge});function findOrAddLabel(e,t,n,r){const a=e.indexOf(t);if(-1===a)return((e,t,n,r)=>("string"==typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return a!==e.lastIndexOf(t)?n:a}class CategoryScale extends Scale{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(isNullOrUndef(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:_limitValue(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:findOrAddLabel(n,e,valueOrDefault(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=e;n<=t;n++)r.push({value:n});return r}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function generateTicks$1(e,t){const n=[],{bounds:r,step:a,min:o,max:l,precision:s,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=e,p=a||1,g=u-1,{min:b,max:m}=t,v=!isNullOrUndef(o),y=!isNullOrUndef(l),_=!isNullOrUndef(c),O=(m-b)/(d+1);let E,x,S,w,C=niceNum((m-b)/g/p)*p;if(C<1e-14&&!v&&!y)return[{value:b},{value:m}];w=Math.ceil(m/C)-Math.floor(b/C),w>g&&(C=niceNum(w*C/g/p)*p),isNullOrUndef(s)||(E=Math.pow(10,s),C=Math.ceil(C*E)/E),"ticks"===r?(x=Math.floor(b/C)*C,S=Math.ceil(m/C)*C):(x=b,S=m),v&&y&&a&&function almostWhole(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((l-o)/a,C/1e3)?(w=Math.round(Math.min((l-o)/C,u)),C=(l-o)/w,x=o,S=l):_?(x=v?o:x,S=y?l:S,w=c-1,C=(S-x)/w):(w=(S-x)/C,w=almostEquals(w,Math.round(w),C/1e3)?Math.round(w):Math.ceil(w));const D=Math.max(_decimalPlaces(C),_decimalPlaces(x));E=Math.pow(10,isNullOrUndef(s)?D:s),x=Math.round(x*E)/E,S=Math.round(S*E)/E;let P=0;for(v&&(h&&x!==o?(n.push({value:o}),x<o&&P++,almostEquals(Math.round((x+P*C)*E)/E,o,relativeLabelSize(o,O,e))&&P++):x<o&&P++);P<w;++P)n.push({value:Math.round((x+P*C)*E)/E});return y&&h&&S!==l?n.length&&almostEquals(n[n.length-1].value,l,relativeLabelSize(l,O,e))?n[n.length-1].value=l:n.push({value:l}):y&&S!==l||n.push({value:S}),n}function relativeLabelSize(e,t,{horizontal:n,minRotation:r}){const a=toRadians(r),o=(n?Math.sin(a):Math.cos(a))||.001,l=.75*t*(""+e).length;return Math.min(t/o,l)}CategoryScale.id="category",CategoryScale.defaults={ticks:{callback:CategoryScale.prototype.getLabelForValue}};class LinearScaleBase extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return isNullOrUndef(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:a}=this;const setMin=e=>r=t?r:e,setMax=e=>a=n?a:e;if(e){const e=b(r),t=b(a);e<0&&t<0?setMax(0):e>0&&t>0&&setMin(0)}if(r===a){let t=1;(a>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(t=Math.abs(.05*a)),setMax(a+t),e||setMin(r-t)}this.min=r,this.max=a}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=generateTicks$1({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&_setMinAndMaxByKey(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return formatNumber(e,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=isNumberFinite(e)?e:0,this.max=isNumberFinite(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=toRadians(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function isMajor(e){return 1===e/Math.pow(10,Math.floor(g(e)))}LinearScale.id="linear",LinearScale.defaults={ticks:{callback:W.formatters.numeric}};class LogarithmicScale extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=LinearScaleBase.prototype.parse.apply(this,[e,t]);if(0!==n)return isNumberFinite(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=isNumberFinite(e)?Math.max(0,e):null,this.max=isNumberFinite(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const setMin=t=>n=e?n:t,setMax=e=>r=t?r:e,exp=(e,t)=>Math.pow(10,Math.floor(g(e))+t);n===r&&(n<=0?(setMin(1),setMax(10)):(setMin(exp(n,-1)),setMax(exp(r,1)))),n<=0&&setMin(exp(r,-1)),r<=0&&setMax(exp(n,1)),this._zero&&this.min!==this._suggestedMin&&n===exp(this.min,0)&&setMin(exp(n,-1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=function generateTicks(e,t){const n=Math.floor(g(t.max)),r=Math.ceil(t.max/Math.pow(10,n)),a=[];let o=finiteOrDefault(e.min,Math.pow(10,Math.floor(g(t.min)))),l=Math.floor(g(o)),s=Math.floor(o/Math.pow(10,l)),c=l<0?Math.pow(10,Math.abs(l)):1;do{a.push({value:o,major:isMajor(o)}),++s,10===s&&(s=1,++l,c=l>=0?1:c),o=Math.round(s*Math.pow(10,l)*c)/c}while(l<n||l===n&&s<r);const u=finiteOrDefault(e.max,o);return a.push({value:u,major:isMajor(o)}),a}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&_setMinAndMaxByKey(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":formatNumber(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=g(e),this._valueRange=g(this.max)-g(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(g(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function getTickBackdropHeight(e){const t=e.ticks;if(t.display&&e.display){const e=toPadding(t.backdropPadding);return valueOrDefault(t.font&&t.font.size,T.font.size)+e.height}return 0}function determineLimits(e,t,n,r,a){return e===r||e===a?{start:t-n/2,end:t+n/2}:e<r||e>a?{start:t-n,end:t}:{start:t,end:t+n}}function fitWithPointLabels(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],a=[],l=e._pointLabels.length,s=e.options.pointLabels,c=s.centerPointLabels?o/l:0;for(let o=0;o<l;o++){const l=s.setContext(e.getPointLabelContext(o));a[o]=l.padding;const d=e.getPointPosition(o,e.drawingArea+a[o],c),g=toFont(l.font),b=(u=e.ctx,h=g,p=isArray(p=e._pointLabels[o])?p:[p],{w:_longestText(u,h.string,p),h:p.length*h.lineHeight});r[o]=b;const m=_normalizeAngle(e.getIndexAngle(o)+c),v=Math.round(toDegrees(m));updateLimits(n,t,m,determineLimits(v,d.x,b.w,0,180),determineLimits(v,d.y,b.h,90,270))}var u,h,p;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function buildPointLabelItems(e,t,n){const r=[],a=e._pointLabels.length,l=e.options,s=getTickBackdropHeight(l)/2,c=e.drawingArea,u=l.pointLabels.centerPointLabels?o/a:0;for(let o=0;o<a;o++){const a=e.getPointPosition(o,c+s+n[o],u),l=Math.round(toDegrees(_normalizeAngle(a.angle+d))),h=t[o],p=yForAngle(a.y,h.h,l),g=getTextAlignForAngle(l),b=leftForTextAlign(a.x,h.w,g);r.push({x:a.x,y:p,textAlign:g,left:b,top:p,right:b+h.w,bottom:p+h.h})}return r}(e,r,a)}function updateLimits(e,t,n,r,a){const o=Math.abs(Math.sin(n)),l=Math.abs(Math.cos(n));let s=0,c=0;r.start<t.l?(s=(t.l-r.start)/o,e.l=Math.min(e.l,t.l-s)):r.end>t.r&&(s=(r.end-t.r)/o,e.r=Math.max(e.r,t.r+s)),a.start<t.t?(c=(t.t-a.start)/l,e.t=Math.min(e.t,t.t-c)):a.end>t.b&&(c=(a.end-t.b)/l,e.b=Math.max(e.b,t.b+c))}function getTextAlignForAngle(e){return 0===e||180===e?"center":e<180?"left":"right"}function leftForTextAlign(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function yForAngle(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function pathRadiusLine(e,t,n,r){const{ctx:a}=e;if(n)a.arc(e.xCenter,e.yCenter,t,0,l);else{let n=e.getPointPosition(0,t);a.moveTo(n.x,n.y);for(let o=1;o<r;o++)n=e.getPointPosition(o,t),a.lineTo(n.x,n.y)}}LogarithmicScale.id="logarithmic",LogarithmicScale.defaults={ticks:{callback:W.formatters.logarithmic,major:{enabled:!0}}};class RadialLinearScale extends LinearScaleBase{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=toPadding(getTickBackdropHeight(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=isNumberFinite(e)&&!isNaN(e)?e:0,this.max=isNumberFinite(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(e){LinearScaleBase.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=callback(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return _normalizeAngle(e*(l/(this._pointLabels.length||1))+toRadians(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(isNullOrUndef(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(isNullOrUndef(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function createPointLabelContext(e,t,n){return createContext(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t,n=0){const r=this.getIndexAngle(e)-d+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:a}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r}=t,a=this._pointLabels.length;let o,l,s;if(t.pointLabels.display&&function drawPointLabels(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let a=t-1;a>=0;a--){const t=r.setContext(e.getPointLabelContext(a)),o=toFont(t.font),{x:l,y:s,textAlign:c,left:u,top:d,right:h,bottom:p}=e._pointLabelItems[a],{backdropColor:g}=t;if(!isNullOrUndef(g)){const e=toTRBLCorners(t.borderRadius),r=toPadding(t.backdropPadding);n.fillStyle=g;const a=u-r.left,o=d-r.top,l=h-u+r.width,s=p-d+r.height;Object.values(e).some((e=>0!==e))?(n.beginPath(),addRoundedRectPath(n,{x:a,y:o,w:l,h:s,radius:e}),n.fill()):n.fillRect(a,o,l,s)}renderText(n,e._pointLabels[a],l,s+o.lineHeight/2,o,{color:t.color,textAlign:c,textBaseline:"middle"})}}(this,a),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t){l=this.getDistanceFromCenterForValue(e.value);!function drawRadiusLine(e,t,n,r){const a=e.ctx,o=t.circular,{color:l,lineWidth:s}=t;!o&&!r||!l||!s||n<0||(a.save(),a.strokeStyle=l,a.lineWidth=s,a.setLineDash(t.borderDash),a.lineDashOffset=t.borderDashOffset,a.beginPath(),pathRadiusLine(e,n,o,r),a.closePath(),a.stroke(),a.restore())}(this,r.setContext(this.getContext(t-1)),l,a)}})),n.display){for(e.save(),o=a-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:a,lineWidth:c}=r;c&&a&&(e.lineWidth=c,e.strokeStyle=a,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),s=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(s.x,s.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let a,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,l)=>{if(0===l&&!t.reverse)return;const s=n.setContext(this.getContext(l)),c=toFont(s.font);if(a=this.getDistanceFromCenterForValue(this.ticks[l].value),s.showLabelBackdrop){e.font=c.string,o=e.measureText(r.label).width,e.fillStyle=s.backdropColor;const t=toPadding(s.backdropPadding);e.fillRect(-o/2-t.left,-a-c.size/2-t.top,o+t.width,c.size+t.height)}renderText(e,r.label,0,-a,c,{color:s.color})})),e.restore()}drawTitle(){}}RadialLinearScale.id="radialLinear",RadialLinearScale.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:W.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}},RadialLinearScale.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},RadialLinearScale.descriptors={angleLines:{_fallback:"grid"}};const be={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},me=Object.keys(be);function sorter(e,t){return e-t}function parse(e,t){if(isNullOrUndef(t))return null;const n=e._adapter,{parser:r,round:a,isoWeekday:o}=e._parseOpts;let l=t;return"function"==typeof r&&(l=r(l)),isNumberFinite(l)||(l="string"==typeof r?n.parse(l,r):n.parse(l)),null===l?null:(a&&(l="week"!==a||!isNumber(o)&&!0!==o?n.startOf(l,a):n.startOf(l,"isoWeek",o)),+l)}function determineUnitForAutoTicks(e,t,n,r){const a=me.length;for(let o=me.indexOf(e);o<a-1;++o){const e=be[me[o]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(a*e.size))<=r)return me[o]}return me[a-1]}function addTick(e,t,n){if(n){if(n.length){const{lo:r,hi:a}=_lookup(n,t);e[n[r]>=t?n[r]:n[a]]=!0}}else e[t]=!0}function ticksFromTimestamps(e,t,n){const r=[],a={},o=t.length;let l,s;for(l=0;l<o;++l)s=t[l],a[s]=l,r.push({value:s,major:!1});return 0!==o&&n?function setMajorTicks(e,t,n,r){const a=e._adapter,o=+a.startOf(t[0].value,r),l=t[t.length-1].value;let s,c;for(s=o;s<=l;s=+a.add(s,1,r))c=n[s],c>=0&&(t[c].major=!0);return t}(e,r,a,n):r}class TimeScale extends Scale{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t){const n=e.time||(e.time={}),r=this._adapter=new V._date(e.adapters.date);r.init(t),mergeIf(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:parse(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:a,minDefined:o,maxDefined:l}=this.getUserBounds();function _applyBounds(e){o||isNaN(e.min)||(r=Math.min(r,e.min)),l||isNaN(e.max)||(a=Math.max(a,e.max))}o&&l||(_applyBounds(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||_applyBounds(this.getMinMax(!1))),r=isNumberFinite(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),a=isNumberFinite(a)&&!isNaN(a)?a:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const a=this.min,o=function _filterBetween(e,t,n){let r=0,a=e.length;for(;r<a&&e[r]<t;)r++;for(;a>r&&e[a-1]>n;)a--;return r>0||a<e.length?e.slice(r,a):e}(r,a,this.max);return this._unit=t.unit||(n.autoSkip?determineUnitForAutoTicks(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function determineUnitForFormatting(e,t,n,r,a){for(let o=me.length-1;o>=me.indexOf(n);o--){const n=me[o];if(be[n].common&&e._adapter.diff(a,r,n)>=t-1)return n}return me[n?me.indexOf(n):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function determineMajorUnit(e){for(let t=me.indexOf(e)+1,n=me.length;t<n;++t)if(be[me[t]].common)return me[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&o.reverse(),ticksFromTimestamps(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(e){let t,n,r=0,a=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),a=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=_limitValue(r,0,o),a=_limitValue(a,0,o),this._offsets={start:r,end:a,factor:1/(r+1+a)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,a=r.time,o=a.unit||determineUnitForAutoTicks(a.minUnit,t,n,this._getLabelCapacity(t)),l=valueOrDefault(a.stepSize,1),s="week"===o&&a.isoWeekday,c=isNumber(s)||!0===s,u={};let d,h,p=t;if(c&&(p=+e.startOf(p,"isoWeek",s)),p=+e.startOf(p,c?"day":o),e.diff(n,t,o)>1e5*l)throw new Error(t+" and "+n+" are too far apart with stepSize of "+l+" "+o);const g="data"===r.ticks.source&&this.getDataTimestamps();for(d=p,h=0;d<n;d=+e.add(d,l,o),h++)addTick(u,d,g);return d!==n&&"ticks"!==r.bounds&&1!==h||addTick(u,d,g),Object.keys(u).sort(((e,t)=>e-t)).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}_tickFormatFunction(e,t,n,r){const a=this.options,o=a.time.displayFormats,l=this._unit,s=this._majorUnit,c=l&&o[l],u=s&&o[s],d=n[t],h=s&&u&&d&&d.major,p=this._adapter.format(e,r||(h?u:c)),g=a.ticks.callback;return g?callback(g,[p,t,n],this):p}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=toRadians(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*a+l*o,h:n*o+l*a}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,a=this._tickFormatFunction(e,0,ticksFromTimestamps(this,[e],this._majorUnit),r),o=this._getLabelSize(a),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(parse(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _arrayUnique(e.sort(sorter))}}function chart_interpolate(e,t,n){let r,a,o,l,s=0,c=e.length-1;n?(t>=e[s].pos&&t<=e[c].pos&&({lo:s,hi:c}=_lookupByKey(e,"pos",t)),({pos:r,time:o}=e[s]),({pos:a,time:l}=e[c])):(t>=e[s].time&&t<=e[c].time&&({lo:s,hi:c}=_lookupByKey(e,"time",t)),({time:r,pos:o}=e[s]),({time:a,pos:l}=e[c]));const u=a-r;return u?o+(l-o)*(t-r)/u:o}TimeScale.id="time",TimeScale.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class TimeSeriesScale extends TimeScale{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=chart_interpolate(t,this.min),this._tableRange=chart_interpolate(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],a=[];let o,l,s,c,u;for(o=0,l=e.length;o<l;++o)c=e[o],c>=t&&c<=n&&r.push(c);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],s=r[o-1],c=r[o],Math.round((u+s)/2)!==c&&a.push({time:c,pos:o/(l-1)});return a}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(chart_interpolate(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return chart_interpolate(this._table,n*this._tableRange+this._minPos,!0)}}TimeSeriesScale.id="timeseries",TimeSeriesScale.defaults=TimeScale.defaults;const ve=[Z,oe,fe,Object.freeze({__proto__:null,CategoryScale,LinearScale,LogarithmicScale,RadialLinearScale,TimeScale,TimeSeriesScale})]}}]);