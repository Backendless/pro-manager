<xml xmlns="http://www.w3.org/1999/xhtml"><block type="root_block_ui_builder_block_onClick_handler" id=":D6B_$45`j)-F;zfjhjB" deletable="false" x="20" y="50"><statement name="statements_code"><block type="controls_if" id="iN;yiKo~;Hw1HvzQii0."><mutation else="1"></mutation><value name="IF0"><block type="logic_compare" id="K:33e6R@O|Q`_Wx0n/kq"><field name="OP">NEQ</field><value name="A"><block type="get_object_property" id="Aq!I1PlK_jfb+,qzTW;/"><value name="prop_name"><shadow type="text" id="FneZcYSZa2o)[+N]j`f?"><field name="TEXT">left</field></shadow></value><value name="object"><block type="ui_common_blocks__get_component_data_style" id="+%%Eo}XJ*$41y`;`jkr5" bl_meta="{&quot;label&quot;:&quot;Get component style&quot;}"><field name="componentUid">'62182e6e6db9aecf974c9c65dfaea369'</field></block></value></block></value><value name="B"><block type="text" id="3NEEn|yq`Va`;`qd__eX"><field name="TEXT">0px</field></block></value></block></value><statement name="DO0"><block type="set_object_property" id="PQVaP=0.3VEjsD*c,ajf"><value name="object"><block type="ui_common_blocks__get_component_data_style" id="Qtetbciop_5^g%1}}R`p" bl_meta="{&quot;label&quot;:&quot;Get component style&quot;}"><field name="componentUid">'62182e6e6db9aecf974c9c65dfaea369'</field></block></value><value name="propName"><shadow type="text" id=",#=qGU|2:i:TpTn%5Vac"><field name="TEXT">left</field></shadow></value><value name="propValue"><block type="text_join" id="QSMB=UhQyG.{:sjcDMj}"><mutation items="2"></mutation><value name="ADD0"><block type="math_number" id="E8mFL?|`Y@!mgcDcTSqs"><field name="NUM">0</field></block></value><value name="ADD1"><block type="text" id="cIBz{XkTgzkRKEc`!_~H"><field name="TEXT">px</field></block></value></block></value></block></statement><statement name="ELSE"><block type="set_object_property" id="=|4Em(WR~mWCFj~%*X.e"><value name="object"><block type="ui_common_blocks__get_component_data_style" id="t[_RC)%QREsl.2!Y;~MY" bl_meta="{&quot;label&quot;:&quot;Get component style&quot;}"><field name="componentUid">'62182e6e6db9aecf974c9c65dfaea369'</field></block></value><value name="propName"><shadow type="text" id="yxT_YC#$STvyd%3]*By,"><field name="TEXT">left</field></shadow></value><value name="propValue"><block type="text_join" id="$,bpwFDBuRDGqwjsJS9d"><mutation items="2"></mutation><value name="ADD0"><block type="math_number" id="QQ7~2vl=?Gy=^%y{^v3S"><field name="NUM">-325</field></block></value><value name="ADD1"><block type="text" id="niJLg.H,]idmmWoco|fF"><field name="TEXT">px</field></block></value></block></value></block></statement><next><block type="controls_if" id="pbEX[Q/R?,%WWe:;4$5i"><value name="IF0"><block type="get_object_property" id="n(@lc%hkZ)w273(OZ4hs"><value name="prop_name"><shadow type="text" id="-]Zek*OA}3C$h!a@.U+f"><field name="TEXT">previousServiceUpgrade</field></shadow></value><value name="object"><block type="root_block_ui_builder_common__context_blocks_appData" id="k=4qEmW/}o`VR74x%ey8" bl_meta="{&quot;label&quot;:&quot;App Data&quot;}"></block></value></block></value><statement name="DO0"><block type="controls_if" id="5[xRbBuDaWI%v3lDqTWk"><value name="IF0"><block type="get_object_property" id="y~fDIT/){bZ~2Co)9{zf"><value name="prop_name"><shadow type="text" id="k@w]yh9:$Q%.?u-Nf2:6"><field name="TEXT">connected</field></shadow></value><value name="object"><block type="get_object_property" id="#rn85hy]bM=LHbB-|#w6" inline="false"><value name="prop_name"><shadow type="text" id="U1ko_Fe#+v0iUa9|j0H7"><field name="TEXT">opensScketUpgrade</field></shadow></value><value name="object"><block type="root_block_ui_builder_common__context_blocks_appData" id="XnO}ra@4+-:ch-VkXs.Z" bl_meta="{&quot;label&quot;:&quot;App Data&quot;}"></block></value></block></value></block></value><statement name="DO0"><block type="custom_js_code" id="kE]rC%SEbi@(SilkoB4+"><mutation output="false"><arg arg-name="serviceName"></arg><code>" \n  socketUpgrade.emit ('service-logs:unsubscribe', {\n    \"serviceName\":`${serviceName}`,\n    \"channelName\":`${serviceName}-log`\n  });\n  \n  socketUpgrade.disconnect();\n \n    \n "</code></mutation><field name="name">stopSocket</field><value name="serviceName"><block type="get_object_property" id="z6H`l$x6/QxW?=}Ho;q0"><value name="prop_name"><shadow type="text" id="2M|X49(Bgl#ZpzGG99[~"><field name="TEXT">previousServiceUpgrade</field></shadow></value><value name="object"><block type="root_block_ui_builder_common__context_blocks_appData" id="oYGw3+EjQAs4FF:ui,L_" bl_meta="{&quot;label&quot;:&quot;App Data&quot;}"></block></value></block></value></block></statement></block></statement><next><block type="ui_dynamic_category__app-router__goto_page" id="o^JOW}JBK.)+W?Ni+GYZ" bl_meta="{&quot;label&quot;:&quot;Dynamic Block: Go To Page&quot;}"><value name="pageName"><shadow type="text" id="+9-`duW@nuPz}xd|d?7H"><field name="TEXT">upgradeLogs</field></shadow></value><value name="pageData"><block type="create_object" id="~|Jg?XTK++hodM~+T8Br"><mutation><properties><item id="property" prop-name="pageUpgrade"></item><item id="property" prop-name="jobName"></item><item id="property" prop-name="podName"></item></properties></mutation><value name="create_object_mutator_container_properties_stack_property0"><block type="text" id="KMk*yFl9X_3f{bL=vG10"><field name="TEXT">upgradeLogs</field></block></value><value name="create_object_mutator_container_properties_stack_property1"><block type="get_object_property" id="+eaWJ}O6yc)#xUWy{Q3a" inline="false"><value name="prop_name"><shadow type="text" id="r;DZ8!PrjaD3]86M:cwi"><field name="TEXT">jobName</field></shadow></value><value name="object"><block type="root_block_ui_builder_common__context_blocks_17ba156b5b49eae93175d437c9e8c1c2_data" id="G|zF~yP{$J-oETgs9:!#" bl_meta="{&quot;label&quot;:&quot;\&quot;aside ContentItemContainerUpgrade\&quot; Repeater Data Item&quot;,&quot;dynamicListId&quot;:&quot;3d81f4e11ffb3b99c18f1b83c9cfa36d&quot;}"></block></value></block></value><value name="create_object_mutator_container_properties_stack_property2"><block type="get_object_property" id="HTxYNhBNE4Da42/T?peq" inline="false"><value name="prop_name"><shadow type="text" id="q3):]!jFNd2QwOka1JOx"><field name="TEXT">podName</field></shadow></value><value name="object"><block type="root_block_ui_builder_common__context_blocks_17ba156b5b49eae93175d437c9e8c1c2_data" id="itnQ]_}4TbR1nJwXhr]8" bl_meta="{&quot;label&quot;:&quot;\&quot;aside ContentItemContainerUpgrade\&quot; Repeater Data Item&quot;,&quot;dynamicListId&quot;:&quot;3d81f4e11ffb3b99c18f1b83c9cfa36d&quot;}"></block></value></block></value></block></value><next><block type="custom_js_code" id="6+kgZ_I0J^=WjT_.Ho,V"><mutation output="false"><code>"// logClear = false;\nlogStopFollow = false;\n// logOriginalText = '';\n// logFileText = ''\n"</code></mutation><field name="name">init_custom_logic</field><next><block type="set_object_property" id="kIm_XJD6~m6txqdIdcBd" disabled="true"><value name="object"><block type="root_block_ui_builder_common__context_blocks_appData" id="di`neqL|ZWb/)vg%L+(_" bl_meta="{&quot;label&quot;:&quot;App Data&quot;}"></block></value><value name="propName"><shadow type="text" id="=;00rt#!yxnMTGsQrhj8"><field name="TEXT">logUpgradeData</field></shadow></value><value name="propValue"><block type="lists_create_with" id="#o2TyO24t@klq1#lT415"><mutation items="0"></mutation></block></value><next><block type="set_object_property" id="~tp:mFw#HLm@bF?2*Vmv" disabled="true"><value name="object"><block type="root_block_ui_builder_common__context_blocks_appData" id="X9V%2;@p-xAPdrP7(}nK" bl_meta="{&quot;label&quot;:&quot;App Data&quot;}"></block></value><value name="propName"><shadow type="text" id="o0#fU.~arL9T-S8+CW%a"><field name="TEXT">opensScketUpgrade</field></shadow></value><value name="propValue"><block type="custom_js_code" id="IPF|Y|^!Q1oO})zyAp;i"><mutation output="true"><arg arg-name="logsArray"></arg><arg arg-name="serviceName"></arg><arg arg-name="podName"></arg><code>"const io = await BackendlessUI.requireModule('https://cdn.jsdelivr.net/npm/socket.io-client@4.4.0/dist/socket.io.min.js');\n  socketUpgrade = io.connect('http://localhost:5051', { transports : ['websocket'] });\n\nconst itemsBuffer = []\n\n  function throttle(cb, delay) {\n    let wait = false\n    let storedArgs = null\n\n    function checkStoredArgs() {\n      if (storedArgs == null) {\n        wait = false\n      } else {\n        cb(...storedArgs)\n        storedArgs = null\n        setTimeout(checkStoredArgs, delay)\n      }\n    }\n\n    return (...args) =&gt; {\n      if (wait) {\n        storedArgs = args\n        return\n      }\n\n      cb(...args)\n      wait = true\n      setTimeout(checkStoredArgs, delay)\n    }\n  }\n\n  // const lazyMessageReceiver=throttle(() =&gt; {\n  //   logsArray.push(...itemsBuffer.splice(0,100))\n  //   // logsArray.push(...itemsBuffer)\n  //   itemsBuffer.length = 0\n  // }, 100)\n  \n  // const lazyMessageReceiver = throttle(() =&gt; {\n  //   console.log('fgh')\n  //   const limit = 100\n   \n  //   for (let i = 0; i &lt; itemsBuffer.length; i += limit) {\n  //     logsArray.push(...itemsBuffer.splice(i, limit))\n  //   }\n\n  //   itemsBuffer.length = 0\n  // }, 100)\n  \n  const lazyMessageReceiver = throttle(() =&gt; {\n    logsArray.innerText += `\\n${ itemsBuffer.join('\\n') }`\n\n    itemsBuffer.length = 0\n  }, 100)\n  \n  socketUpgrade.on(`${ serviceName }-log`, function (data) {\n    // console.log(data)\n\n    itemsBuffer.push(data)\n\n    lazyMessageReceiver()\n  })\n  \n  // socketUpgrade.on (`${serviceName}-log`, function (data) {\n  //   // logsArray.push (data);\n  //   console.log(data)\n  // });\n        \n  socketUpgrade.emit ('service-logs:subscribe', {\n    \"serviceName\":`${serviceName}`,\n    \"podName\":`${podName}`,\n    \"channelName\": `${serviceName}-log`\n  });\n  \n  \n  return socketUpgrade"</code></mutation><field name="name">getSocketUpgradeData</field><value name="logsArray"><block type="get_object_property" id="o|3/Ib9Bx2B^LwtfPglO"><value name="prop_name"><shadow type="text" id="QT(_d!5C1v9%s,Owp[Ln"><field name="TEXT">logUpgradeData</field></shadow></value><value name="object"><block type="root_block_ui_builder_common__context_blocks_appData" id="-:7A%:`}hvs_l{8v|tSS" bl_meta="{&quot;label&quot;:&quot;App Data&quot;}"></block></value></block></value><value name="serviceName"><block type="get_object_property" id="c$ThICs^1J+l!Z1W`D[y" inline="false"><value name="prop_name"><shadow type="text" id="{i:*~Upd9,1v#CB#N+,T"><field name="TEXT">jobName</field></shadow></value><value name="object"><block type="root_block_ui_builder_common__context_blocks_17ba156b5b49eae93175d437c9e8c1c2_data" id="_C4OAGkp/DqAZ;CB0}_:" bl_meta="{&quot;label&quot;:&quot;\&quot;aside ContentItemContainerUpgrade\&quot; Repeater Data Item&quot;,&quot;dynamicListId&quot;:&quot;3d81f4e11ffb3b99c18f1b83c9cfa36d&quot;}"></block></value></block></value><value name="podName"><block type="get_object_property" id="G`_[77d!F^4{VFEJpqp7" inline="false"><value name="prop_name"><shadow type="text" id="V3tJ`[:##$wNKC}TCVil"><field name="TEXT">podName</field></shadow></value><value name="object"><block type="root_block_ui_builder_common__context_blocks_17ba156b5b49eae93175d437c9e8c1c2_data" id="BQv0u^FG{#gtPcOI7B`!" bl_meta="{&quot;label&quot;:&quot;\&quot;aside ContentItemContainerUpgrade\&quot; Repeater Data Item&quot;,&quot;dynamicListId&quot;:&quot;3d81f4e11ffb3b99c18f1b83c9cfa36d&quot;}"></block></value></block></value></block></value><next><block type="set_object_property" id="AXL3PkmY|[7)n4suNb(["><value name="object"><block type="root_block_ui_builder_common__context_blocks_appData" id="0``V:{kL~gyPX@jczDQv" bl_meta="{&quot;label&quot;:&quot;App Data&quot;}"></block></value><value name="propName"><shadow type="text" id="KYa,0a7c0lgkkjB[zqfM"><field name="TEXT">opensScketUpgrade</field></shadow></value><value name="propValue"><block type="codeless_function_block_b57fda13679c94ef267a4d8c86ef896c" id="(q~):|NtH,^$({y-%nU*" bl_meta="{&quot;fn&quot;:&quot;openSocketUpgrade&quot;,&quot;label&quot;:&quot;Custom Function - openSocketUpgrade&quot;}"><mutation has_output="true"></mutation><field name="connections_toggler">TRUE</field><value name="serviceName"><block type="get_object_property" id="`]2_oa;zaR#[rRyDm^RL" inline="false"><value name="prop_name"><shadow type="text" id="K%jv_X),eu`gW:h*|nA-"><field name="TEXT">jobName</field></shadow></value><value name="object"><block type="root_block_ui_builder_common__context_blocks_17ba156b5b49eae93175d437c9e8c1c2_data" id="BxpI~W[zSAu!t}=@,)V;" bl_meta="{&quot;label&quot;:&quot;\&quot;aside ContentItemContainerUpgrade\&quot; Repeater Data Item&quot;,&quot;dynamicListId&quot;:&quot;3d81f4e11ffb3b99c18f1b83c9cfa36d&quot;}"></block></value></block></value><value name="podName"><block type="get_object_property" id="Q94gVgw:bt[MUMyrg^xE" inline="false"><value name="prop_name"><shadow type="text" id="]/KQ!T+7on_c*zIPZ1rP"><field name="TEXT">podName</field></shadow></value><value name="object"><block type="root_block_ui_builder_common__context_blocks_17ba156b5b49eae93175d437c9e8c1c2_data" id="-]9;MGI%fo)}6U$(]_ml" bl_meta="{&quot;label&quot;:&quot;\&quot;aside ContentItemContainerUpgrade\&quot; Repeater Data Item&quot;,&quot;dynamicListId&quot;:&quot;3d81f4e11ffb3b99c18f1b83c9cfa36d&quot;}"></block></value></block></value></block></value><next><block type="set_object_property" id="ajx#(.P6$g2=w]bSo1G_"><value name="object"><block type="root_block_ui_builder_common__context_blocks_appData" id="/f..F7sNS!~Euias,(/B" bl_meta="{&quot;label&quot;:&quot;App Data&quot;}"></block></value><value name="propName"><shadow type="text" id="j4D!izH)`!#];`,D9jLl"><field name="TEXT">previousServiceUpgrade</field></shadow></value><value name="propValue"><block type="get_object_property" id="eZ-.o,@HL+(CE*e$ztCb" inline="false"><value name="prop_name"><shadow type="text" id="zq`%Djj`d!h:d[;G3_(x"><field name="TEXT">jobName</field></shadow></value><value name="object"><block type="root_block_ui_builder_common__context_blocks_17ba156b5b49eae93175d437c9e8c1c2_data" id="Sb2]4dxHk1lX0[e{smt}" bl_meta="{&quot;label&quot;:&quot;\&quot;aside ContentItemContainerUpgrade\&quot; Repeater Data Item&quot;,&quot;dynamicListId&quot;:&quot;3d81f4e11ffb3b99c18f1b83c9cfa36d&quot;}"></block></value></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>